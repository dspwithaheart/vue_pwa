{"version":3,"sources":["webpack:///./node_modules/ngraph.events/index.js","webpack:///./node_modules/ngraph.physics.simulator/lib/spring.js","webpack:///./node_modules/ngraph.physics.simulator/lib/springForce.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/createBody.js","webpack:///./node_modules/ngraph.graph/index.js","webpack:///./node_modules/ngraph.quadtreebh3d/index.js","webpack:///./node_modules/@tweenjs/tween.js/dist/tween.esm.js","webpack:///./node_modules/ngraph.forcelayout3d/index.js","webpack:///./node_modules/ngraph.forcelayout/index.js","webpack:///./node_modules/ngraph.physics.primitives/index.js","webpack:///./node_modules/ngraph.quadtreebh/node.js","webpack:///./node_modules/ngraph.physics.simulator/lib/createBody.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/bounds.js","webpack:///./node_modules/ngraph.quadtreebh3d/node.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./node_modules/ngraph.quadtreebh/index.js","webpack:///./node_modules/ngraph.merge/index.js","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./node_modules/tinycolor2/tinycolor.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/springForce.js","webpack:///./node_modules/ngraph.physics.simulator/lib/bounds.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/dragForce.js","webpack:///./node_modules/ngraph.quadtreebh/insertStack.js","webpack:///./node_modules/three-dragcontrols/lib/index.module.js","webpack:///./node_modules/d3-force-3d/src/center.js","webpack:///./node_modules/d3-binarytree/src/add.js","webpack:///./node_modules/d3-binarytree/src/cover.js","webpack:///./node_modules/d3-binarytree/src/data.js","webpack:///./node_modules/d3-binarytree/src/extent.js","webpack:///./node_modules/d3-binarytree/src/half.js","webpack:///./node_modules/d3-binarytree/src/find.js","webpack:///./node_modules/d3-binarytree/src/remove.js","webpack:///./node_modules/d3-binarytree/src/root.js","webpack:///./node_modules/d3-binarytree/src/size.js","webpack:///./node_modules/d3-binarytree/src/visit.js","webpack:///./node_modules/d3-binarytree/src/visitAfter.js","webpack:///./node_modules/d3-binarytree/src/x.js","webpack:///./node_modules/d3-binarytree/src/binarytree.js","webpack:///./node_modules/d3-quadtree/src/add.js","webpack:///./node_modules/d3-quadtree/src/cover.js","webpack:///./node_modules/d3-quadtree/src/data.js","webpack:///./node_modules/d3-quadtree/src/extent.js","webpack:///./node_modules/d3-quadtree/src/quad.js","webpack:///./node_modules/d3-quadtree/src/find.js","webpack:///./node_modules/d3-quadtree/src/remove.js","webpack:///./node_modules/d3-quadtree/src/root.js","webpack:///./node_modules/d3-quadtree/src/size.js","webpack:///./node_modules/d3-quadtree/src/visit.js","webpack:///./node_modules/d3-quadtree/src/visitAfter.js","webpack:///./node_modules/d3-quadtree/src/x.js","webpack:///./node_modules/d3-quadtree/src/y.js","webpack:///./node_modules/d3-quadtree/src/quadtree.js","webpack:///./node_modules/d3-octree/src/add.js","webpack:///./node_modules/d3-octree/src/cover.js","webpack:///./node_modules/d3-octree/src/data.js","webpack:///./node_modules/d3-octree/src/extent.js","webpack:///./node_modules/d3-octree/src/octant.js","webpack:///./node_modules/d3-octree/src/find.js","webpack:///./node_modules/d3-octree/src/remove.js","webpack:///./node_modules/d3-octree/src/root.js","webpack:///./node_modules/d3-octree/src/size.js","webpack:///./node_modules/d3-octree/src/visit.js","webpack:///./node_modules/d3-octree/src/visitAfter.js","webpack:///./node_modules/d3-octree/src/x.js","webpack:///./node_modules/d3-octree/src/y.js","webpack:///./node_modules/d3-octree/src/z.js","webpack:///./node_modules/d3-octree/src/octree.js","webpack:///./node_modules/d3-force-3d/src/constant.js","webpack:///./node_modules/d3-force-3d/src/jiggle.js","webpack:///./node_modules/d3-force-3d/src/link.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-force-3d/src/simulation.js","webpack:///./node_modules/d3-force-3d/src/manyBody.js","webpack:///./node_modules/d3-force-3d/src/radial.js","webpack:///./node_modules/kapsule/dist/kapsule.module.js","webpack:///./node_modules/accessor-fn/dist/accessor-fn.module.js","webpack:///./node_modules/d3-array/src/min.js","webpack:///./node_modules/d3-array/src/max.js","webpack:///./node_modules/index-array-by/dist/index-array-by.module.js","webpack:///./node_modules/data-joint/dist/data-joint.module.js","webpack:///./node_modules/d3-scale/src/init.js","webpack:///./node_modules/d3-scale/src/ordinal.js","webpack:///./node_modules/d3-scale-chromatic/src/colors.js","webpack:///./node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack:///./node_modules/three-forcegraph/dist/three-forcegraph.module.js","webpack:///./node_modules/three/examples/jsm/controls/TrackballControls.js","webpack:///./node_modules/three/examples/jsm/controls/FlyControls.js","webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/polished/dist/polished.esm.js","webpack:///./node_modules/three-render-objects/dist/three-render-objects.module.js","webpack:///./node_modules/3d-force-graph/dist/3d-force-graph.module.js","webpack:///./node_modules/ngraph.quadtreebh3d/isSamePosition.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/eulerIntegrator.js","webpack:///./node_modules/debounce/index.js","webpack:///./node_modules/ngraph.physics.simulator/lib/eulerIntegrator.js","webpack:///./node_modules/ngraph.physics.simulator/index.js","webpack:///./node_modules/ngraph.quadtreebh/isSamePosition.js","webpack:///./node_modules/ngraph.physics.simulator/lib/dragForce.js","webpack:///./node_modules/ngraph.random/index.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/ngraph.expose/index.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/verletIntegrator.js","webpack:///./node_modules/ngraph.quadtreebh3d/insertStack.js"],"names":["createEventsStorage","subject","registeredEvents","Object","create","on","eventName","callback","ctx","Error","handlers","push","off","wantToRemoveAll","deleteAllCallbacksForEvent","callbacks","i","length","splice","fire","fireArguments","arguments","Array","prototype","call","callbackInfo","apply","validateSubject","reservedWords","hasOwnProperty","module","exports","eventsStorage","Spring","fromBody","toBody","coeff","weight","this","from","to","options","merge","random","expose","springCoeff","springLength","api","update","spring","body1","body2","dx","pos","x","dy","y","r","Math","sqrt","nextDouble","d","force","physics","Body3d","createGraph","eventify","console","warn","multigraph","uniqueLinkId","undefined","Map","nodes","links","multiEdges","suspendEvents","createLink","createUniqueLink","createSingleLink","changes","recordLinkChange","noop","recordNodeChange","enterModification","exitModification","graphPart","addNode","addLink","removeLink","removeNode","getNode","getNodeCount","getLinkCount","getLinksCount","getNodesCount","getLinks","forEachNode","forEachLinkedNode","forEachLink","beginUpdate","endUpdate","clear","hasLink","getLink","hasNode","monitorSubscribers","realOn","enterModificationReal","exitModificationReal","recordLinkChangeReal","recordNodeChangeReal","link","changeType","node","nodeId","data","Node","set","get","prevLinks","delete","fromId","toId","fromNode","toNode","addLinkToNode","linkId","makeLinkId","Link","isMultiEdge","suffix","size","idx","indexOfElementInArray","fromNodeId","toNodeId","id","oriented","forEachOrientedLink","forEachNonOrientedLink","quitFast","linkedNodeId","valuesIterator","values","nextValue","next","done","value","element","array","indexOf","len","toString","getChild","quad0","quad1","quad2","quad3","quad4","quad5","quad6","quad7","setChild","child","gravity","theta","InsertStack","isSamePosition","updateQueue","insertStack","nodesCache","currentInCache","newNode","body","mass","massX","massY","massZ","left","right","top","bottom","front","back","root","insert","newBody","reset","isEmpty","stackItem","pop","oldBody","retriesCount","offset","dz","z","quadIdx","oldLeft","oldTop","oldBack","sourceBody","v","queue","fx","fy","fz","queueLength","shiftIdx","pushIdx","differentBody","insertBodies","bodies","x1","Number","MAX_VALUE","y1","z1","x2","MIN_VALUE","y2","z2","max","maxSide","updateBodyForce","newOptions","_Group","_tweens","_tweensAddedDuringUpdate","getAll","keys","map","tweenId","bind","removeAll","add","tween","getId","remove","time","preserve","tweenIds","TWEEN","now","_isPlaying","Group","_nextId","nextId","process","hrtime","self","performance","Date","getTime","Tween","object","group","_isPaused","_pauseStart","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_repeatDelayTime","_yoyo","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onRepeatCallback","_onCompleteCallback","_onStopCallback","_group","_id","isPlaying","isPaused","properties","duration","start","property","parseFloat","concat","stop","stopChainedTweens","end","Infinity","pause","resume","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","onStart","onUpdate","onRepeat","onComplete","onStop","elapsed","charAt","isFinite","tmp","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","PI","sin","Exponential","pow","Circular","Elastic","Back","s","Bounce","m","f","floor","fn","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","t3","version","createLayout","graph","physicsSettings","createQuadTree","createBounds","createDragForce","createSpringForce","integrator","getIntegrator","createBody","get2dLayout","simulator","createSimulator","physicsSimulator","nodeMass","defaultNodeMass","nodeBodies","springs","bodiesCount","springTransform","settings","initPhysics","listenToEvents","wasStable","step","lastMove","ratio","isStableNow","onStableChanged","getNodePosition","getInitializedBody","setNodePosition","setPosition","slice","invalidateBBox","getLinkPosition","getGraphRect","getBBox","forEachBody","pinNode","isPinned","isNodePinned","dispose","onGraphChanged","getBody","getSpring","cb","forEach","bodyId","isStable","change","initBody","initLink","releaseNode","releaseLink","position","neighbors","getNeighborBodies","getBestNewBodyPosition","addBodyAt","updateBodyMass","isNodeOriginallyPinned","removeBody","addSpring","removeSpring","maxNeighbors","min","otherBody","isNaN","Body","Vector2d","prevPos","velocity","Vector3d","boundingBox","box","updateBoundingBox","getBestNewPosition","graphRect","baseX","baseY","baseZ","nextTick","args","shift","setTimeout","platform","arch","execPath","title","pid","browser","env","argv","binding","name","path","cwd","chdir","dir","resolve","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","getRoot","target","key","targetHasIt","optionsValueType","shouldReplace","collection","collectionStrong","init","trimLeft","trimRight","tinyCounter","mathRound","round","mathMin","mathMax","mathRandom","tinycolor","color","opts","rgb","inputToRGB","_originalInput","_r","_g","g","_b","_a","_roundA","_format","format","_gradientType","gradientType","_ok","ok","_tc_id","l","stringInputToObject","isValidCSSUnit","rgbToRgb","String","substr","h","convertToPercentage","hsvToRgb","hslToRgb","boundAlpha","bound01","rgbToHsl","hue2rgb","p","q","rgbToHsv","mod","rgbToHex","allow3Char","hex","pad2","join","rgbaToHex","allow4Char","convertDecimalToHex","rgbaToArgbHex","desaturate","hsl","toHsl","clamp01","saturate","greyscale","lighten","brighten","toRgb","darken","spin","hue","complement","triad","tetrad","splitcomplement","analogous","results","slices","part","ret","monochromatic","hsv","toHsv","modification","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","R","G","B","setAlpha","toHsvString","toHslString","toHex","toHexString","toHex8","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","needsAlphaFormat","clone","_applyModification","_applyCombination","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","rgba","readability","c1","c2","isReadable","wcag2","wcag2Parms","out","validateWCAG2Parms","level","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","names","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flip","o","flipped","isOnePointZero","processPercent","isPercentage","parseInt","abs","val","parseIntFromHex","c","convertHexToDecimal","matchers","CSS_INTEGER","CSS_NUMBER","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","hsla","hsva","hex3","hex6","hex4","hex8","exec","replace","toLowerCase","match","named","parms","toUpperCase","dragCoeff","stack","popIdx","InsertStackElement","item","DragControls","_objects","_camera","_domElement","isCamera","temp","_plane","_raycaster","_mouse","_offset","_intersection","_selected","_hovered","scope","activate","addEventListener","onDocumentMouseMove","onDocumentMouseDown","onDocumentMouseCancel","onDocumentTouchMove","onDocumentTouchStart","onDocumentTouchEnd","deactivate","removeEventListener","event","preventDefault","rect","getBoundingClientRect","clientX","width","clientY","height","setFromCamera","enabled","ray","intersectPlane","copy","sub","dispatchEvent","type","intersects","intersectObjects","setFromNormalAndCoplanarPoint","getWorldDirection","normal","style","cursor","changedTouches","setObjects","error","listener","notify","constructor","sx","sy","sz","initialize","_","_x","cover","tree","parent","xm","xp","j","_root","leaf","x0","_x0","_x1","addAll","xz","visit","x3","halves","radius","retainer","previous","defaultX","binarytree","Binarytree","NaN","leaf_copy","treeProto","source","extent","find","visitAfter","_y","ym","yp","y0","_y0","_y1","yz","y3","quads","d2","defaultY","quadtree","Quadtree","_z","zm","zp","deep","z0","_z0","_z1","zz","z3","octs","defaultZ","octree","Octree","index","nodeById","strengths","distances","nDim","count","bias","strength","defaultStrength","distance","constant","iterations","alpha","vx","jiggle","vy","vz","initializeStrength","initializeDistance","initNodes","numDimensions","dispatch","test","Dispatch","parseTypenames","typenames","types","trim","split","typename","T","that","taskHead","taskTail","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","setFrame","window","requestAnimationFrame","clearNow","Timer","_call","_time","_next","timer","restart","timerFlush","e","wake","nap","poke","t0","t1","sleep","clearTimeout","clearInterval","setInterval","TypeError","MAX_DIMENSIONS","initialRadius","initialAngleRoll","initialAngleYaw","simulation","alphaMin","alphaDecay","alphaTarget","velocityDecay","forces","stepper","tick","initializeNodes","cbrt","rollAngle","yawAngle","initializeForce","closest","distanceMin2","distanceMax2","theta2","accumulate","treeNode","numChildren","arg1","arg2","arg3","w","distanceMin","distanceMax","radiuses","_classCallCheck","instance","Constructor","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","err","Prop","_ref","_ref$default","defaultVal","_ref$triggerUpdate","triggerUpdate","_ref$onChange","onChange","newVal","state","_ref2","_ref2$stateInit","stateInit","_ref2$props","props","rawProps","_ref2$methods","methods","_ref2$aliases","aliases","_ref2$init","initFn","_ref2$update","updateFn","propName","assign","Function","initialised","changedProps","comp","nodeElement","initStatic","digest","prop","getSetProp","_ref3","_ref3$triggerUpdate","redigest","_ref3$onChange","_ref3$defaultVal","curVal","methodName","_methods$methodName","_len","_key","entries","_ref4","_ref5","alias","resetProps","_rerender","obj","valueof","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","arr2","iter","_toPrimitive","input","hint","prim","toPrimitive","res","_toPropertyKey","arg","list","keyAccessors","multiItem","flattenKeys","keyAccessor","isProp","indexedResult","reduce","iterObj","itemVal","_itemVal","propVal","rest","result","flatten","accKeys","vals","_defineProperty","defineProperty","enumerable","configurable","writable","ownKeys","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","diffArrays","prev","idAccessor","enter","prevById","nextById","byId","prevSet","Set","nextSet","has","dataBindDiff","existingObjs","_ref3$objBindAttr","objBindAttr","_ref3$dataBindAttr","dataBindAttr","_ref3$purge","purge","isObjValid","removeObjs","prevD","nextD","diff","viewDigest","appendObj","removeObj","_ref7","_ref7$createObj","createObj","_ref7$updateObj","updateObj","_ref7$exitObj","exitObj","_ref7$objBindAttr","_ref7$dataBindAttr","dataDiffOptions","_dataBindDiff","newObjs","createObjs","pointsData","updateObjs","initRange","domain","range","implicit","ordinal","unknown","scale","specifier","colors","_typeof","_inherits","subClass","superClass","_setPrototypeOf","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Parent","Class","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","_unsupportedIterableToArray","_arrayLikeToArray","minLen","materialDispose","material","deallocate","geometry","texture","children","emptyObject","childObj","threeDigest","scene","_ref$objFilter","objFilter","str","autoColorScale","autoColorObjects","objects","colorByAccessor","colorField","getDagDepths","depth","sourceId","getNodeId","targetId","sourceNode","targetNode","traverse","nodeStack","currentDepth","loop","three","THREE","Mesh","MeshLambertMaterial","Color","BufferGeometry","BufferAttribute","Matrix4","Vector3","SphereBufferGeometry","CylinderBufferGeometry","TubeBufferGeometry","ConeBufferGeometry","Line","LineBasicMaterial","QuadraticBezierCurve3","CubicBezierCurve3","Box3","ngraph","forcelayout","forcelayout3d","DAG_LEVEL_NODE_RATIO","setAttributeFn","setAttribute","applyMatrix4Fn","applyMatrix4","ForceGraph","jsonUrl","_this","fetchingJson","onLoading","fetch","then","json","onFinishLoading","graphData","info","engineRunning","numDim","chargeForce","d3ForceLayout","eraseDimension","dim","dagMode","forceEngine","dagLevelDistance","nodeRelSize","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","d3AlphaMin","d3AlphaDecay","d3AlphaTarget","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onFinishUpdate","onEngineTick","onEngineStop","refresh","_flushObjects","d3Force","forceName","forceFn","d3ReheatSimulation","resetCountdown","cntTicks","startTickTime","tickFrame","isD3Sim","layoutTick","updateArrows","updatePhotons","layout","__threeObj","linkWidthAccessor","linkCurvatureAccessor","linkCurveRotationAccessor","linkThreeObjectExtendAccessor","calcLinkCurve","curvature","curve","vStart","vEnd","distanceTo","curveRotation","vLine","subVectors","cp","multiplyScalar","cross","applyAxisAngle","normalize","addVectors","divideScalar","endAngle","startAngle","__curve","lineObj","__lineObj","extendedObj","curveResolution","line","setFromPoints","getPoints","linePos","getAttribute","Float32Array","needsUpdate","computeBoundingSphere","rotation","_linkWidth","ceil","_geometry","makeTranslation","makeRotationX","localToWorld","lookAt","arrowRelPosAccessor","arrowLengthAccessor","nodeValAccessor","arrowObj","__arrowObj","startR","endR","arrowLength","arrowRelPos","getPosAlongLine","getPoint","iplt","lineLen","getLength","acc","posAlongLine","arrowHead","arrowTail","headVec","particleSpeedAccessor","cyclePhotons","__photonsObj","singleHopPhotons","__singleHopPhotonsObj","particleSpeed","getPhotonPos","photons","photon","singleHop","__linkThreeObjType","__progressRatio","photonPosRatio","emitParticle","graphScene","particleWidthAccessor","photonR","numSegments","particleGeometry","linkColorAccessor","particleColorAccessor","photonColor","materialColor","opacity","particleMaterial","transparent","getGraphBbox","bboxes","getBboxes","computeBoundingBox","matrixWorld","bb","threeObj","hasAnyPropChanged","propList","some","customObjectAccessor","customObjectExtendAccessor","valAccessor","colorAccessor","visibilityAccessor","sphereGeometries","sphereMaterials","__graphObjType","customObj","extendObj","__graphDefaultObj","parameters","widthSegments","_customObjectAccessor","_customObjectExtendAccessor","customMaterialAccessor","_visibilityAccessor","_colorAccessor","widthAccessor","cylinderGeometries","lambertLineMaterials","basicLineMaterials","visibleLinks","defaultObj","useCylinder","lineGeometry","renderOrder","updObj","radiusTop","radialSegments","customMaterial","materialType","lineMaterials","depthWrite","arrowColorAccessor","coneGeometry","translate","rotateX","particlesAccessor","particleMaterials","particleGeometries","numPhotons","curPhoton","linkForce","nodeDepths","maxDepth","getFFn","fix","invert","fxFn","fyFn","fzFn","nodeDepth","_graph","fromKapsule","kapsule","baseClass","initKapsuleWithSelf","FromKapsule","_baseClass","_super","__kapsuleInstance","_this$__kapsuleInstan","returnVal","three$1","threeForcegraph","TrackballControls","domElement","document","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","screen","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","mouseButtons","LEFT","MIDDLE","RIGHT","EPS","lastPosition","lastZoom","_state","_keyState","_eye","_movePrev","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","position0","up0","up","zoom0","zoom","changeEvent","startEvent","endEvent","handleResize","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","getMouseOnCircle","keydown","keyCode","keyup","mousedown","stopPropagation","button","mousemove","mouseup","mousewheel","deltaMode","deltaY","touchstart","touches","touchmove","touchend","contextmenu","rotateCamera","angle","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","crossVectors","setLength","setFromAxisAngle","applyQuaternion","zoomCamera","factor","isPerspectiveCamera","isOrthographicCamera","updateProjectionMatrix","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","clientWidth","scale_y","checkDistances","distanceToSquared","FlyControls","movementSpeed","rollSpeed","dragToLook","autoForward","tmpQuaternion","mouseStatus","moveState","down","forward","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","moveVector","rotationVector","altKey","movementSpeedMultiplier","updateMovementVector","updateRotationVector","focus","container","getContainerDimensions","halfWidth","halfHeight","delta","moveMult","rotMult","translateX","translateY","translateZ","multiply","setFromQuaternion","order","offsetWidth","offsetHeight","offsetLeft","offsetTop","innerWidth","innerHeight","_mousedown","_mousemove","_mouseup","_keydown","_keyup","_extends","_inheritsLoose","_isNativeFunction","_construct","isNativeReflectConstruct","_wrapNativeSuper","_cache","isNativeFunction","Wrapper","_Error","PolishedError","code","colorToInt","convertToInt","saturation","lightness","convert","huePrime","chroma","secondComponent","lightnessModification","finalRed","finalGreen","finalBlue","namedColorMap","nameToHex","normalizedColorName","hexRegex","hexRgbaRegex","reducedHexRegex","reducedRgbaHexRegex","rgbRegex","rgbaRegex","hslRegex","hslaRegex","parseToRgb","normalizedColor","toFixed","_alpha","rgbMatched","rgbaMatched","hslMatched","rgbColorString","hslRgbMatched","hslaMatched","_hue","_saturation","_lightness","_rgbColorString","_hslRgbMatched","reduceHexValue","numberToHex","firstValue","secondValue","thirdValue","fourthValue","rgbValue","curried","combined","curry","guard","lowerBoundary","upperBoundary","opacify","parsedColor","colorWithAlpha","curriedOpacify","styleInject","css","ref","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","css_248z","WebGLRenderer","Scene","PerspectiveCamera","Raycaster","TextureLoader","Vector2","SphereGeometry","MeshBasicMaterial","BackSide","EventDispatcher","MOUSE","Quaternion","Spherical","Clock","threeRenderObjects","prevWidth","prevHeight","backgroundColor","backgroundImageUrl","onBackgroundImageLoaded","showNavInfo","skyRadius","enablePointerInteraction","hoverObj","toolTipElem","innerHTML","lineHoverPrecision","hoverOrderComparator","tooltipContent","hoverDuringDrag","onHover","onClick","onRightClick","controls","getDelta","postProcessingComposer","render","renderer","camera","topObject","controlsDragging","raycaster","params","threshold","mousePos","sort","cameraPosition","transitionDuration","finalPos","finalLookAt","camPos","camLookAt","getLookAt","setCameraPos","setLookAt","tbControls","domNode","_ref2$controlType","controlType","_ref2$rendererConfig","rendererConfig","_ref2$waitForLoadComp","waitForLoadComplete","navInfo","className","textContent","orbit","trackball","fly","display","classList","ev","getOffset","relPos","transform","el","scrollLeft","scrollTop","ignoreOneClick","antialias","setPixelRatio","devicePixelRatio","EffectComposer","addPass","RenderPass","OrbitControls","controlsEngaged","setSize","aspect","skysphere","visible","loadComplete","far","setClearColor","finishLoad","load","side","linkKapsule","kapsulePropName","kapsuleType","dummyK","linkProp","linkMethod","method","kapsuleInstance","AmbientLight","DirectionalLight","CAMERA_DISTANCE2NODES_FACTOR","bindFG","linkedFGProps","linkedFGMethods","bindRenderObjs","linkedRenderObjsProps","linkedRenderObjsMethods","_3dForceGraph","nodeLabel","linkLabel","linkHoverPrecision","renderObjs","enableNavigationControls","enable","enableNodeDrag","onNodeDrag","onNodeDragEnd","onNodeClick","onNodeRightClick","onNodeHover","onLinkClick","onLinkRightClick","onLinkHover","onBackgroundClick","onBackgroundRightClick","graph2ScreenCoords","vec","project","pauseAnimation","animationFrameRequestId","cancelAnimationFrame","resumeAnimation","_animationCycle","forceGraph","_destructor","roDomNode","infoElem","lastSetCameraZ","_dragControls","curNodeDrag","__initialFixedPos","__disposeControlsAfterDrag","dragControls","__data","__initialPos","newPos","__dragged","initFixedPos","initPos","getGraphObj","aObj","bObj","isNode","graphObj","prevObjType","prevObjData","objType","objData","point1","point2","integrate","timeStep","tx","ty","tz","debounce","func","wait","immediate","context","timestamp","later","last","debounced","callNow","flush","quadTree","bounds","springForce","dragForce","bboxNeedsUpdate","totalMovement","publicApi","accumulateForces","movement","addBody","springWeight","springCoefficient","getTotalMovement","inputSeed","seed","Generator","gaussian","log","maxValue","randomIterator","customRandom","localRandom","shuffle","uniform","normalizeArray","parts","allowAboveRoot","unshift","basename","matchedSlash","charCodeAt","xs","resolvedPath","resolvedAbsolute","isAbsolute","trailingSlash","paths","relative","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","ext","extname","startDot","startPart","preDotState","exposeProperties","needsFilter","augment"],"mappings":"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","file":"js/forcegraph~shaders.a12a2b70.js","sourcesContent":["module.exports = function eventify(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","module.exports = Spring;\n\n/**\n * Represents a physical spring. Spring connects two bodies, has rest length\n * stiffness coefficient and optional weight\n */\nfunction Spring(fromBody, toBody, length, coeff, weight) {\n    this.from = fromBody;\n    this.to = toBody;\n    this.length = length;\n    this.coeff = coeff;\n\n    this.weight = typeof weight === 'number' ? weight : 1;\n};\n","/**\n * Represents spring force, which updates forces acting on two bodies, conntected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n  var random = require('ngraph.random').random(42);\n  var expose = require('ngraph.expose');\n\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update : function (spring) {\n      var body1 = spring.from,\n          body2 = spring.to,\n          length = spring.length < 0 ? options.springLength : spring.length,\n          dx = body2.pos.x - body1.pos.x,\n          dy = body2.pos.y - body1.pos.y,\n          r = Math.sqrt(dx * dx + dy * dy);\n\n      if (r === 0) {\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n      }\n\n      var d = r - length;\n      var coeff = ((!spring.coeff || spring.coeff < 0) ? options.springCoeff : spring.coeff) * d / r * spring.weight;\n\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n    }\n  };\n\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n}\n","var physics = require('ngraph.physics.primitives');\n\nmodule.exports = function(pos) {\n  return new physics.Body3d(pos);\n}\n","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if ('uniqueLinkId' in options) {\n    console.warn(\n      'ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' +\n      'Use `multigraph` option instead\\n',\n      '\\n',\n      'Note: there is also change in default behavior: From now on each graph\\n'+\n      'is considered to be not a multigraph by default (each edge is unique).'\n    );\n\n    options.multigraph = options.uniqueLinkId;\n  }\n\n  // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  if (typeof Map !== 'function') {\n    // TODO: Should we polyfill it ourselves? We don't use much operations there..\n    throw new Error('ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph');\n  } \n\n  var nodes = new Map();\n  var links = [],\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n    multiEdges = {},\n    suspendEvents = 0,\n\n    createLink = options.multigraph ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodeCount: getNodeCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinkCount: getLinkCount,\n\n    /**\n     * Synonym for `getLinkCount()`\n     */\n    getLinksCount: getLinkCount,\n    \n    /**\n     * Synonym for `getNodeCount()`\n     */\n    getNodesCount: getNodeCount,\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonim for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId, data);\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes.set(nodeId, node);\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes.get(nodeId);\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    var prevLinks = node.links;\n    if (prevLinks) {\n      node.links = null;\n      for(var i = 0; i < prevLinks.length; ++i) {\n        removeLink(prevLinks[i]);\n      }\n    }\n\n    nodes.delete(nodeId)\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n\n    links.push(link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getNodeCount() {\n    return nodes.size;\n  }\n\n  function getLinkCount() {\n    return links.length;\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n    var idx = indexOfElementInArray(link, links);\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n\n    links.splice(idx, 1);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n      i;\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n\n      quitFast = callback(nodes.get(linkedNodeId), link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes.get(link.toId), link)\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function forEachNode(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Function is expected to iterate over graph nodes. You passed ' + callback);\n    }\n\n    var valuesIterator = nodes.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      if (callback(nextValue.value)) {\n        return true; // client doesn't want to proceed. Return.\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n}\n\n// need this for old browsers. Should this be a separate module?\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n    i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + ' ' + toId.toString();\n}\n","/**\n * This is Barnes Hut simulation algorithm for 3d case. Implementation\n * is highly optimized (avoids recusion and gc pressure)\n *\n * http://www.cs.princeton.edu/courses/archive/fall03/cs126/assignments/barnes-hut.html\n *\n * NOTE: This module duplicates a lot of code from 2d case. Primary reason for\n * this is performance. Every time I tried to abstract away vector operations\n * I had negative impact on performance. So in this case I'm scarifying code\n * reuse in favor of speed\n */\n\nmodule.exports = function(options) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  // we require deterministic randomness here\n  var random = require('ngraph.random').random(1984),\n    Node = require('./node'),\n    InsertStack = require('./insertStack'),\n    isSamePosition = require('./isSamePosition');\n\n  var gravity = options.gravity,\n    updateQueue = [],\n    insertStack = new InsertStack(),\n    theta = options.theta,\n\n    nodesCache = [],\n    currentInCache = 0,\n    newNode = function() {\n      // To avoid pressure on GC we reuse nodes.\n      var node = nodesCache[currentInCache];\n      if (node) {\n        node.quad0 = null;\n        node.quad4 = null;\n        node.quad1 = null;\n        node.quad5 = null;\n        node.quad2 = null;\n        node.quad6 = null;\n        node.quad3 = null;\n        node.quad7 = null;\n        node.body = null;\n        node.mass = node.massX = node.massY = node.massZ = 0;\n        node.left = node.right = node.top = node.bottom = node.front = node.back = 0;\n      } else {\n        node = new Node();\n        nodesCache[currentInCache] = node;\n      }\n\n      ++currentInCache;\n      return node;\n    },\n\n    root = newNode(),\n\n    // Inserts body to the tree\n    insert = function(newBody) {\n      insertStack.reset();\n      insertStack.push(root, newBody);\n\n      while (!insertStack.isEmpty()) {\n        var stackItem = insertStack.pop(),\n          node = stackItem.node,\n          body = stackItem.body;\n\n        if (!node.body) {\n          // This is internal node. Update the total mass of the node and center-of-mass.\n          var x = body.pos.x;\n          var y = body.pos.y;\n          var z = body.pos.z;\n          node.mass += body.mass;\n          node.massX += body.mass * x;\n          node.massY += body.mass * y;\n          node.massZ += body.mass * z;\n\n          // Recursively insert the body in the appropriate quadrant.\n          // But first find the appropriate quadrant.\n          var quadIdx = 0, // Assume we are in the 0's quad.\n            left = node.left,\n            right = (node.right + left) / 2,\n            top = node.top,\n            bottom = (node.bottom + top) / 2,\n            back = node.back,\n            front = (node.front + back) / 2;\n\n          if (x > right) { // somewhere in the eastern part.\n            quadIdx += 1;\n            var oldLeft = left;\n            left = right;\n            right = right + (right - oldLeft);\n          }\n          if (y > bottom) { // and in south.\n            quadIdx += 2;\n            var oldTop = top;\n            top = bottom;\n            bottom = bottom + (bottom - oldTop);\n          }\n          if (z > front) { // and in frontal part\n            quadIdx += 4;\n            var oldBack = back;\n            back = front;\n            front = back + (back - oldBack);\n          }\n\n          var child = getChild(node, quadIdx);\n          if (!child) {\n            // The node is internal but this quadrant is not taken. Add subnode to it.\n            child = newNode();\n            child.left = left;\n            child.top = top;\n            child.right = right;\n            child.bottom = bottom;\n            child.back = back;\n            child.front = front;\n            child.body = body;\n\n            setChild(node, quadIdx, child);\n          } else {\n            // continue searching in this quadrant.\n            insertStack.push(child, body);\n          }\n        } else {\n          // We are trying to add to the leaf node.\n          // We have to convert current leaf into internal node\n          // and continue adding two nodes.\n          var oldBody = node.body;\n          node.body = null; // internal nodes do not carry bodies\n\n          if (isSamePosition(oldBody.pos, body.pos)) {\n            // Prevent infinite subdivision by bumping one node\n            // anywhere in this quadrant\n            var retriesCount = 3;\n            do {\n              var offset = random.nextDouble();\n              var dx = (node.right - node.left) * offset;\n              var dy = (node.bottom - node.top) * offset;\n              var dz = (node.front - node.back) * offset;\n\n              oldBody.pos.x = node.left + dx;\n              oldBody.pos.y = node.top + dy;\n              oldBody.pos.z = node.back + dz;\n              retriesCount -= 1;\n              // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n            } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n            if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n              // This is very bad, we ran out of precision.\n              // if we do not return from the method we'll get into\n              // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n              // Next layout iteration should get larger bounding box in the first step and fix this\n              return;\n            }\n          }\n          // Next iteration should subdivide node further.\n          insertStack.push(node, oldBody);\n          insertStack.push(node, body);\n        }\n      }\n    },\n\n    update = function(sourceBody) {\n      var queue = updateQueue,\n        v,\n        dx, dy, dz,\n        r, fx = 0,\n        fy = 0,\n        fz = 0,\n        queueLength = 1,\n        shiftIdx = 0,\n        pushIdx = 1;\n\n      queue[0] = root;\n\n      while (queueLength) {\n        var node = queue[shiftIdx],\n          body = node.body;\n\n        queueLength -= 1;\n        shiftIdx += 1;\n        var differentBody = (body !== sourceBody);\n        if (body && differentBody) {\n          // If the current node is a leaf node (and it is not source body),\n          // calculate the force exerted by the current node on body, and add this\n          // amount to body's net force.\n          dx = body.pos.x - sourceBody.pos.x;\n          dy = body.pos.y - sourceBody.pos.y;\n          dz = body.pos.z - sourceBody.pos.z;\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n          if (r === 0) {\n            // Poor man's protection against zero distance.\n            dx = (random.nextDouble() - 0.5) / 50;\n            dy = (random.nextDouble() - 0.5) / 50;\n            dz = (random.nextDouble() - 0.5) / 50;\n            r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n          }\n\n          // This is standard gravitation force calculation but we divide\n          // by r^3 to save two operations when normalizing force vector.\n          v = gravity * body.mass * sourceBody.mass / (r * r * r);\n          fx += v * dx;\n          fy += v * dy;\n          fz += v * dz;\n        } else if (differentBody) {\n          // Otherwise, calculate the ratio s / r,  where s is the width of the region\n          // represented by the internal node, and r is the distance between the body\n          // and the node's center-of-mass\n          dx = node.massX / node.mass - sourceBody.pos.x;\n          dy = node.massY / node.mass - sourceBody.pos.y;\n          dz = node.massZ / node.mass - sourceBody.pos.z;\n\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n          if (r === 0) {\n            // Sorry about code duplication. I don't want to create many functions\n            // right away. Just want to see performance first.\n            dx = (random.nextDouble() - 0.5) / 50;\n            dy = (random.nextDouble() - 0.5) / 50;\n            dz = (random.nextDouble() - 0.5) / 50;\n            r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n          }\n\n          // If s / r < , treat this internal node as a single body, and calculate the\n          // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n          if ((node.right - node.left) / r < theta) {\n            // in the if statement above we consider node's width only\n            // because the region was squarified during tree creation.\n            // Thus there is no difference between using width or height.\n            v = gravity * node.mass * sourceBody.mass / (r * r * r);\n            fx += v * dx;\n            fy += v * dy;\n            fz += v * dz;\n          } else {\n            // Otherwise, run the procedure recursively on each of the current node's children.\n\n            // I intentionally unfolded this loop, to save several CPU cycles.\n            if (node.quad0) {\n              queue[pushIdx] = node.quad0;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad1) {\n              queue[pushIdx] = node.quad1;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad2) {\n              queue[pushIdx] = node.quad2;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad3) {\n              queue[pushIdx] = node.quad3;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad4) {\n              queue[pushIdx] = node.quad4;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad5) {\n              queue[pushIdx] = node.quad5;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad6) {\n              queue[pushIdx] = node.quad6;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n            if (node.quad7) {\n              queue[pushIdx] = node.quad7;\n              queueLength += 1;\n              pushIdx += 1;\n            }\n          }\n        }\n      }\n\n      sourceBody.force.x += fx;\n      sourceBody.force.y += fy;\n      sourceBody.force.z += fz;\n    },\n\n    insertBodies = function(bodies) {\n      var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        z1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE,\n        z2 = Number.MIN_VALUE,\n        i,\n        max = bodies.length;\n\n      // To reduce quad tree depth we are looking for exact bounding box of all particles.\n      i = max;\n      while (i--) {\n        var pos = bodies[i].pos;\n        var x = pos.x;\n        var y = pos.y;\n        var z = pos.z;\n        if (x < x1) {\n          x1 = x;\n        }\n        if (x > x2) {\n          x2 = x;\n        }\n        if (y < y1) {\n          y1 = y;\n        }\n        if (y > y2) {\n          y2 = y;\n        }\n        if (z < z1) {\n          z1 = z;\n        }\n        if (z > z2) {\n          z2 = z;\n        }\n      }\n\n      // Squarify the bounds.\n      var maxSide = Math.max(x2 - x1, Math.max(y2 - y1, z2 - z1));\n\n      x2 = x1 + maxSide;\n      y2 = y1 + maxSide;\n      z2 = z1 + maxSide;\n\n      currentInCache = 0;\n      root = newNode();\n      root.left = x1;\n      root.right = x2;\n      root.top = y1;\n      root.bottom = y2;\n      root.back = z1;\n      root.front = z2;\n\n      i = max - 1;\n      if (i > 0) {\n        root.body = bodies[i];\n      }\n      while (i--) {\n        insert(bodies[i], root);\n      }\n    };\n\n  return {\n    insertBodies: insertBodies,\n    updateBodyForce: update,\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.quad0;\n  if (idx === 1) return node.quad1;\n  if (idx === 2) return node.quad2;\n  if (idx === 3) return node.quad3;\n  if (idx === 4) return node.quad4;\n  if (idx === 5) return node.quad5;\n  if (idx === 6) return node.quad6;\n  if (idx === 7) return node.quad7;\n  return null;\n}\n\nfunction setChild(node, idx, child) {\n  if (idx === 0) node.quad0 = child;\n  else if (idx === 1) node.quad1 = child;\n  else if (idx === 2) node.quad2 = child;\n  else if (idx === 3) node.quad3 = child;\n  else if (idx === 4) node.quad4 = child;\n  else if (idx === 5) node.quad5 = child;\n  else if (idx === 6) node.quad6 = child;\n  else if (idx === 7) node.quad7 = child;\n}\n","var version = '18.5.0';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\n\nvar _Group = function () {\n\tthis._tweens = {};\n\tthis._tweensAddedDuringUpdate = {};\n};\n\n_Group.prototype = {\n\tgetAll: function () {\n\n\t\treturn Object.keys(this._tweens).map(function (tweenId) {\n\t\t\treturn this._tweens[tweenId];\n\t\t}.bind(this));\n\n\t},\n\n\tremoveAll: function () {\n\n\t\tthis._tweens = {};\n\n\t},\n\n\tadd: function (tween) {\n\n\t\tthis._tweens[tween.getId()] = tween;\n\t\tthis._tweensAddedDuringUpdate[tween.getId()] = tween;\n\n\t},\n\n\tremove: function (tween) {\n\n\t\tdelete this._tweens[tween.getId()];\n\t\tdelete this._tweensAddedDuringUpdate[tween.getId()];\n\n\t},\n\n\tupdate: function (time, preserve) {\n\n\t\tvar tweenIds = Object.keys(this._tweens);\n\n\t\tif (tweenIds.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t// Tweens are updated in \"batches\". If you add a new tween during an\n\t\t// update, then the new tween will be updated in the next batch.\n\t\t// If you remove a tween during an update, it may or may not be updated.\n\t\t// However, if the removed tween was added during the current batch,\n\t\t// then it will not be updated.\n\t\twhile (tweenIds.length > 0) {\n\t\t\tthis._tweensAddedDuringUpdate = {};\n\n\t\t\tfor (var i = 0; i < tweenIds.length; i++) {\n\n\t\t\t\tvar tween = this._tweens[tweenIds[i]];\n\n\t\t\t\tif (tween && tween.update(time) === false) {\n\t\t\t\t\ttween._isPlaying = false;\n\n\t\t\t\t\tif (!preserve) {\n\t\t\t\t\t\tdelete this._tweens[tweenIds[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttweenIds = Object.keys(this._tweensAddedDuringUpdate);\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\nvar TWEEN = new _Group();\n\nTWEEN.Group = _Group;\nTWEEN._nextId = 0;\nTWEEN.nextId = function () {\n\treturn TWEEN._nextId++;\n};\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (self) === 'undefined' && typeof (process) !== 'undefined' && process.hrtime) {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof (self) !== 'undefined' &&\n         self.performance !== undefined &&\n\t\t self.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object, group) {\n\tthis._isPaused = false;\n\tthis._pauseStart = null;\n\tthis._object = object;\n\tthis._valuesStart = {};\n\tthis._valuesEnd = {};\n\tthis._valuesStartRepeat = {};\n\tthis._duration = 1000;\n\tthis._repeat = 0;\n\tthis._repeatDelayTime = undefined;\n\tthis._yoyo = false;\n\tthis._isPlaying = false;\n\tthis._reversed = false;\n\tthis._delayTime = 0;\n\tthis._startTime = null;\n\tthis._easingFunction = TWEEN.Easing.Linear.None;\n\tthis._interpolationFunction = TWEEN.Interpolation.Linear;\n\tthis._chainedTweens = [];\n\tthis._onStartCallback = null;\n\tthis._onStartCallbackFired = false;\n\tthis._onUpdateCallback = null;\n\tthis._onRepeatCallback = null;\n\tthis._onCompleteCallback = null;\n\tthis._onStopCallback = null;\n\tthis._group = group || TWEEN;\n\tthis._id = TWEEN.nextId();\n\n};\n\nTWEEN.Tween.prototype = {\n\tgetId: function () {\n\t\treturn this._id;\n\t},\n\n\tisPlaying: function () {\n\t\treturn this._isPlaying;\n\t},\n\n\tisPaused: function () {\n\t\treturn this._isPaused;\n\t},\n\n\tto: function (properties, duration) {\n\n\t\tthis._valuesEnd = Object.create(properties);\n\n\t\tif (duration !== undefined) {\n\t\t\tthis._duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tduration: function duration(d) {\n\t\tthis._duration = d;\n\t\treturn this;\n\t},\n\n\tstart: function (time) {\n\n\t\tthis._group.add(this);\n\n\t\tthis._isPlaying = true;\n\n\t\tthis._isPaused = false;\n\n\t\tthis._onStartCallbackFired = false;\n\n\t\tthis._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();\n\t\tthis._startTime += this._delayTime;\n\n\t\tfor (var property in this._valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (this._valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (this._valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\tthis._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (this._object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value, but only once.\n\t\t\tif (typeof(this._valuesStart[property]) === 'undefined') {\n\t\t\t\tthis._valuesStart[property] = this._object[property];\n\t\t\t}\n\n\t\t\tif ((this._valuesStart[property] instanceof Array) === false) {\n\t\t\t\tthis._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\tthis._valuesStartRepeat[property] = this._valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif (!this._isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._group.remove(this);\n\n\t\tthis._isPlaying = false;\n\n\t\tthis._isPaused = false;\n\n\t\tif (this._onStopCallback !== null) {\n\t\t\tthis._onStopCallback(this._object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t},\n\n\tend: function () {\n\n\t\tthis.update(Infinity);\n\t\treturn this;\n\n\t},\n\n\tpause: function(time) {\n\n\t\tif (this._isPaused || !this._isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._isPaused = true;\n\n\t\tthis._pauseStart = time === undefined ? TWEEN.now() : time;\n\n\t\tthis._group.remove(this);\n\n\t\treturn this;\n\n\t},\n\n\tresume: function(time) {\n\n\t\tif (!this._isPaused || !this._isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._isPaused = false;\n\n\t\tthis._startTime += (time === undefined ? TWEEN.now() : time)\n\t\t\t- this._pauseStart;\n\n\t\tthis._pauseStart = 0;\n\n\t\tthis._group.add(this);\n\n\t\treturn this;\n\n\t},\n\n\tstopChainedTweens: function () {\n\n\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\tthis._chainedTweens[i].stop();\n\t\t}\n\n\t},\n\n\tgroup: function (group) {\n\t\tthis._group = group;\n\t\treturn this;\n\t},\n\n\tdelay: function (amount) {\n\n\t\tthis._delayTime = amount;\n\t\treturn this;\n\n\t},\n\n\trepeat: function (times) {\n\n\t\tthis._repeat = times;\n\t\treturn this;\n\n\t},\n\n\trepeatDelay: function (amount) {\n\n\t\tthis._repeatDelayTime = amount;\n\t\treturn this;\n\n\t},\n\n\tyoyo: function (yoyo) {\n\n\t\tthis._yoyo = yoyo;\n\t\treturn this;\n\n\t},\n\n\teasing: function (easingFunction) {\n\n\t\tthis._easingFunction = easingFunction;\n\t\treturn this;\n\n\t},\n\n\tinterpolation: function (interpolationFunction) {\n\n\t\tthis._interpolationFunction = interpolationFunction;\n\t\treturn this;\n\n\t},\n\n\tchain: function () {\n\n\t\tthis._chainedTweens = arguments;\n\t\treturn this;\n\n\t},\n\n\tonStart: function (callback) {\n\n\t\tthis._onStartCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonUpdate: function (callback) {\n\n\t\tthis._onUpdateCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonRepeat: function onRepeat(callback) {\n\n\t\tthis._onRepeatCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonComplete: function (callback) {\n\n\t\tthis._onCompleteCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonStop: function (callback) {\n\n\t\tthis._onStopCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tupdate: function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < this._startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._onStartCallbackFired === false) {\n\n\t\t\tif (this._onStartCallback !== null) {\n\t\t\t\tthis._onStartCallback(this._object);\n\t\t\t}\n\n\t\t\tthis._onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - this._startTime) / this._duration;\n\t\telapsed = (this._duration === 0 || elapsed > 1) ? 1 : elapsed;\n\n\t\tvalue = this._easingFunction(elapsed);\n\n\t\tfor (property in this._valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (this._valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = this._valuesStart[property] || 0;\n\t\t\tvar end = this._valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\tthis._object[property] = this._interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\tthis._object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (this._onUpdateCallback !== null) {\n\t\t\tthis._onUpdateCallback(this._object, elapsed);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (this._repeat > 0) {\n\n\t\t\t\tif (isFinite(this._repeat)) {\n\t\t\t\t\tthis._repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in this._valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (this._valuesEnd[property]) === 'string') {\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._yoyo) {\n\t\t\t\t\t\tvar tmp = this._valuesStartRepeat[property];\n\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesEnd[property];\n\t\t\t\t\t\tthis._valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._valuesStart[property] = this._valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (this._yoyo) {\n\t\t\t\t\tthis._reversed = !this._reversed;\n\t\t\t\t}\n\n\t\t\t\tif (this._repeatDelayTime !== undefined) {\n\t\t\t\t\tthis._startTime = time + this._repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\tthis._startTime = time + this._delayTime;\n\t\t\t\t}\n\n\t\t\t\tif (this._onRepeatCallback !== null) {\n\t\t\t\t\tthis._onRepeatCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (this._onCompleteCallback !== null) {\n\n\t\t\t\t\tthis._onCompleteCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\tthis._chainedTweens[i].start(this._startTime + this._duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\nTWEEN.version = version;\n\nexport default TWEEN;\n","/**\n * This module provides all required forces to regular ngraph.physics.simulator\n * to make it 3D simulator. Ideally ngraph.physics.simulator should operate\n * with vectors, but on practices that showed performance decrease... Maybe\n * I was doing it wrong, will see if I can refactor/throw away this module.\n */\nmodule.exports = createLayout;\ncreateLayout.get2dLayout = require('ngraph.forcelayout');\n\nfunction createLayout(graph, physicsSettings) {\n  var merge = require('ngraph.merge');\n  physicsSettings = merge(physicsSettings, {\n        createQuadTree: require('ngraph.quadtreebh3d'),\n        createBounds: require('./lib/bounds'),\n        createDragForce: require('./lib/dragForce'),\n        createSpringForce: require('./lib/springForce'),\n        integrator: getIntegrator(physicsSettings),\n        createBody: require('./lib/createBody')\n      });\n\n  return createLayout.get2dLayout(graph, physicsSettings);\n}\n\nfunction getIntegrator(physicsSettings) {\n  if (physicsSettings && physicsSettings.integrator === 'verlet') {\n    return require('./lib/verletIntegrator.js');\n  }\n\n  return require('./lib/eulerIntegrator')\n}\n","module.exports = createLayout;\nmodule.exports.simulator = require('ngraph.physics.simulator');\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates force based layout for a given graph.\n *\n * @param {ngraph.graph} graph which needs to be laid out\n * @param {object} physicsSettings if you need custom settings\n * for physics simulator you can pass your own settings here. If it's not passed\n * a default one will be created.\n */\nfunction createLayout(graph, physicsSettings) {\n  if (!graph) {\n    throw new Error('Graph structure cannot be undefined');\n  }\n\n  var createSimulator = require('ngraph.physics.simulator');\n  var physicsSimulator = createSimulator(physicsSettings);\n\n  var nodeMass = defaultNodeMass\n  if (physicsSettings && typeof physicsSettings.nodeMass === 'function') {\n    nodeMass = physicsSettings.nodeMass\n  }\n\n  var nodeBodies = Object.create(null);\n  var springs = {};\n  var bodiesCount = 0;\n\n  var springTransform = physicsSimulator.settings.springTransform || noop;\n\n  // Initialize physics with what we have in the graph:\n  initPhysics();\n  listenToEvents();\n\n  var wasStable = false;\n\n  var api = {\n    /**\n     * Performs one step of iterative layout algorithm\n     *\n     * @returns {boolean} true if the system should be considered stable; False otherwise.\n     * The system is stable if no further call to `step()` can improve the layout.\n     */\n    step: function() {\n      if (bodiesCount === 0) return true; // TODO: This will never fire 'stable'\n\n      var lastMove = physicsSimulator.step();\n\n      // Save the movement in case if someone wants to query it in the step\n      // callback.\n      api.lastMove = lastMove;\n\n      // Allow listeners to perform low-level actions after nodes are updated.\n      api.fire('step');\n\n      var ratio = lastMove/bodiesCount;\n      var isStableNow = ratio <= 0.01; // TODO: The number is somewhat arbitrary...\n\n      if (wasStable !== isStableNow) {\n        wasStable = isStableNow;\n        onStableChanged(isStableNow);\n      }\n\n      return isStableNow;\n    },\n\n    /**\n     * For a given `nodeId` returns position\n     */\n    getNodePosition: function (nodeId) {\n      return getInitializedBody(nodeId).pos;\n    },\n\n    /**\n     * Sets position of a node to a given coordinates\n     * @param {string} nodeId node identifier\n     * @param {number} x position of a node\n     * @param {number} y position of a node\n     * @param {number=} z position of node (only if applicable to body)\n     */\n    setNodePosition: function (nodeId) {\n      var body = getInitializedBody(nodeId);\n      body.setPosition.apply(body, Array.prototype.slice.call(arguments, 1));\n      physicsSimulator.invalidateBBox();\n    },\n\n    /**\n     * @returns {Object} Link position by link id\n     * @returns {Object.from} {x, y} coordinates of link start\n     * @returns {Object.to} {x, y} coordinates of link end\n     */\n    getLinkPosition: function (linkId) {\n      var spring = springs[linkId];\n      if (spring) {\n        return {\n          from: spring.from.pos,\n          to: spring.to.pos\n        };\n      }\n    },\n\n    /**\n     * @returns {Object} area required to fit in the graph. Object contains\n     * `x1`, `y1` - top left coordinates\n     * `x2`, `y2` - bottom right coordinates\n     */\n    getGraphRect: function () {\n      return physicsSimulator.getBBox();\n    },\n\n    /**\n     * Iterates over each body in the layout simulator and performs a callback(body, nodeId)\n     */\n    forEachBody: forEachBody,\n\n    /*\n     * Requests layout algorithm to pin/unpin node to its current position\n     * Pinned nodes should not be affected by layout algorithm and always\n     * remain at their position\n     */\n    pinNode: function (node, isPinned) {\n      var body = getInitializedBody(node.id);\n       body.isPinned = !!isPinned;\n    },\n\n    /**\n     * Checks whether given graph's node is currently pinned\n     */\n    isNodePinned: function (node) {\n      return getInitializedBody(node.id).isPinned;\n    },\n\n    /**\n     * Request to release all resources\n     */\n    dispose: function() {\n      graph.off('changed', onGraphChanged);\n      api.fire('disposed');\n    },\n\n    /**\n     * Gets physical body for a given node id. If node is not found undefined\n     * value is returned.\n     */\n    getBody: getBody,\n\n    /**\n     * Gets spring for a given edge.\n     *\n     * @param {string} linkId link identifer. If two arguments are passed then\n     * this argument is treated as formNodeId\n     * @param {string=} toId when defined this parameter denotes head of the link\n     * and first argument is treated as tail of the link (fromId)\n     */\n    getSpring: getSpring,\n\n    /**\n     * [Read only] Gets current physics simulator\n     */\n    simulator: physicsSimulator,\n\n    /**\n     * Gets the graph that was used for layout\n     */\n    graph: graph,\n\n    /**\n     * Gets amount of movement performed during last step operation\n     */\n    lastMove: 0\n  };\n\n  eventify(api);\n\n  return api;\n\n  function forEachBody(cb) {\n    Object.keys(nodeBodies).forEach(function(bodyId) {\n      cb(nodeBodies[bodyId], bodyId);\n    });\n  }\n\n  function getSpring(fromId, toId) {\n    var linkId;\n    if (toId === undefined) {\n      if (typeof fromId !== 'object') {\n        // assume fromId as a linkId:\n        linkId = fromId;\n      } else {\n        // assume fromId to be a link object:\n        linkId = fromId.id;\n      }\n    } else {\n      // toId is defined, should grab link:\n      var link = graph.hasLink(fromId, toId);\n      if (!link) return;\n      linkId = link.id;\n    }\n\n    return springs[linkId];\n  }\n\n  function getBody(nodeId) {\n    return nodeBodies[nodeId];\n  }\n\n  function listenToEvents() {\n    graph.on('changed', onGraphChanged);\n  }\n\n  function onStableChanged(isStable) {\n    api.fire('stable', isStable);\n  }\n\n  function onGraphChanged(changes) {\n    for (var i = 0; i < changes.length; ++i) {\n      var change = changes[i];\n      if (change.changeType === 'add') {\n        if (change.node) {\n          initBody(change.node.id);\n        }\n        if (change.link) {\n          initLink(change.link);\n        }\n      } else if (change.changeType === 'remove') {\n        if (change.node) {\n          releaseNode(change.node);\n        }\n        if (change.link) {\n          releaseLink(change.link);\n        }\n      }\n    }\n    bodiesCount = graph.getNodesCount();\n  }\n\n  function initPhysics() {\n    bodiesCount = 0;\n\n    graph.forEachNode(function (node) {\n      initBody(node.id);\n      bodiesCount += 1;\n    });\n\n    graph.forEachLink(initLink);\n  }\n\n  function initBody(nodeId) {\n    var body = nodeBodies[nodeId];\n    if (!body) {\n      var node = graph.getNode(nodeId);\n      if (!node) {\n        throw new Error('initBody() was called with unknown node id');\n      }\n\n      var pos = node.position;\n      if (!pos) {\n        var neighbors = getNeighborBodies(node);\n        pos = physicsSimulator.getBestNewBodyPosition(neighbors);\n      }\n\n      body = physicsSimulator.addBodyAt(pos);\n      body.id = nodeId;\n\n      nodeBodies[nodeId] = body;\n      updateBodyMass(nodeId);\n\n      if (isNodeOriginallyPinned(node)) {\n        body.isPinned = true;\n      }\n    }\n  }\n\n  function releaseNode(node) {\n    var nodeId = node.id;\n    var body = nodeBodies[nodeId];\n    if (body) {\n      nodeBodies[nodeId] = null;\n      delete nodeBodies[nodeId];\n\n      physicsSimulator.removeBody(body);\n    }\n  }\n\n  function initLink(link) {\n    updateBodyMass(link.fromId);\n    updateBodyMass(link.toId);\n\n    var fromBody = nodeBodies[link.fromId],\n        toBody  = nodeBodies[link.toId],\n        spring = physicsSimulator.addSpring(fromBody, toBody, link.length);\n\n    springTransform(link, spring);\n\n    springs[link.id] = spring;\n  }\n\n  function releaseLink(link) {\n    var spring = springs[link.id];\n    if (spring) {\n      var from = graph.getNode(link.fromId),\n          to = graph.getNode(link.toId);\n\n      if (from) updateBodyMass(from.id);\n      if (to) updateBodyMass(to.id);\n\n      delete springs[link.id];\n\n      physicsSimulator.removeSpring(spring);\n    }\n  }\n\n  function getNeighborBodies(node) {\n    // TODO: Could probably be done better on memory\n    var neighbors = [];\n    if (!node.links) {\n      return neighbors;\n    }\n    var maxNeighbors = Math.min(node.links.length, 2);\n    for (var i = 0; i < maxNeighbors; ++i) {\n      var link = node.links[i];\n      var otherBody = link.fromId !== node.id ? nodeBodies[link.fromId] : nodeBodies[link.toId];\n      if (otherBody && otherBody.pos) {\n        neighbors.push(otherBody);\n      }\n    }\n\n    return neighbors;\n  }\n\n  function updateBodyMass(nodeId) {\n    var body = nodeBodies[nodeId];\n    body.mass = nodeMass(nodeId);\n    if (Number.isNaN(body.mass)) {\n      throw new Error('Node mass should be a number')\n    }\n  }\n\n  /**\n   * Checks whether graph node has in its settings pinned attribute,\n   * which means layout algorithm cannot move it. Node can be marked\n   * as pinned, if it has \"isPinned\" attribute, or when node.data has it.\n   *\n   * @param {Object} node a graph node to check\n   * @return {Boolean} true if node should be treated as pinned; false otherwise.\n   */\n  function isNodeOriginallyPinned(node) {\n    return (node && (node.isPinned || (node.data && node.data.isPinned)));\n  }\n\n  function getInitializedBody(nodeId) {\n    var body = nodeBodies[nodeId];\n    if (!body) {\n      initBody(nodeId);\n      body = nodeBodies[nodeId];\n    }\n    return body;\n  }\n\n  /**\n   * Calculates mass of a body, which corresponds to node with given id.\n   *\n   * @param {String|Number} nodeId identifier of a node, for which body mass needs to be calculated\n   * @returns {Number} recommended mass of the body;\n   */\n  function defaultNodeMass(nodeId) {\n    var links = graph.getLinks(nodeId);\n    if (!links) return 1;\n    return 1 + links.length / 3.0;\n  }\n}\n\nfunction noop() { }\n","module.exports = {\n  Body: Body,\n  Vector2d: Vector2d,\n  Body3d: Body3d,\n  Vector3d: Vector3d\n};\n\nfunction Body(x, y) {\n  this.pos = new Vector2d(x, y);\n  this.prevPos = new Vector2d(x, y);\n  this.force = new Vector2d();\n  this.velocity = new Vector2d();\n  this.mass = 1;\n}\n\nBody.prototype.setPosition = function (x, y) {\n  this.prevPos.x = this.pos.x = x;\n  this.prevPos.y = this.pos.y = y;\n};\n\nfunction Vector2d(x, y) {\n  if (x && typeof x !== 'number') {\n    // could be another vector\n    this.x = typeof x.x === 'number' ? x.x : 0;\n    this.y = typeof x.y === 'number' ? x.y : 0;\n  } else {\n    this.x = typeof x === 'number' ? x : 0;\n    this.y = typeof y === 'number' ? y : 0;\n  }\n}\n\nVector2d.prototype.reset = function () {\n  this.x = this.y = 0;\n};\n\nfunction Body3d(x, y, z) {\n  this.pos = new Vector3d(x, y, z);\n  this.prevPos = new Vector3d(x, y, z);\n  this.force = new Vector3d();\n  this.velocity = new Vector3d();\n  this.mass = 1;\n}\n\nBody3d.prototype.setPosition = function (x, y, z) {\n  this.prevPos.x = this.pos.x = x;\n  this.prevPos.y = this.pos.y = y;\n  this.prevPos.z = this.pos.z = z;\n};\n\nfunction Vector3d(x, y, z) {\n  if (x && typeof x !== 'number') {\n    // could be another vector\n    this.x = typeof x.x === 'number' ? x.x : 0;\n    this.y = typeof x.y === 'number' ? x.y : 0;\n    this.z = typeof x.z === 'number' ? x.z : 0;\n  } else {\n    this.x = typeof x === 'number' ? x : 0;\n    this.y = typeof y === 'number' ? y : 0;\n    this.z = typeof z === 'number' ? z : 0;\n  }\n};\n\nVector3d.prototype.reset = function () {\n  this.x = this.y = this.z = 0;\n};\n","/**\n * Internal data structure to represent 2D QuadTree node\n */\nmodule.exports = function Node() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain boides:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n  this.quad0 = null;\n  this.quad1 = null;\n  this.quad2 = null;\n  this.quad3 = null;\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  this.massX = 0;\n  this.massY = 0;\n\n  // bounding box coordinates\n  this.left = 0;\n  this.top = 0;\n  this.bottom = 0;\n  this.right = 0;\n};\n","var physics = require('ngraph.physics.primitives');\n\nmodule.exports = function(pos) {\n  return new physics.Body(pos);\n}\n","module.exports = function (bodies, settings) {\n  var random = require('ngraph.random').random(42);\n  var boundingBox =  { x1: 0, y1: 0, z1: 0, x2: 0, y2: 0, z2: 0 };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset : function () {\n      boundingBox.x1 = boundingBox.y1 = 0;\n      boundingBox.x2 = boundingBox.y2 = 0;\n      boundingBox.z1 = boundingBox.z2 = 0;\n    },\n\n    getBestNewPosition: function (neighbors) {\n      var graphRect = boundingBox;\n\n      var baseX = 0, baseY = 0, baseZ = 0;\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          baseX += neighbors[i].pos.x;\n          baseY += neighbors[i].pos.y;\n          baseZ += neighbors[i].pos.z;\n        }\n\n        baseX /= neighbors.length;\n        baseY /= neighbors.length;\n        baseZ /= neighbors.length;\n      } else {\n        baseX = (graphRect.x1 + graphRect.x2) / 2;\n        baseY = (graphRect.y1 + graphRect.y2) / 2;\n        baseZ = (graphRect.z1 + graphRect.z2) / 2;\n      }\n\n      var springLength = settings.springLength;\n      return {\n        x: baseX + random.next(springLength) - springLength / 2,\n        y: baseY + random.next(springLength) - springLength / 2,\n        z: baseZ + random.next(springLength) - springLength / 2\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) { return; } // don't have to wory here.\n\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        z1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE,\n        z2 = Number.MIN_VALUE;\n\n    while(i--) {\n      // this is O(n), could it be done faster with quadtree?\n      // how about pinned nodes?\n      var body = bodies[i];\n      if (body.isPinned) {\n        body.pos.x = body.prevPos.x;\n        body.pos.y = body.prevPos.y;\n        body.pos.z = body.prevPos.z;\n      } else {\n        body.prevPos.x = body.pos.x;\n        body.prevPos.y = body.pos.y;\n        body.prevPos.z = body.pos.z;\n      }\n      if (body.pos.x < x1) {\n        x1 = body.pos.x;\n      }\n      if (body.pos.x > x2) {\n        x2 = body.pos.x;\n      }\n      if (body.pos.y < y1) {\n        y1 = body.pos.y;\n      }\n      if (body.pos.y > y2) {\n        y2 = body.pos.y;\n      }\n      if (body.pos.z < z1) {\n        z1 = body.pos.z;\n      }\n      if (body.pos.z > z2) {\n        z2 = body.pos.z;\n      }\n    }\n\n    boundingBox.x1 = x1;\n    boundingBox.x2 = x2;\n    boundingBox.y1 = y1;\n    boundingBox.y2 = y2;\n    boundingBox.z1 = z1;\n    boundingBox.z2 = z2;\n  }\n};\n","/**\n * Internal data structure to represent 3D QuadTree node\n */\nmodule.exports = function Node() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain boides:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // Behind Z median:\n  // 0 | 1\n  // -----\n  // 2 | 3\n  // In front of Z median:\n  // 4 | 5\n  // -----\n  // 6 | 7\n  this.quad0 = null;\n  this.quad1 = null;\n  this.quad2 = null;\n  this.quad3 = null;\n  this.quad4 = null;\n  this.quad5 = null;\n  this.quad6 = null;\n  this.quad7 = null;\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  this.massX = 0;\n  this.massY = 0;\n  this.massZ = 0;\n\n  // bounding box coordinates\n  this.left = 0;\n  this.top = 0;\n  this.bottom = 0;\n  this.right = 0;\n  this.front = 0;\n  this.back = 0;\n};\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","/**\n * This is Barnes Hut simulation algorithm for 2d case. Implementation\n * is highly optimized (avoids recusion and gc pressure)\n *\n * http://www.cs.princeton.edu/courses/archive/fall03/cs126/assignments/barnes-hut.html\n */\n\nmodule.exports = function(options) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  // we require deterministic randomness here\n  var random = require('ngraph.random').random(1984),\n    Node = require('./node'),\n    InsertStack = require('./insertStack'),\n    isSamePosition = require('./isSamePosition');\n\n  var gravity = options.gravity,\n    updateQueue = [],\n    insertStack = new InsertStack(),\n    theta = options.theta,\n\n    nodesCache = [],\n    currentInCache = 0,\n    root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n    /**\n     * Gets root node if its present\n     */\n    getRoot: function() {\n      return root;\n    },\n    updateBodyForce: update,\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n      node.quad0 = null;\n      node.quad1 = null;\n      node.quad2 = null;\n      node.quad3 = null;\n      node.body = null;\n      node.mass = node.massX = node.massY = 0;\n      node.left = node.right = node.top = node.bottom = 0;\n    } else {\n      node = new Node();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue,\n      v,\n      dx,\n      dy,\n      r, fx = 0,\n      fy = 0,\n      queueLength = 1,\n      shiftIdx = 0,\n      pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx],\n        body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        dx = body.pos.x - sourceBody.pos.x;\n        dy = body.pos.y - sourceBody.pos.y;\n        r = Math.sqrt(dx * dx + dy * dy);\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n        }\n\n        // This is standard gravition force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        fx += v * dx;\n        fy += v * dy;\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        dx = node.massX / node.mass - sourceBody.pos.x;\n        dy = node.massY / node.mass - sourceBody.pos.y;\n        r = Math.sqrt(dx * dx + dy * dy);\n\n        if (r === 0) {\n          // Sorry about code duplucation. I don't want to create many functions\n          // right away. Just want to see performance first.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n        }\n        // If s / r < , treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.right - node.left) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was squarified during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          fx += v * dx;\n          fy += v * dy;\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n          if (node.quad0) {\n            queue[pushIdx] = node.quad0;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n          if (node.quad1) {\n            queue[pushIdx] = node.quad1;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n          if (node.quad2) {\n            queue[pushIdx] = node.quad2;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n          if (node.quad3) {\n            queue[pushIdx] = node.quad3;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n        }\n      }\n    }\n\n    sourceBody.force.x += fx;\n    sourceBody.force.y += fy;\n  }\n\n  function insertBodies(bodies) {\n    var x1 = Number.MAX_VALUE,\n      y1 = Number.MAX_VALUE,\n      x2 = Number.MIN_VALUE,\n      y2 = Number.MIN_VALUE,\n      i,\n      max = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    i = max;\n    while (i--) {\n      var x = bodies[i].pos.x;\n      var y = bodies[i].pos.y;\n      if (x < x1) {\n        x1 = x;\n      }\n      if (x > x2) {\n        x2 = x;\n      }\n      if (y < y1) {\n        y1 = y;\n      }\n      if (y > y2) {\n        y2 = y;\n      }\n    }\n\n    // Squarify the bounds.\n    var dx = x2 - x1,\n      dy = y2 - y1;\n    if (dx > dy) {\n      y2 = y1 + dx;\n    } else {\n      x2 = x1 + dy;\n    }\n\n    currentInCache = 0;\n    root = newNode();\n    root.left = x1;\n    root.right = x2;\n    root.top = y1;\n    root.bottom = y2;\n\n    i = max - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop(),\n        node = stackItem.node,\n        body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        var x = body.pos.x;\n        var y = body.pos.y;\n        node.mass = node.mass + body.mass;\n        node.massX = node.massX + body.mass * x;\n        node.massY = node.massY + body.mass * y;\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0, // Assume we are in the 0's quad.\n          left = node.left,\n          right = (node.right + left) / 2,\n          top = node.top,\n          bottom = (node.bottom + top) / 2;\n\n        if (x > right) { // somewhere in the eastern part.\n          quadIdx = quadIdx + 1;\n          left = right;\n          right = node.right;\n        }\n        if (y > bottom) { // and in south.\n          quadIdx = quadIdx + 2;\n          top = bottom;\n          bottom = node.bottom;\n        }\n\n        var child = getChild(node, quadIdx);\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          child.left = left;\n          child.top = top;\n          child.right = right;\n          child.bottom = bottom;\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            var dx = (node.right - node.left) * offset;\n            var dy = (node.bottom - node.top) * offset;\n\n            oldBody.pos.x = node.left + dx;\n            oldBody.pos.y = node.top + dy;\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.quad0;\n  if (idx === 1) return node.quad1;\n  if (idx === 2) return node.quad2;\n  if (idx === 3) return node.quad3;\n  return null;\n}\n\nfunction setChild(node, idx, child) {\n  if (idx === 0) node.quad0 = child;\n  else if (idx === 1) node.quad1 = child;\n  else if (idx === 2) node.quad2 = child;\n  else if (idx === 3) node.quad3 = child;\n}\n","module.exports = merge;\n\n/**\n * Augments `target` with properties in `options`. Does not override\n * target's properties if they are defined and matches expected type in \n * options\n *\n * @returns {Object} merged object\n */\nfunction merge(target, options) {\n  var key;\n  if (!target) { target = {}; }\n  if (options) {\n    for (key in options) {\n      if (options.hasOwnProperty(key)) {\n        var targetHasIt = target.hasOwnProperty(key),\n            optionsValueType = typeof options[key],\n            shouldReplace = !targetHasIt || (typeof target[key] !== optionsValueType);\n\n        if (shouldReplace) {\n          target[key] = options[key];\n        } else if (optionsValueType === 'object') {\n          // go deep, don't care about loops here, we are simple API!:\n          target[key] = merge(target[key], options[key]);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.github.io/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n","/**\n * Represents 3d spring force, which updates forces acting on two bodies, conntected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n  var random = require('ngraph.random').random(42);\n  var expose = require('ngraph.expose');\n\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update : function (spring) {\n      var body1 = spring.from,\n          body2 = spring.to,\n          length = spring.length < 0 ? options.springLength : spring.length,\n          dx = body2.pos.x - body1.pos.x,\n          dy = body2.pos.y - body1.pos.y,\n          dz = body2.pos.z - body1.pos.z,\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n      if (r === 0) {\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          dz = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n      }\n\n      var d = r - length;\n      var coeff = ((!spring.coeff || spring.coeff < 0) ? options.springCoeff : spring.coeff) * d / r * spring.weight;\n\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n      body1.force.z += coeff * dz;\n\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n      body2.force.z -= coeff * dz;\n    }\n  };\n\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n}\n","module.exports = function (bodies, settings) {\n  var random = require('ngraph.random').random(42);\n  var boundingBox =  { x1: 0, y1: 0, x2: 0, y2: 0 };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset : function () {\n      boundingBox.x1 = boundingBox.y1 = 0;\n      boundingBox.x2 = boundingBox.y2 = 0;\n    },\n\n    getBestNewPosition: function (neighbors) {\n      var graphRect = boundingBox;\n\n      var baseX = 0, baseY = 0;\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          baseX += neighbors[i].pos.x;\n          baseY += neighbors[i].pos.y;\n        }\n\n        baseX /= neighbors.length;\n        baseY /= neighbors.length;\n      } else {\n        baseX = (graphRect.x1 + graphRect.x2) / 2;\n        baseY = (graphRect.y1 + graphRect.y2) / 2;\n      }\n\n      var springLength = settings.springLength;\n      return {\n        x: baseX + random.next(springLength) - springLength / 2,\n        y: baseY + random.next(springLength) - springLength / 2\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) { return; } // don't have to wory here.\n\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE;\n\n    while(i--) {\n      // this is O(n), could it be done faster with quadtree?\n      // how about pinned nodes?\n      var body = bodies[i];\n      if (body.isPinned) {\n        body.pos.x = body.prevPos.x;\n        body.pos.y = body.prevPos.y;\n      } else {\n        body.prevPos.x = body.pos.x;\n        body.prevPos.y = body.pos.y;\n      }\n      if (body.pos.x < x1) {\n        x1 = body.pos.x;\n      }\n      if (body.pos.x > x2) {\n        x2 = body.pos.x;\n      }\n      if (body.pos.y < y1) {\n        y1 = body.pos.y;\n      }\n      if (body.pos.y > y2) {\n        y2 = body.pos.y;\n      }\n    }\n\n    boundingBox.x1 = x1;\n    boundingBox.x2 = x2;\n    boundingBox.y1 = y1;\n    boundingBox.y2 = y2;\n  }\n}\n","/**\n * Represents 3d drag force, which reduces force value on each step by given\n * coefficient.\n *\n * @param {Object} options for the drag force\n * @param {Number=} options.dragCoeff drag force coefficient. 0.1 by default\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge'),\n      expose = require('ngraph.expose');\n\n  options = merge(options, {\n    dragCoeff: 0.02\n  });\n\n  var api = {\n    update : function (body) {\n      body.force.x -= options.dragCoeff * body.velocity.x;\n      body.force.y -= options.dragCoeff * body.velocity.y;\n      body.force.z -= options.dragCoeff * body.velocity.z;\n    }\n  };\n\n  // let easy access to dragCoeff:\n  expose(options, api, ['dragCoeff']);\n\n  return api;\n};\n","module.exports = InsertStack;\n\n/**\n * Our implmentation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressue: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n","import {\n  EventDispatcher,\n  Plane,\n  Raycaster,\n  Vector2,\n  Vector3\n} from 'three';\n\n/*\n * @author zz85 / https://github.com/zz85\n * @author mrdoob / http://mrdoob.com\n * Running this will allow you to drag three.js objects around the screen.\n */\n\nfunction DragControls(_objects, _camera, _domElement) {\n\n  if (_objects.isCamera) {\n\n    console.warn('THREE.DragControls: Constructor now expects ( objects, camera, domElement )');\n    var temp = _objects;\n    _objects = _camera;\n    _camera = temp;\n\n  }\n\n  var _plane = new Plane();\n  var _raycaster = new Raycaster();\n\n  var _mouse = new Vector2();\n  var _offset = new Vector3();\n  var _intersection = new Vector3();\n\n  var _selected = null,\n    _hovered = null;\n\n  //\n\n  var scope = this;\n\n  function activate() {\n\n    _domElement.addEventListener('mousemove', onDocumentMouseMove, false);\n    _domElement.addEventListener('mousedown', onDocumentMouseDown, false);\n    _domElement.addEventListener('mouseup', onDocumentMouseCancel, false);\n    _domElement.addEventListener('mouseleave', onDocumentMouseCancel, false);\n    _domElement.addEventListener('touchmove', onDocumentTouchMove, false);\n    _domElement.addEventListener('touchstart', onDocumentTouchStart, false);\n    _domElement.addEventListener('touchend', onDocumentTouchEnd, false);\n\n  }\n\n  function deactivate() {\n\n    _domElement.removeEventListener('mousemove', onDocumentMouseMove, false);\n    _domElement.removeEventListener('mousedown', onDocumentMouseDown, false);\n    _domElement.removeEventListener('mouseup', onDocumentMouseCancel, false);\n    _domElement.removeEventListener('mouseleave', onDocumentMouseCancel, false);\n    _domElement.removeEventListener('touchmove', onDocumentTouchMove, false);\n    _domElement.removeEventListener('touchstart', onDocumentTouchStart, false);\n    _domElement.removeEventListener('touchend', onDocumentTouchEnd, false);\n\n  }\n\n  function dispose() {\n\n    deactivate();\n\n  }\n\n  function onDocumentMouseMove(event) {\n\n    event.preventDefault();\n\n    var rect = _domElement.getBoundingClientRect();\n\n    _mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n    _mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    if (_selected && scope.enabled) {\n\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n\n        _selected.position.copy(_intersection.sub(_offset));\n\n      }\n\n      scope.dispatchEvent({\n        type: 'drag',\n        object: _selected\n      });\n\n      return;\n\n    }\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    var intersects = _raycaster.intersectObjects(_objects);\n\n    if (intersects.length > 0) {\n\n      var object = intersects[0].object;\n\n      _plane.setFromNormalAndCoplanarPoint(_camera.getWorldDirection(_plane.normal), object.position);\n\n      if (_hovered !== object) {\n\n        scope.dispatchEvent({\n          type: 'hoveron',\n          object: object\n        });\n\n        _domElement.style.cursor = 'pointer';\n        _hovered = object;\n\n      }\n\n    } else {\n\n      if (_hovered !== null) {\n\n        scope.dispatchEvent({\n          type: 'hoveroff',\n          object: _hovered\n        });\n\n        _domElement.style.cursor = 'auto';\n        _hovered = null;\n\n      }\n\n    }\n\n  }\n\n  function onDocumentMouseDown(event) {\n\n    event.preventDefault();\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    var intersects = _raycaster.intersectObjects(_objects);\n\n    if (intersects.length > 0) {\n\n      _selected = intersects[0].object;\n\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n\n        _offset.copy(_intersection).sub(_selected.position);\n\n      }\n\n      _domElement.style.cursor = 'move';\n\n      scope.dispatchEvent({\n        type: 'dragstart',\n        object: _selected\n      });\n\n    }\n\n\n  }\n\n  function onDocumentMouseCancel(event) {\n\n    event.preventDefault();\n\n    if (_selected) {\n\n      scope.dispatchEvent({\n        type: 'dragend',\n        object: _selected\n      });\n\n      _selected = null;\n\n    }\n\n    _domElement.style.cursor = 'auto';\n\n  }\n\n  function onDocumentTouchMove(event) {\n\n    event.preventDefault();\n    event = event.changedTouches[0];\n\n    var rect = _domElement.getBoundingClientRect();\n\n    _mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n    _mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    if (_selected && scope.enabled) {\n\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n\n        _selected.position.copy(_intersection.sub(_offset));\n\n      }\n\n      scope.dispatchEvent({\n        type: 'drag',\n        object: _selected\n      });\n\n      return;\n\n    }\n\n  }\n\n  function onDocumentTouchStart(event) {\n\n    event.preventDefault();\n    event = event.changedTouches[0];\n\n    var rect = _domElement.getBoundingClientRect();\n\n    _mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n    _mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    var intersects = _raycaster.intersectObjects(_objects);\n\n    if (intersects.length > 0) {\n\n      _selected = intersects[0].object;\n\n      _plane.setFromNormalAndCoplanarPoint(_camera.getWorldDirection(_plane.normal), _selected.position);\n\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n\n        _offset.copy(_intersection).sub(_selected.position);\n\n      }\n\n      _domElement.style.cursor = 'move';\n\n      scope.dispatchEvent({\n        type: 'dragstart',\n        object: _selected\n      });\n\n    }\n\n\n  }\n\n  function onDocumentTouchEnd(event) {\n\n    event.preventDefault();\n\n    if (_selected) {\n\n      scope.dispatchEvent({\n        type: 'dragend',\n        object: _selected\n      });\n\n      _selected = null;\n\n    }\n\n    _domElement.style.cursor = 'auto';\n\n  }\n\n  activate();\n\n  // API\n\n  this.enabled = true;\n\n  this.activate = activate;\n  this.deactivate = deactivate;\n  this.dispose = dispose;\n\n  // Backward compatibility\n\n  this.setObjects = function() {\n\n    console.error('THREE.DragControls: setObjects() has been removed.');\n\n  };\n\n  this.on = function(type, listener) {\n\n    console.warn('THREE.DragControls: on() has been deprecated. Use addEventListener() instead.');\n    scope.addEventListener(type, listener);\n\n  };\n\n  this.off = function(type, listener) {\n\n    console.warn('THREE.DragControls: off() has been deprecated. Use removeEventListener() instead.');\n    scope.removeEventListener(type, listener);\n\n  };\n\n  this.notify = function(type) {\n\n    console.error('THREE.DragControls: notify() has been deprecated. Use dispatchEvent() instead.');\n    scope.dispatchEvent({\n      type: type\n    });\n\n  };\n\n}\n\nDragControls.prototype = Object.create(EventDispatcher.prototype);\nDragControls.prototype.constructor = DragControls;\n\nexport default DragControls;","export default function(x, y, z) {\n  var nodes;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n  if (z == null) z = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0,\n        sz = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x || 0, sy += node.y || 0, sz += node.z || 0;\n    }\n\n    for (sx = sx / n - x, sy = sy / n - y, sz = sz / n - z, i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (sx) { node.x -= sx }\n      if (sy) { node.y -= sy; }\n      if (sz) { node.z -= sz; }\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.z = function(_) {\n    return arguments.length ? (z = +_, force) : z;\n  };\n\n  return force;\n}\n","export default function(d) {\n  var x = +this._x.call(null, d);\n  return add(this.cover(x), x, d);\n}\n\nfunction add(tree, x, d) {\n  if (isNaN(x)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      x1 = tree._x1,\n      xm,\n      xp,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (parent = node, !(node = node[i = +right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  if (x === xp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(2) : tree._root = new Array(2);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n  } while ((i = +right) === (j = +(xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var i, n = data.length,\n      x,\n      xz = new Array(n),\n      x0 = Infinity,\n      x1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, data[i]))) continue;\n    xz[i] = x;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0).cover(x1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x) {\n  if (isNaN(x = +x)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      x1 = this._x1;\n\n  // If the binarytree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing half boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = +(x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(2), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, x > x1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(2), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, x0 > x);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the binarytree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._x1 = x1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0]).cover(+_[1][0])\n      : isNaN(this._x0) ? undefined : [[this._x0], [this._x1]];\n}\n","export default function(node, x0, x1) {\n  this.node = node;\n  this.x0 = x0;\n  this.x1 = x1;\n}\n","import Half from \"./half\";\n\nexport default function(x, radius) {\n  var data,\n      x0 = this._x0,\n      x1,\n      x2,\n      x3 = this._x1,\n      halves = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) halves.push(new Half(node, x0, x3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius;\n    x3 = x + radius;\n  }\n\n  while (q = halves.pop()) {\n\n    // Stop searching if this half cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (x2 = q.x1) < x0) continue;\n\n    // Bisect the current half.\n    if (node.length) {\n      var xm = (x1 + x2) / 2;\n\n      halves.push(\n        new Half(node[1], xm, x2),\n        new Half(node[0], x1, xm)\n      );\n\n      // Visit the closest half first.\n      if (i = +(x >= xm)) {\n        q = halves[halves.length - 1];\n        halves[halves.length - 1] = halves[halves.length - 1 - i];\n        halves[halves.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var d = Math.abs(x - +this._x.call(null, node.data));\n      if (d < radius) {\n        radius = d;\n        x0 = x - d;\n        x3 = x + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      x1 = this._x1,\n      x,\n      xm,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (!(parent = node, node = node[i = +right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 1]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1])\n      && node === (parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Half from \"./half\";\n\nexport default function(callback) {\n  var halves = [], q, node = this._root, child, x0, x1;\n  if (node) halves.push(new Half(node, this._x0, this._x1));\n  while (q = halves.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, x1 = q.x1) && node.length) {\n      var xm = (x0 + x1) / 2;\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n    }\n  }\n  return this;\n}\n","import Half from \"./half\";\n\nexport default function(callback) {\n  var halves = [], next = [], q;\n  if (this._root) halves.push(new Half(this._root, this._x0, this._x1));\n  while (q = halves.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, x1 = q.x1, xm = (x0 + x1) / 2;\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.x1);\n  }\n  return this;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\n\nexport default function binarytree(nodes, x) {\n  var tree = new Binarytree(x == null ? defaultX : x, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Binarytree(x, x0, x1) {\n  this._x = x;\n  this._x0 = x0;\n  this._x1 = x1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = binarytree.prototype = Binarytree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Binarytree(this._x, this._x0, this._x1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(2)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 2; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(2)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;","export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add(this.cover(x, y, z), x, y, z, d);\n}\n\nfunction add(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      z,\n      xz = new Array(n),\n      yz = new Array(n),\n      zz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n  if (z1 < z0) z0 = this._z0, z1 = this._z1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0, z0).cover(x1, y1, z1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1;\n\n  // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1 || z0 > z || z > z1) {\n    var t = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (z < (z0 + z1) / 2) << 2 | (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z1 = z0 + t, x > x1 || y > y1 || z > z1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z1 = z0 + t, x0 > x || y > y1 || z > z1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z1 = z0 + t, x > x1 || y0 > y || z > z1);\n        break;\n      }\n      case 3: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z1 = z0 + t, x0 > x || y0 > y || z > z1);\n        break;\n      }\n      case 4: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z0 = z1 - t, x > x1 || y > y1 || z0 > z);\n        break;\n      }\n      case 5: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z0 = z1 - t, x0 > x || y > y1 || z0 > z);\n        break;\n      }\n      case 6: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z0 = z1 - t, x > x1 || y0 > y || z0 > z);\n        break;\n      }\n      case 7: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z0 = z1 - t, x0 > x || y0 > y || z0 > z);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the octree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n}\n","export default function(node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n}\n","import Octant from \"./octant\";\n\nexport default function(x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n\n    // Stop searching if this octant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (z1 = q.z0) > z3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0\n        || (z2 = q.z1) < z0) continue;\n\n    // Bisect the current octant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n\n      octs.push(\n        new Octant(node[7], xm, ym, zm, x2, y2, z2),\n        new Octant(node[6], x1, ym, zm, xm, y2, z2),\n        new Octant(node[5], xm, y1, zm, x2, ym, z2),\n        new Octant(node[4], x1, y1, zm, xm, ym, z2),\n        new Octant(node[3], xm, ym, z1, x2, y2, zm),\n        new Octant(node[2], x1, ym, z1, xm, y2, zm),\n        new Octant(node[1], xm, y1, z1, x2, ym, zm),\n        new Octant(node[0], x1, y1, z1, xm, ym, zm)\n      );\n\n      // Visit the closest octant first.\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | (x >= xm)) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          dz = z - +this._z.call(null, node.data),\n          d2 = dx * dx + dy * dy + dz * dz;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d, z0 = z - d;\n        x3 = x + d, y3 = y + d, z3 = z + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 7] || parent[(i + 2) & 7] || parent[(i + 3) & 7] || parent[(i + 4) & 7] || parent[(i + 5) & 7] || parent[(i + 6) & 7] || parent[(i + 7) & 7]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7])\n      && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Octant from \"./octant\";\n\nexport default function(callback) {\n  var octs = [], q, node = this._root, child, x0, y0, z0, x1, y1, z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n  return this;\n}\n","import Octant from \"./octant\";\n\nexport default function(callback) {\n  var octs = [], next = [], q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n  return this;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","export function defaultZ(d) {\n  return d[2];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\nimport tree_y, {defaultY} from \"./y\";\nimport tree_z, {defaultZ} from \"./z\";\n\nexport default function octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX : x, y == null ? defaultY : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = octree.prototype = Octree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(8)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(8)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\ntreeProto.z = tree_z;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function() {\n  return (Math.random() - 0.5) * 1e-6;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      nDim,\n      count,\n      bias,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x = 0, y = 0, z = 0, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle();\n        if (nDim > 1) { y = target.y + target.vy - source.y - source.vy || jiggle(); }\n        if (nDim > 2) { z = target.z + target.vz - source.z - source.vz || jiggle(); }\n        l = Math.sqrt(x * x + y * y + z * z);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l, z *= l;\n\n        target.vx -= x * (b = bias[i]);\n        if (nDim > 1) { target.vy -= y * b; }\n        if (nDim > 2) { target.vz -= z * b; }\n\n        source.vx += x * (b = 1 - b);\n        if (nDim > 1) { source.vy += y * b; }\n        if (nDim > 2) { source.vz += z * b; }\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(initNodes, numDimensions) {\n    nodes = initNodes;\n    nDim = numDimensions;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\n\nvar MAX_DIMENSIONS = 3;\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nexport function z(d) {\n  return d.z;\n}\n\nvar initialRadius = 10,\n    initialAngleRoll = Math.PI * (3 - Math.sqrt(5)), // Golden ratio angle\n    initialAngleYaw = Math.PI * 20 / (9 + Math.sqrt(221)); // Markov irrational number\n\nexport default function(nodes, numDimensions) {\n  numDimensions = numDimensions || 2;\n\n  var nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(numDimensions))),\n      simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\");\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function (force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (nDim > 1) {\n          if (node.fy == null) node.y += node.vy *= velocityDecay;\n          else node.y = node.fy, node.vy = 0;\n        }\n        if (nDim > 2) {\n          if (node.fz == null) node.z += node.vz *= velocityDecay;\n          else node.z = node.fz, node.vz = 0;\n        }\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (node.fz != null) node.z = node.fz;\n      if (isNaN(node.x) || (nDim > 1 && isNaN(node.y)) || (nDim > 2 && isNaN(node.z))) {\n        var radius = initialRadius * (nDim > 2 ? Math.cbrt(i) : (nDim > 1 ? Math.sqrt(i) : i)),\n          rollAngle = i * initialAngleRoll,\n          yawAngle = i * initialAngleYaw;\n\n        if (nDim === 1) {\n          node.x = radius;\n        } else if (nDim === 2) {\n          node.x = radius * Math.cos(rollAngle);\n          node.y = radius * Math.sin(rollAngle);\n        } else { // 3 dimensions: use spherical distribution along 2 irrational number angles\n          node.x = radius * Math.sin(rollAngle) * Math.cos(yawAngle);\n          node.y = radius * Math.cos(rollAngle);\n          node.z = radius * Math.sin(rollAngle) * Math.sin(yawAngle);\n        }\n      }\n      if (isNaN(node.vx) || (nDim > 1 && isNaN(node.vy)) || (nDim > 2 && isNaN(node.vz))) {\n        node.vx = 0;\n        if (nDim > 1) { node.vy = 0; }\n        if (nDim > 2) { node.vz = 0; }\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, nDim);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    numDimensions: function(_) {\n      return arguments.length\n          ? (nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(_))), forces.forEach(initializeForce), simulation)\n          : nDim;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function() {\n      var args = Array.prototype.slice.call(arguments);\n      var x = args.shift() || 0,\n          y = (nDim > 1 ? args.shift() : null) || 0,\n          z = (nDim > 2 ? args.shift() : null) || 0,\n          radius = args.shift() || Infinity;\n\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          dz,\n          d2,\n          node,\n          closest;\n\n      radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - (node.y || 0);\n        dz = z - (node.z ||0);\n        d2 = dx * dx + dy * dy + dz * dz;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","import {binarytree} from \"d3-binarytree\";\nimport {quadtree} from \"d3-quadtree\";\nimport {octree} from \"d3-octree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y, z} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      nDim,\n      node,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i,\n        n = nodes.length,\n        tree =\n            (nDim === 1 ? binarytree(nodes, x)\n            :(nDim === 2 ? quadtree(nodes, x, y)\n            :(nDim === 3 ? octree(nodes, x, y, z)\n            :null\n        ))).visitAfter(accumulate);\n\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(treeNode) {\n    var strength = 0, q, c, weight = 0, x, y, z, i;\n    var numChildren = treeNode.length;\n\n    // For internal nodes, accumulate forces from children.\n    if (numChildren) {\n      for (x = y = z = i = 0; i < numChildren; ++i) {\n        if ((q = treeNode[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * (q.x || 0), y += c * (q.y || 0), z += c * (q.z || 0);\n        }\n      }\n      strength *= Math.sqrt(4 / numChildren); // scale accumulated strength according to number of dimensions\n\n      treeNode.x = x / weight;\n      if (nDim > 1) { treeNode.y = y / weight; }\n      if (nDim > 2) { treeNode.z = z / weight; }\n    }\n\n    // For leaf nodes, accumulate forces from coincident nodes.\n    else {\n      q = treeNode;\n      q.x = q.data.x;\n      if (nDim > 1) { q.y = q.data.y; }\n      if (nDim > 2) { q.z = q.data.z; }\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    treeNode.value = strength;\n  }\n\n  function apply(treeNode, x1, arg1, arg2, arg3) {\n    if (!treeNode.value) return true;\n    var x2 = [arg1, arg2, arg3][nDim-1];\n\n    var x = treeNode.x - node.x,\n        y = (nDim > 1 ? treeNode.y - node.y : 0),\n        z = (nDim > 2 ? treeNode.z - node.z : 0),\n        w = x2 - x1,\n        l = x * x + y * y + z * z;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(), l += x * x;\n        if (nDim > 1 && y === 0) y = jiggle(), l += y * y;\n        if (nDim > 2 && z === 0) z = jiggle(), l += z * z;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * treeNode.value * alpha / l;\n        if (nDim > 1) { node.vy += y * treeNode.value * alpha / l; }\n        if (nDim > 2) { node.vz += z * treeNode.value * alpha / l; }\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (treeNode.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (treeNode.data !== node || treeNode.next) {\n      if (x === 0) x = jiggle(), l += x * x;\n      if (nDim > 1 && y === 0) y = jiggle(), l += y * y;\n      if (nDim > 2 && z === 0) z = jiggle(), l += z * z;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (treeNode.data !== node) {\n      w = strengths[treeNode.data.index] * alpha / l;\n      node.vx += x * w;\n      if (nDim > 1) { node.vy += y * w; }\n      if (nDim > 2) { node.vz += z * w; }\n    } while (treeNode = treeNode.next);\n  }\n\n  force.initialize = function(initNodes, numDimensions) {\n    nodes = initNodes;\n    nDim = numDimensions;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(radius, x, y, z) {\n  var nodes,\n      nDim,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n  if (z == null) z = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = (node.y || 0) - y || 1e-6,\n          dz = (node.z || 0) - z || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      if (nDim>1) { node.vy += dy * k; }\n      if (nDim>2) { node.vz += dz * k; }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(initNodes, numDimensions) {\n    nodes = initNodes;\n    nDim = numDimensions;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.z = function(_) {\n    return arguments.length ? (z = +_, force) : z;\n  };\n\n  return force;\n}\n","import debounce from 'debounce';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar Prop = function Prop(name, _ref) {\n  var _ref$default = _ref[\"default\"],\n      defaultVal = _ref$default === void 0 ? null : _ref$default,\n      _ref$triggerUpdate = _ref.triggerUpdate,\n      triggerUpdate = _ref$triggerUpdate === void 0 ? true : _ref$triggerUpdate,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function (newVal, state) {} : _ref$onChange;\n\n  _classCallCheck(this, Prop);\n\n  this.name = name;\n  this.defaultVal = defaultVal;\n  this.triggerUpdate = triggerUpdate;\n  this.onChange = onChange;\n};\n\nfunction index (_ref2) {\n  var _ref2$stateInit = _ref2.stateInit,\n      stateInit = _ref2$stateInit === void 0 ? function () {\n    return {};\n  } : _ref2$stateInit,\n      _ref2$props = _ref2.props,\n      rawProps = _ref2$props === void 0 ? {} : _ref2$props,\n      _ref2$methods = _ref2.methods,\n      methods = _ref2$methods === void 0 ? {} : _ref2$methods,\n      _ref2$aliases = _ref2.aliases,\n      aliases = _ref2$aliases === void 0 ? {} : _ref2$aliases,\n      _ref2$init = _ref2.init,\n      initFn = _ref2$init === void 0 ? function () {} : _ref2$init,\n      _ref2$update = _ref2.update,\n      updateFn = _ref2$update === void 0 ? function () {} : _ref2$update;\n  // Parse props into Prop instances\n  var props = Object.keys(rawProps).map(function (propName) {\n    return new Prop(propName, rawProps[propName]);\n  });\n  return function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Holds component state\n    var state = Object.assign({}, stateInit instanceof Function ? stateInit(options) : stateInit, // Support plain objects for backwards compatibility\n    {\n      initialised: false\n    }); // keeps track of which props triggered an update\n\n    var changedProps = {}; // Component constructor\n\n    function comp(nodeElement) {\n      initStatic(nodeElement, options);\n      digest();\n      return comp;\n    }\n\n    var initStatic = function initStatic(nodeElement, options) {\n      initFn.call(comp, nodeElement, state, options);\n      state.initialised = true;\n    };\n\n    var digest = debounce(function () {\n      if (!state.initialised) {\n        return;\n      }\n\n      updateFn.call(comp, state, changedProps);\n      changedProps = {};\n    }, 1); // Getter/setter methods\n\n    props.forEach(function (prop) {\n      comp[prop.name] = getSetProp(prop);\n\n      function getSetProp(_ref3) {\n        var prop = _ref3.name,\n            _ref3$triggerUpdate = _ref3.triggerUpdate,\n            redigest = _ref3$triggerUpdate === void 0 ? false : _ref3$triggerUpdate,\n            _ref3$onChange = _ref3.onChange,\n            onChange = _ref3$onChange === void 0 ? function (newVal, state) {} : _ref3$onChange,\n            _ref3$defaultVal = _ref3.defaultVal,\n            defaultVal = _ref3$defaultVal === void 0 ? null : _ref3$defaultVal;\n        return function (_) {\n          var curVal = state[prop];\n\n          if (!arguments.length) {\n            return curVal;\n          } // Getter mode\n\n\n          var val = _ === undefined ? defaultVal : _; // pick default if value passed is undefined\n\n          state[prop] = val;\n          onChange.call(comp, val, state, curVal); // track changed props\n\n          !changedProps.hasOwnProperty(prop) && (changedProps[prop] = curVal);\n\n          if (redigest) {\n            digest();\n          }\n\n          return comp;\n        };\n      }\n    }); // Other methods\n\n    Object.keys(methods).forEach(function (methodName) {\n      comp[methodName] = function () {\n        var _methods$methodName;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return (_methods$methodName = methods[methodName]).call.apply(_methods$methodName, [comp, state].concat(args));\n      };\n    }); // Link aliases\n\n    Object.entries(aliases).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          alias = _ref5[0],\n          target = _ref5[1];\n\n      return comp[alias] = comp[target];\n    }); // Reset all component props to their default value\n\n    comp.resetProps = function () {\n      props.forEach(function (prop) {\n        comp[prop.name](prop.defaultVal);\n      });\n      return comp;\n    }; //\n\n\n    comp.resetProps(); // Apply all prop defaults\n\n    state._rerender = digest; // Expose digest method\n\n    return comp;\n  };\n}\n\nexport default index;\n","var index = (function (p) {\n  return p instanceof Function ? p // fn\n  : typeof p === 'string' ? function (obj) {\n    return obj[p];\n  } // property name\n  : function (obj) {\n    return p;\n  };\n}); // constant\n\nexport default index;\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = (function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n          isProp = _ref.isProp;\n      var key;\n\n      if (isProp) {\n        var _itemVal = itemVal,\n            propVal = _itemVal[keyAccessor],\n            rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n\n  }\n\n  var result = indexedResult;\n\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              key = _ref3[0],\n              val = _ref3[1];\n\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n\n  return result;\n});\n\nexport default index;\n","import indexBy from 'index-array-by';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction diffArrays(prev, next, idAccessor) {\n  var result = {\n    enter: [],\n    update: [],\n    exit: []\n  };\n\n  if (!idAccessor) {\n    // use object references for comparison\n    var prevSet = new Set(prev);\n    var nextSet = new Set(next);\n    new Set([].concat(_toConsumableArray(prevSet), _toConsumableArray(nextSet))).forEach(function (item) {\n      var type = !prevSet.has(item) ? 'enter' : !nextSet.has(item) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [item, item] : item);\n    });\n  } else {\n    // compare by id (duplicate keys are ignored)\n    var prevById = indexBy(prev, idAccessor, false);\n    var nextById = indexBy(next, idAccessor, false);\n    var byId = Object.assign({}, prevById, nextById);\n    Object.entries(byId).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          id = _ref2[0],\n          item = _ref2[1];\n\n      var type = !prevById.hasOwnProperty(id) ? 'enter' : !nextById.hasOwnProperty(id) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]] : item);\n    });\n  }\n\n  return result;\n}\n\nfunction dataBindDiff(data, existingObjs, _ref3) {\n  var _ref3$objBindAttr = _ref3.objBindAttr,\n      objBindAttr = _ref3$objBindAttr === void 0 ? '__obj' : _ref3$objBindAttr,\n      _ref3$dataBindAttr = _ref3.dataBindAttr,\n      dataBindAttr = _ref3$dataBindAttr === void 0 ? '__data' : _ref3$dataBindAttr,\n      idAccessor = _ref3.idAccessor,\n      _ref3$purge = _ref3.purge,\n      purge = _ref3$purge === void 0 ? false : _ref3$purge;\n\n  var isObjValid = function isObjValid(obj) {\n    return obj.hasOwnProperty(dataBindAttr);\n  };\n\n  var removeObjs = existingObjs.filter(function (obj) {\n    return !isObjValid(obj);\n  });\n  var prevD = existingObjs.filter(isObjValid).map(function (obj) {\n    return obj[dataBindAttr];\n  });\n  var nextD = data;\n  var diff = purge ? {\n    enter: nextD,\n    exit: prevD,\n    update: []\n  } // don't diff data in purge mode\n  : diffArrays(prevD, nextD, idAccessor);\n  diff.update = diff.update.map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        prevD = _ref5[0],\n        nextD = _ref5[1];\n\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(function (obj) {\n    return _defineProperty({}, objBindAttr, obj);\n  }));\n  return diff;\n}\n\nfunction viewDigest(data, existingObjs, // list\nappendObj, // item => {...} function\nremoveObj, // item => {...} function\n_ref7) {\n  var _ref7$createObj = _ref7.createObj,\n      createObj = _ref7$createObj === void 0 ? function (d) {\n    return {};\n  } : _ref7$createObj,\n      _ref7$updateObj = _ref7.updateObj,\n      updateObj = _ref7$updateObj === void 0 ? function (obj, d) {} : _ref7$updateObj,\n      _ref7$exitObj = _ref7.exitObj,\n      exitObj = _ref7$exitObj === void 0 ? function (obj) {} : _ref7$exitObj,\n      _ref7$objBindAttr = _ref7.objBindAttr,\n      objBindAttr = _ref7$objBindAttr === void 0 ? '__obj' : _ref7$objBindAttr,\n      _ref7$dataBindAttr = _ref7.dataBindAttr,\n      dataBindAttr = _ref7$dataBindAttr === void 0 ? '__data' : _ref7$dataBindAttr,\n      dataDiffOptions = _objectWithoutProperties(_ref7, [\"createObj\", \"updateObj\", \"exitObj\", \"objBindAttr\", \"dataBindAttr\"]);\n\n  var _dataBindDiff = dataBindDiff(data, existingObjs, _objectSpread2({\n    objBindAttr: objBindAttr,\n    dataBindAttr: dataBindAttr\n  }, dataDiffOptions)),\n      enter = _dataBindDiff.enter,\n      update = _dataBindDiff.update,\n      exit = _dataBindDiff.exit; // Remove exiting points\n\n\n  exit.forEach(function (d) {\n    var obj = d[objBindAttr];\n    delete d[objBindAttr]; // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n  var newObjs = createObjs(enter);\n  var pointsData = [].concat(_toConsumableArray(enter), _toConsumableArray(update));\n  updateObjs(pointsData); // Add new points\n\n  newObjs.forEach(appendObj); //\n\n  function createObjs(data) {\n    var newObjs = [];\n    data.forEach(function (d) {\n      var obj = createObj(d);\n\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n        newObjs.push(obj);\n      }\n    });\n    return newObjs;\n  }\n\n  function updateObjs(data) {\n    data.forEach(function (d) {\n      var obj = d[objBindAttr];\n\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport default viewDigest;\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n    for (const value of _) {\n      const key = value + \"\";\n      if (index.has(key)) continue;\n      index.set(key, domain.push(value));\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import { Group, Mesh, MeshLambertMaterial, Color, BufferGeometry, BufferAttribute, Matrix4, Vector3, SphereBufferGeometry, CylinderBufferGeometry, TubeBufferGeometry, ConeBufferGeometry, Line, LineBasicMaterial, QuadraticBezierCurve3, CubicBezierCurve3, Box3 } from 'three';\nimport { forceSimulation, forceLink, forceManyBody, forceCenter, forceRadial } from 'd3-force-3d';\nimport graph from 'ngraph.graph';\nimport forcelayout from 'ngraph.forcelayout';\nimport forcelayout3d from 'ngraph.forcelayout3d';\nimport Kapsule from 'kapsule';\nimport accessorFn from 'accessor-fn';\nimport { min, max } from 'd3-array';\nimport dataJoint from 'data-joint';\nimport { scaleOrdinal } from 'd3-scale';\nimport { schemePaired } from 'd3-scale-chromatic';\nimport tinyColor from 'tinycolor2';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar materialDispose = function materialDispose(material) {\n  if (material instanceof Array) {\n    material.forEach(materialDispose);\n  } else {\n    if (material.map) {\n      material.map.dispose();\n    }\n\n    material.dispose();\n  }\n};\n\nvar deallocate = function deallocate(obj) {\n  if (obj.geometry) {\n    obj.geometry.dispose();\n  }\n\n  if (obj.material) {\n    materialDispose(obj.material);\n  }\n\n  if (obj.texture) {\n    obj.texture.dispose();\n  }\n\n  if (obj.children) {\n    obj.children.forEach(deallocate);\n  }\n};\n\nvar emptyObject = function emptyObject(obj) {\n  while (obj.children.length) {\n    var childObj = obj.children[0];\n    obj.remove(childObj);\n    deallocate(childObj);\n  }\n};\n\nfunction threeDigest(data, scene) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var _ref$objFilter = _ref.objFilter,\n      objFilter = _ref$objFilter === void 0 ? function () {\n    return true;\n  } : _ref$objFilter,\n      options = _objectWithoutProperties(_ref, [\"objFilter\"]);\n\n  return dataJoint(data, scene.children.filter(objFilter), function (obj) {\n    return scene.add(obj);\n  }, function (obj) {\n    scene.remove(obj);\n    emptyObject(obj);\n  }, _objectSpread2({\n    objBindAttr: '__threeObj'\n  }, options));\n}\n\nvar colorStr2Hex = function colorStr2Hex(str) {\n  return isNaN(str) ? parseInt(tinyColor(str).toHex(), 16) : str;\n};\n\nvar colorAlpha = function colorAlpha(str) {\n  return isNaN(str) ? tinyColor(str).getAlpha() : 1;\n};\n\nvar autoColorScale = scaleOrdinal(schemePaired); // Autoset attribute colorField by colorByAccessor property\n// If an object has already a color, don't set it\n// Objects can be nodes or links\n\nfunction autoColorObjects(objects, colorByAccessor, colorField) {\n  if (!colorByAccessor || typeof colorField !== 'string') return;\n  objects.filter(function (obj) {\n    return !obj[colorField];\n  }).forEach(function (obj) {\n    obj[colorField] = autoColorScale(colorByAccessor(obj));\n  });\n}\n\nfunction getDagDepths (_ref, idAccessor) {\n  var nodes = _ref.nodes,\n      links = _ref.links;\n  // linked graph\n  var graph = {};\n  nodes.forEach(function (node) {\n    return graph[idAccessor(node)] = {\n      data: node,\n      out: [],\n      depth: -1\n    };\n  });\n  links.forEach(function (_ref2) {\n    var source = _ref2.source,\n        target = _ref2.target;\n    var sourceId = getNodeId(source);\n    var targetId = getNodeId(target);\n    if (!graph.hasOwnProperty(sourceId)) throw \"Missing source node with id: \".concat(sourceId);\n    if (!graph.hasOwnProperty(targetId)) throw \"Missing target node with id: \".concat(targetId);\n    var sourceNode = graph[sourceId];\n    var targetNode = graph[targetId];\n    sourceNode.out.push(targetNode);\n\n    function getNodeId(node) {\n      return _typeof(node) === 'object' ? idAccessor(node) : node;\n    }\n  });\n  traverse(Object.values(graph)); // cleanup\n\n  Object.keys(graph).forEach(function (id) {\n    return graph[id] = graph[id].depth;\n  });\n  return graph;\n\n  function traverse(nodes) {\n    var nodeStack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var currentDepth = nodeStack.length;\n\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      var node = nodes[i];\n\n      if (nodeStack.indexOf(node) !== -1) {\n        var loop = [].concat(_toConsumableArray(nodeStack.slice(nodeStack.indexOf(node))), [node]).map(function (d) {\n          return idAccessor(d.data);\n        });\n        throw \"Invalid DAG structure! Found cycle in node path: \".concat(loop.join(' -> '), \".\");\n      }\n\n      if (currentDepth > node.depth) {\n        // Don't unnecessarily revisit chunks of the graph\n        node.depth = currentDepth;\n        traverse(node.out, [].concat(_toConsumableArray(nodeStack), [node]));\n      }\n    }\n  }\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  Group: Group,\n  Mesh: Mesh,\n  MeshLambertMaterial: MeshLambertMaterial,\n  Color: Color,\n  BufferGeometry: BufferGeometry,\n  BufferAttribute: BufferAttribute,\n  Matrix4: Matrix4,\n  Vector3: Vector3,\n  SphereBufferGeometry: SphereBufferGeometry,\n  CylinderBufferGeometry: CylinderBufferGeometry,\n  TubeBufferGeometry: TubeBufferGeometry,\n  ConeBufferGeometry: ConeBufferGeometry,\n  Line: Line,\n  LineBasicMaterial: LineBasicMaterial,\n  QuadraticBezierCurve3: QuadraticBezierCurve3,\n  CubicBezierCurve3: CubicBezierCurve3,\n  Box3: Box3\n};\nvar ngraph = {\n  graph: graph,\n  forcelayout: forcelayout,\n  forcelayout3d: forcelayout3d\n};\n\nvar DAG_LEVEL_NODE_RATIO = 2; // support multiple method names for backwards threejs compatibility\n\nvar setAttributeFn = new three.BufferGeometry().setAttribute ? 'setAttribute' : 'addAttribute';\nvar applyMatrix4Fn = new three.BufferGeometry().applyMatrix4 ? 'applyMatrix4' : 'applyMatrix';\nvar ForceGraph = Kapsule({\n  props: {\n    jsonUrl: {\n      onChange: function onChange(jsonUrl, state) {\n        var _this = this;\n\n        if (jsonUrl && !state.fetchingJson) {\n          // Load data asynchronously\n          state.fetchingJson = true;\n          state.onLoading();\n          fetch(jsonUrl).then(function (r) {\n            return r.json();\n          }).then(function (json) {\n            state.fetchingJson = false;\n            state.onFinishLoading(json);\n\n            _this.graphData(json);\n          });\n        }\n      },\n      triggerUpdate: false\n    },\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      },\n      onChange: function onChange(graphData, state) {\n        if (graphData.nodes.length || graphData.links.length) {\n          console.info('force-graph loading', graphData.nodes.length + ' nodes', graphData.links.length + ' links');\n        }\n\n        state.engineRunning = false; // Pause simulation immediately\n      }\n    },\n    numDimensions: {\n      \"default\": 3,\n      onChange: function onChange(numDim, state) {\n        var chargeForce = state.d3ForceLayout.force('charge'); // Increase repulsion on 3D mode for improved spatial separation\n\n        if (chargeForce) {\n          chargeForce.strength(numDim > 2 ? -60 : -30);\n        }\n\n        if (numDim < 3) {\n          eraseDimension(state.graphData.nodes, 'z');\n        }\n\n        if (numDim < 2) {\n          eraseDimension(state.graphData.nodes, 'y');\n        }\n\n        function eraseDimension(nodes, dim) {\n          nodes.forEach(function (d) {\n            delete d[dim]; // position\n\n            delete d[\"v\".concat(dim)]; // velocity\n          });\n        }\n      }\n    },\n    dagMode: {\n      onChange: function onChange(dagMode, state) {\n        // td, bu, lr, rl, zin, zout, radialin, radialout\n        !dagMode && state.forceEngine === 'd3' && (state.graphData.nodes || []).forEach(function (n) {\n          return n.fx = n.fy = n.fz = undefined;\n        }); // unfix nodes when disabling dag mode\n      }\n    },\n    dagLevelDistance: {},\n    nodeRelSize: {\n      \"default\": 4\n    },\n    // volume per val unit\n    nodeId: {\n      \"default\": 'id'\n    },\n    nodeVal: {\n      \"default\": 'val'\n    },\n    nodeResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the sphere's circumference\n    nodeColor: {\n      \"default\": 'color'\n    },\n    nodeAutoColorBy: {},\n    nodeOpacity: {\n      \"default\": 0.75\n    },\n    nodeVisibility: {\n      \"default\": true\n    },\n    nodeThreeObject: {},\n    nodeThreeObjectExtend: {\n      \"default\": false\n    },\n    linkSource: {\n      \"default\": 'source'\n    },\n    linkTarget: {\n      \"default\": 'target'\n    },\n    linkVisibility: {\n      \"default\": true\n    },\n    linkColor: {\n      \"default\": 'color'\n    },\n    linkAutoColorBy: {},\n    linkOpacity: {\n      \"default\": 0.2\n    },\n    linkWidth: {},\n    // Rounded to nearest decimal. For falsy values use dimensionless line with 1px regardless of distance.\n    linkResolution: {\n      \"default\": 6\n    },\n    // how many radial segments in each line tube's geometry\n    linkCurvature: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // line curvature radius (0: straight, 1: semi-circle)\n    linkCurveRotation: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // line curve rotation along the line axis (0: interection with XY plane, PI: upside down)\n    linkMaterial: {},\n    linkThreeObject: {},\n    linkThreeObjectExtend: {\n      \"default\": false\n    },\n    linkPositionUpdate: {\n      triggerUpdate: false\n    },\n    // custom function to call for updating the link's position. Signature: (threeObj, { start: { x, y, z},  end: { x, y, z }}, link). If the function returns a truthy value, the regular link position update will not run.\n    linkDirectionalArrowLength: {\n      \"default\": 0\n    },\n    linkDirectionalArrowColor: {},\n    linkDirectionalArrowRelPos: {\n      \"default\": 0.5,\n      triggerUpdate: false\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalArrowResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the arrow's conic circumference\n    linkDirectionalParticles: {\n      \"default\": 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      \"default\": 0.01,\n      triggerUpdate: false\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      \"default\": 0.5\n    },\n    linkDirectionalParticleColor: {},\n    linkDirectionalParticleResolution: {\n      \"default\": 4\n    },\n    // how many slice segments in the particle sphere's circumference\n    forceEngine: {\n      \"default\": 'd3'\n    },\n    // d3 or ngraph\n    d3AlphaMin: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    d3AlphaDecay: {\n      \"default\": 0.0228,\n      triggerUpdate: false,\n      onChange: function onChange(alphaDecay, state) {\n        state.d3ForceLayout.alphaDecay(alphaDecay);\n      }\n    },\n    d3AlphaTarget: {\n      \"default\": 0,\n      triggerUpdate: false,\n      onChange: function onChange(alphaTarget, state) {\n        state.d3ForceLayout.alphaTarget(alphaTarget);\n      }\n    },\n    d3VelocityDecay: {\n      \"default\": 0.4,\n      triggerUpdate: false,\n      onChange: function onChange(velocityDecay, state) {\n        state.d3ForceLayout.velocityDecay(velocityDecay);\n      }\n    },\n    warmupTicks: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {\n      \"default\": Infinity,\n      triggerUpdate: false\n    },\n    cooldownTime: {\n      \"default\": 15000,\n      triggerUpdate: false\n    },\n    // ms\n    onLoading: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishLoading: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineTick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineStop: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    refresh: function refresh(state) {\n      state._flushObjects = true;\n\n      state._rerender();\n\n      return this;\n    },\n    // Expose d3 forces for external manipulation\n    d3Force: function d3Force(state, forceName, forceFn) {\n      if (forceFn === undefined) {\n        return state.d3ForceLayout.force(forceName); // Force getter\n      }\n\n      state.d3ForceLayout.force(forceName, forceFn); // Force setter\n\n      return this;\n    },\n    d3ReheatSimulation: function d3ReheatSimulation(state) {\n      state.d3ForceLayout.alpha(1);\n      this.resetCountdown();\n      return this;\n    },\n    // reset cooldown state\n    resetCountdown: function resetCountdown(state) {\n      state.cntTicks = 0;\n      state.startTickTime = new Date();\n      state.engineRunning = true;\n      return this;\n    },\n    tickFrame: function tickFrame(state) {\n      var isD3Sim = state.forceEngine !== 'ngraph';\n\n      if (state.engineRunning) {\n        layoutTick();\n      }\n\n      updateArrows();\n      updatePhotons();\n      return this; //\n\n      function layoutTick() {\n        if (++state.cntTicks > state.cooldownTicks || new Date() - state.startTickTime > state.cooldownTime || isD3Sim && state.d3AlphaMin > 0 && state.d3ForceLayout.alpha() < state.d3AlphaMin) {\n          state.engineRunning = false; // Stop ticking graph\n\n          state.onEngineStop();\n        } else {\n          state.layout[isD3Sim ? 'tick' : 'step'](); // Tick it\n\n          state.onEngineTick();\n        } // Update nodes position\n\n\n        state.graphData.nodes.forEach(function (node) {\n          var obj = node.__threeObj;\n          if (!obj) return;\n          var pos = isD3Sim ? node : state.layout.getNodePosition(node[state.nodeId]);\n          obj.position.x = pos.x;\n          obj.position.y = pos.y || 0;\n          obj.position.z = pos.z || 0;\n        }); // Update links position\n\n        var linkWidthAccessor = accessorFn(state.linkWidth);\n        var linkCurvatureAccessor = accessorFn(state.linkCurvature);\n        var linkCurveRotationAccessor = accessorFn(state.linkCurveRotation);\n        var linkThreeObjectExtendAccessor = accessorFn(state.linkThreeObjectExtend);\n        state.graphData.links.forEach(function (link) {\n          var lineObj = link.__lineObj;\n          if (!lineObj) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          calcLinkCurve(link); // calculate link curve for all links, including custom replaced, so it can be used in directional functionality\n\n          var extendedObj = linkThreeObjectExtendAccessor(link);\n\n          if (state.linkPositionUpdate && state.linkPositionUpdate(extendedObj ? lineObj.children[1] : lineObj, // pass child custom object if extending the default\n          {\n            start: {\n              x: start.x,\n              y: start.y,\n              z: start.z\n            },\n            end: {\n              x: end.x,\n              y: end.y,\n              z: end.z\n            }\n          }, link) && !extendedObj) {\n            // exit if successfully custom updated position of non-extended obj\n            return;\n          }\n\n          var curveResolution = 30; // # line segments\n\n          var curve = link.__curve; // select default line obj if it's an extended group\n\n          var line = lineObj.children.length ? lineObj.children[0] : lineObj;\n\n          if (line.type === 'Line') {\n            // Update line geometry\n            if (!curve) {\n              // straight line\n              var linePos = line.geometry.getAttribute('position');\n\n              if (!linePos || !linePos.array || linePos.array.length !== 6) {\n                line.geometry[setAttributeFn]('position', linePos = new three.BufferAttribute(new Float32Array(2 * 3), 3));\n              }\n\n              linePos.array[0] = start.x;\n              linePos.array[1] = start.y || 0;\n              linePos.array[2] = start.z || 0;\n              linePos.array[3] = end.x;\n              linePos.array[4] = end.y || 0;\n              linePos.array[5] = end.z || 0;\n              linePos.needsUpdate = true;\n            } else {\n              // bezier curve line\n              line.geometry.setFromPoints(curve.getPoints(curveResolution));\n            }\n\n            line.geometry.computeBoundingSphere();\n          } else if (line.type === 'Mesh') {\n            // Update cylinder geometry\n            if (!curve) {\n              // straight tube\n              if (line.geometry.type !== 'CylinderBufferGeometry') {\n                var linkWidth = Math.ceil(linkWidthAccessor(link) * 10) / 10;\n                var r = linkWidth / 2;\n                var geometry = new three.CylinderBufferGeometry(r, r, 1, state.linkResolution, 1, false);\n                geometry[applyMatrix4Fn](new three.Matrix4().makeTranslation(0, 1 / 2, 0));\n                geometry[applyMatrix4Fn](new three.Matrix4().makeRotationX(Math.PI / 2));\n                line.geometry.dispose();\n                line.geometry = geometry;\n              }\n\n              var vStart = new three.Vector3(start.x, start.y || 0, start.z || 0);\n              var vEnd = new three.Vector3(end.x, end.y || 0, end.z || 0);\n              var distance = vStart.distanceTo(vEnd);\n              line.position.x = vStart.x;\n              line.position.y = vStart.y;\n              line.position.z = vStart.z;\n              line.scale.z = distance;\n              line.parent.localToWorld(vEnd); // lookAt requires world coords\n\n              line.lookAt(vEnd);\n            } else {\n              // curved tube\n              if (line.geometry.type !== 'TubeBufferGeometry') {\n                // reset object positioning\n                line.position.set(0, 0, 0);\n                line.rotation.set(0, 0, 0);\n                line.scale.set(1, 1, 1);\n              }\n\n              var _linkWidth = Math.ceil(linkWidthAccessor(link) * 10) / 10;\n\n              var _r = _linkWidth / 2;\n\n              var _geometry = new three.TubeBufferGeometry(curve, curveResolution, _r, state.linkResolution, false);\n\n              line.geometry.dispose();\n              line.geometry = _geometry;\n            }\n          }\n        }); //\n\n        function calcLinkCurve(link) {\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var curvature = linkCurvatureAccessor(link);\n\n          if (!curvature) {\n            link.__curve = null; // Straight line\n          } else {\n            // bezier curve line (only for line types)\n            var vStart = new three.Vector3(start.x, start.y || 0, start.z || 0);\n            var vEnd = new three.Vector3(end.x, end.y || 0, end.z || 0);\n            var l = vStart.distanceTo(vEnd); // line length\n\n            var curve;\n            var curveRotation = linkCurveRotationAccessor(link);\n\n            if (l > 0) {\n              var dx = end.x - start.x;\n              var dy = end.y - start.y || 0;\n              var vLine = new three.Vector3().subVectors(vEnd, vStart);\n              var cp = vLine.clone().multiplyScalar(curvature).cross(dx !== 0 || dy !== 0 ? new three.Vector3(0, 0, 1) : new three.Vector3(0, 1, 0)) // avoid cross-product of parallel vectors (prefer Z, fallback to Y)\n              .applyAxisAngle(vLine.normalize(), curveRotation) // rotate along line axis according to linkCurveRotation\n              .add(new three.Vector3().addVectors(vStart, vEnd).divideScalar(2));\n              curve = new three.QuadraticBezierCurve3(vStart, cp, vEnd);\n            } else {\n              // Same point, draw a loop\n              var d = curvature * 70;\n              var endAngle = -curveRotation; // Rotate clockwise (from Z angle perspective)\n\n              var startAngle = endAngle + Math.PI / 2;\n              curve = new three.CubicBezierCurve3(vStart, new three.Vector3(d * Math.cos(startAngle), d * Math.sin(startAngle), 0).add(vStart), new three.Vector3(d * Math.cos(endAngle), d * Math.sin(endAngle), 0).add(vStart), vEnd);\n            }\n\n            link.__curve = curve;\n          }\n        }\n      }\n\n      function updateArrows() {\n        // update link arrow position\n        var arrowRelPosAccessor = accessorFn(state.linkDirectionalArrowRelPos);\n        var arrowLengthAccessor = accessorFn(state.linkDirectionalArrowLength);\n        var nodeValAccessor = accessorFn(state.nodeVal);\n        state.graphData.links.forEach(function (link) {\n          var arrowObj = link.__arrowObj;\n          if (!arrowObj) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var startR = Math.sqrt(Math.max(0, nodeValAccessor(start) || 1)) * state.nodeRelSize;\n          var endR = Math.sqrt(Math.max(0, nodeValAccessor(end) || 1)) * state.nodeRelSize;\n          var arrowLength = arrowLengthAccessor(link);\n          var arrowRelPos = arrowRelPosAccessor(link);\n          var getPosAlongLine = link.__curve ? function (t) {\n            return link.__curve.getPoint(t);\n          } // interpolate along bezier curve\n          : function (t) {\n            // straight line: interpolate linearly\n            var iplt = function iplt(dim, start, end, t) {\n              return start[dim] + (end[dim] - start[dim]) * t || 0;\n            };\n\n            return {\n              x: iplt('x', start, end, t),\n              y: iplt('y', start, end, t),\n              z: iplt('z', start, end, t)\n            };\n          };\n          var lineLen = link.__curve ? link.__curve.getLength() : Math.sqrt(['x', 'y', 'z'].map(function (dim) {\n            return Math.pow((end[dim] || 0) - (start[dim] || 0), 2);\n          }).reduce(function (acc, v) {\n            return acc + v;\n          }, 0));\n          var posAlongLine = startR + arrowLength + (lineLen - startR - endR - arrowLength) * arrowRelPos;\n          var arrowHead = getPosAlongLine(posAlongLine / lineLen);\n          var arrowTail = getPosAlongLine((posAlongLine - arrowLength) / lineLen);\n          ['x', 'y', 'z'].forEach(function (dim) {\n            return arrowObj.position[dim] = arrowTail[dim];\n          });\n\n          var headVec = _construct(three.Vector3, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n            return arrowHead[c];\n          })));\n\n          arrowObj.parent.localToWorld(headVec); // lookAt requires world coords\n\n          arrowObj.lookAt(headVec);\n        });\n      }\n\n      function updatePhotons() {\n        // update link particle positions\n        var particleSpeedAccessor = accessorFn(state.linkDirectionalParticleSpeed);\n        state.graphData.links.forEach(function (link) {\n          var cyclePhotons = link.__photonsObj && link.__photonsObj.children;\n          var singleHopPhotons = link.__singleHopPhotonsObj && link.__singleHopPhotonsObj.children;\n          if ((!singleHopPhotons || !singleHopPhotons.length) && (!cyclePhotons || !cyclePhotons.length)) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var particleSpeed = particleSpeedAccessor(link);\n          var getPhotonPos = link.__curve ? function (t) {\n            return link.__curve.getPoint(t);\n          } // interpolate along bezier curve\n          : function (t) {\n            // straight line: interpolate linearly\n            var iplt = function iplt(dim, start, end, t) {\n              return start[dim] + (end[dim] - start[dim]) * t || 0;\n            };\n\n            return {\n              x: iplt('x', start, end, t),\n              y: iplt('y', start, end, t),\n              z: iplt('z', start, end, t)\n            };\n          };\n          var photons = [].concat(_toConsumableArray(cyclePhotons || []), _toConsumableArray(singleHopPhotons || []));\n          photons.forEach(function (photon, idx) {\n            var singleHop = photon.parent.__linkThreeObjType === 'singleHopPhotons';\n\n            if (!photon.hasOwnProperty('__progressRatio')) {\n              photon.__progressRatio = singleHop ? 0 : idx / cyclePhotons.length;\n            }\n\n            photon.__progressRatio += particleSpeed;\n\n            if (photon.__progressRatio >= 1) {\n              if (!singleHop) {\n                photon.__progressRatio = photon.__progressRatio % 1;\n              } else {\n                // remove particle\n                photon.parent.remove(photon);\n                emptyObject(photon);\n                return;\n              }\n            }\n\n            var photonPosRatio = photon.__progressRatio;\n            var pos = getPhotonPos(photonPosRatio);\n            ['x', 'y', 'z'].forEach(function (dim) {\n              return photon.position[dim] = pos[dim];\n            });\n          });\n        });\n      }\n    },\n    emitParticle: function emitParticle(state, link) {\n      if (link) {\n        if (!link.__singleHopPhotonsObj) {\n          var obj = new three.Group();\n          obj.__linkThreeObjType = 'singleHopPhotons';\n          link.__singleHopPhotonsObj = obj;\n          state.graphScene.add(obj);\n        }\n\n        var particleWidthAccessor = accessorFn(state.linkDirectionalParticleWidth);\n        var photonR = Math.ceil(particleWidthAccessor(link) * 10) / 10 / 2;\n        var numSegments = state.linkDirectionalParticleResolution;\n        var particleGeometry = new three.SphereBufferGeometry(photonR, numSegments, numSegments);\n        var linkColorAccessor = accessorFn(state.linkColor);\n        var particleColorAccessor = accessorFn(state.linkDirectionalParticleColor);\n        var photonColor = particleColorAccessor(link) || linkColorAccessor(link) || '#f0f0f0';\n        var materialColor = new three.Color(colorStr2Hex(photonColor));\n        var opacity = state.linkOpacity * 3;\n        var particleMaterial = new three.MeshLambertMaterial({\n          color: materialColor,\n          transparent: true,\n          opacity: opacity\n        }); // add a single hop particle\n\n        link.__singleHopPhotonsObj.add(new three.Mesh(particleGeometry, particleMaterial));\n      }\n\n      return this;\n    },\n    getGraphBbox: function getGraphBbox(state) {\n      if (!state.initialised) return null; // recursively collect all nested geometries bboxes\n\n      var bboxes = function getBboxes(obj) {\n        var bboxes = [];\n\n        if (obj.geometry) {\n          obj.geometry.computeBoundingBox();\n          var box = new three.Box3();\n          box.copy(obj.geometry.boundingBox).applyMatrix4(obj.matrixWorld);\n          bboxes.push(box);\n        }\n\n        return bboxes.concat.apply(bboxes, _toConsumableArray((obj.children || []).map(getBboxes)));\n      }(state.graphScene); // extract global x,y,z min/max\n\n\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [min(bboxes, function (bb) {\n          return bb.min[c];\n        }), max(bboxes, function (bb) {\n          return bb.max[c];\n        })]);\n      })));\n    }\n  },\n  stateInit: function stateInit() {\n    return {\n      d3ForceLayout: forceSimulation().force('link', forceLink()).force('charge', forceManyBody()).force('center', forceCenter()).force('dagRadial', null).stop(),\n      engineRunning: false\n    };\n  },\n  init: function init(threeObj, state) {\n    // Main three object to manipulate\n    state.graphScene = threeObj;\n  },\n  update: function update(state, changedProps) {\n    var hasAnyPropChanged = function hasAnyPropChanged(propList) {\n      return propList.some(function (p) {\n        return changedProps.hasOwnProperty(p);\n      });\n    };\n\n    state.engineRunning = false; // pause simulation\n\n    state.onUpdate();\n\n    if (state.nodeAutoColorBy !== null && hasAnyPropChanged(['nodeAutoColorBy', 'graphData', 'nodeColor'])) {\n      // Auto add color to uncolored nodes\n      autoColorObjects(state.graphData.nodes, accessorFn(state.nodeAutoColorBy), state.nodeColor);\n    }\n\n    if (state.linkAutoColorBy !== null && hasAnyPropChanged(['linkAutoColorBy', 'graphData', 'linkColor'])) {\n      // Auto add color to uncolored links\n      autoColorObjects(state.graphData.links, accessorFn(state.linkAutoColorBy), state.linkColor);\n    } // Digest nodes WebGL objects\n\n\n    if (state._flushObjects || hasAnyPropChanged(['graphData', 'nodeThreeObject', 'nodeThreeObjectExtend', 'nodeVal', 'nodeColor', 'nodeVisibility', 'nodeRelSize', 'nodeResolution', 'nodeOpacity'])) {\n      var customObjectAccessor = accessorFn(state.nodeThreeObject);\n      var customObjectExtendAccessor = accessorFn(state.nodeThreeObjectExtend);\n      var valAccessor = accessorFn(state.nodeVal);\n      var colorAccessor = accessorFn(state.nodeColor);\n      var visibilityAccessor = accessorFn(state.nodeVisibility);\n      var sphereGeometries = {}; // indexed by node value\n\n      var sphereMaterials = {}; // indexed by color\n\n      threeDigest(state.graphData.nodes.filter(visibilityAccessor), state.graphScene, {\n        purge: state._flushObjects || hasAnyPropChanged([// recreate objects if any of these props have changed\n        'nodeThreeObject', 'nodeThreeObjectExtend']),\n        objFilter: function objFilter(obj) {\n          return obj.__graphObjType === 'node';\n        },\n        createObj: function createObj(node) {\n          var customObj = customObjectAccessor(node);\n          var extendObj = customObjectExtendAccessor(node);\n\n          if (customObj && state.nodeThreeObject === customObj) {\n            // clone object if it's a shared object among all nodes\n            customObj = customObj.clone();\n          }\n\n          var obj;\n\n          if (customObj && !extendObj) {\n            obj = customObj;\n          } else {\n            // Add default object (sphere mesh)\n            obj = new three.Mesh();\n            obj.__graphDefaultObj = true;\n\n            if (customObj && extendObj) {\n              obj.add(customObj); // extend default with custom\n            }\n          }\n\n          obj.__graphObjType = 'node'; // Add object type\n\n          return obj;\n        },\n        updateObj: function updateObj(obj, node) {\n          if (obj.__graphDefaultObj) {\n            // bypass internal updates for custom node objects\n            var val = valAccessor(node) || 1;\n            var radius = Math.cbrt(val) * state.nodeRelSize;\n            var numSegments = state.nodeResolution;\n\n            if (obj.geometry.type !== 'SphereBufferGeometry' || obj.geometry.parameters.radius !== radius || obj.geometry.parameters.widthSegments !== numSegments) {\n              if (!sphereGeometries.hasOwnProperty(val)) {\n                sphereGeometries[val] = new three.SphereBufferGeometry(radius, numSegments, numSegments);\n              }\n\n              obj.geometry.dispose();\n              obj.geometry = sphereGeometries[val];\n            }\n\n            var color = colorAccessor(node);\n            var materialColor = new three.Color(colorStr2Hex(color || '#ffffaa'));\n            var opacity = state.nodeOpacity * colorAlpha(color);\n\n            if (obj.material.type !== 'MeshLambertMaterial' || !obj.material.color.equals(materialColor) || obj.material.opacity !== opacity) {\n              if (!sphereMaterials.hasOwnProperty(color)) {\n                sphereMaterials[color] = new three.MeshLambertMaterial({\n                  color: materialColor,\n                  transparent: true,\n                  opacity: opacity\n                });\n              }\n\n              obj.material.dispose();\n              obj.material = sphereMaterials[color];\n            }\n          }\n        }\n      });\n    } // Digest links WebGL objects\n\n\n    if (state._flushObjects || hasAnyPropChanged(['graphData', 'linkThreeObject', 'linkThreeObjectExtend', 'linkMaterial', 'linkColor', 'linkWidth', 'linkVisibility', 'linkResolution', 'linkOpacity', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution'])) {\n      var _customObjectAccessor = accessorFn(state.linkThreeObject);\n\n      var _customObjectExtendAccessor = accessorFn(state.linkThreeObjectExtend);\n\n      var customMaterialAccessor = accessorFn(state.linkMaterial);\n\n      var _visibilityAccessor = accessorFn(state.linkVisibility);\n\n      var _colorAccessor = accessorFn(state.linkColor);\n\n      var widthAccessor = accessorFn(state.linkWidth);\n      var cylinderGeometries = {}; // indexed by link width\n\n      var lambertLineMaterials = {}; // for cylinder objects, indexed by link color\n\n      var basicLineMaterials = {}; // for line objects, indexed by link color\n\n      var visibleLinks = state.graphData.links.filter(_visibilityAccessor); // lines digest cycle\n\n      threeDigest(visibleLinks, state.graphScene, {\n        objBindAttr: '__lineObj',\n        purge: state._flushObjects || hasAnyPropChanged([// recreate objects if any of these props have changed\n        'linkThreeObject', 'linkThreeObjectExtend', 'linkWidth']),\n        objFilter: function objFilter(obj) {\n          return obj.__graphObjType === 'link';\n        },\n        createObj: function createObj(link) {\n          var customObj = _customObjectAccessor(link);\n\n          var extendObj = _customObjectExtendAccessor(link);\n\n          if (customObj && state.linkThreeObject === customObj) {\n            // clone object if it's a shared object among all links\n            customObj = customObj.clone();\n          }\n\n          var defaultObj;\n\n          if (!customObj || extendObj) {\n            // construct default line obj\n            var useCylinder = !!widthAccessor(link);\n\n            if (useCylinder) {\n              defaultObj = new three.Mesh();\n            } else {\n              // Use plain line (constant width)\n              var lineGeometry = new three.BufferGeometry();\n              lineGeometry[setAttributeFn]('position', new three.BufferAttribute(new Float32Array(2 * 3), 3));\n              defaultObj = new three.Line(lineGeometry);\n            }\n          }\n\n          var obj;\n\n          if (!customObj) {\n            obj = defaultObj;\n            obj.__graphDefaultObj = true;\n          } else {\n            if (!extendObj) {\n              // use custom object\n              obj = customObj;\n            } else {\n              // extend default with custom in a group\n              obj = new three.Group();\n              obj.__graphDefaultObj = true;\n              obj.add(defaultObj);\n              obj.add(customObj);\n            }\n          }\n\n          obj.renderOrder = 10; // Prevent visual glitches of dark lines on top of nodes by rendering them last\n\n          obj.__graphObjType = 'link'; // Add object type\n\n          return obj;\n        },\n        updateObj: function updateObj(updObj, link) {\n          if (updObj.__graphDefaultObj) {\n            // bypass internal updates for custom link objects\n            // select default object if it's an extended group\n            var obj = updObj.children.length ? updObj.children[0] : updObj;\n            var linkWidth = Math.ceil(widthAccessor(link) * 10) / 10;\n            var useCylinder = !!linkWidth;\n\n            if (useCylinder) {\n              var r = linkWidth / 2;\n              var numSegments = state.linkResolution;\n\n              if (obj.geometry.type !== 'CylinderBufferGeometry' || obj.geometry.parameters.radiusTop !== r || obj.geometry.parameters.radialSegments !== numSegments) {\n                if (!cylinderGeometries.hasOwnProperty(linkWidth)) {\n                  var geometry = new three.CylinderBufferGeometry(r, r, 1, numSegments, 1, false);\n                  geometry[applyMatrix4Fn](new three.Matrix4().makeTranslation(0, 1 / 2, 0));\n                  geometry[applyMatrix4Fn](new three.Matrix4().makeRotationX(Math.PI / 2));\n                  cylinderGeometries[linkWidth] = geometry;\n                }\n\n                obj.geometry.dispose();\n                obj.geometry = cylinderGeometries[linkWidth];\n              }\n            }\n\n            var customMaterial = customMaterialAccessor(link);\n\n            if (customMaterial) {\n              obj.material = customMaterial;\n            } else {\n              var color = _colorAccessor(link);\n\n              var materialColor = new three.Color(colorStr2Hex(color || '#f0f0f0'));\n              var opacity = state.linkOpacity * colorAlpha(color);\n              var materialType = useCylinder ? 'MeshLambertMaterial' : 'LineBasicMaterial';\n\n              if (obj.material.type !== materialType || !obj.material.color.equals(materialColor) || obj.material.opacity !== opacity) {\n                var lineMaterials = useCylinder ? lambertLineMaterials : basicLineMaterials;\n\n                if (!lineMaterials.hasOwnProperty(color)) {\n                  lineMaterials[color] = new three[materialType]({\n                    color: materialColor,\n                    transparent: opacity < 1,\n                    opacity: opacity,\n                    depthWrite: opacity >= 1 // Prevent transparency issues\n\n                  });\n                }\n\n                obj.material.dispose();\n                obj.material = lineMaterials[color];\n              }\n            }\n          }\n        }\n      }); // Arrows digest cycle\n\n      if (state.linkDirectionalArrowLength || changedProps.hasOwnProperty('linkDirectionalArrowLength')) {\n        var arrowLengthAccessor = accessorFn(state.linkDirectionalArrowLength);\n        var arrowColorAccessor = accessorFn(state.linkDirectionalArrowColor);\n        threeDigest(visibleLinks.filter(arrowLengthAccessor), state.graphScene, {\n          objBindAttr: '__arrowObj',\n          objFilter: function objFilter(obj) {\n            return obj.__linkThreeObjType === 'arrow';\n          },\n          createObj: function createObj() {\n            var obj = new three.Mesh(undefined, new three.MeshLambertMaterial({\n              transparent: true\n            }));\n            obj.__linkThreeObjType = 'arrow'; // Add object type\n\n            return obj;\n          },\n          updateObj: function updateObj(obj, link) {\n            var arrowLength = arrowLengthAccessor(link);\n            var numSegments = state.linkDirectionalArrowResolution;\n\n            if (obj.geometry.type !== 'ConeBufferGeometry' || obj.geometry.parameters.height !== arrowLength || obj.geometry.parameters.radialSegments !== numSegments) {\n              var coneGeometry = new three.ConeBufferGeometry(arrowLength * 0.25, arrowLength, numSegments); // Correct orientation\n\n              coneGeometry.translate(0, arrowLength / 2, 0);\n              coneGeometry.rotateX(Math.PI / 2);\n              obj.geometry.dispose();\n              obj.geometry = coneGeometry;\n            }\n\n            obj.material.color = new three.Color(arrowColorAccessor(link) || _colorAccessor(link) || '#f0f0f0');\n            obj.material.opacity = state.linkOpacity * 3;\n          }\n        });\n      } // Photon particles digest cycle\n\n\n      if (state.linkDirectionalParticles || changedProps.hasOwnProperty('linkDirectionalParticles')) {\n        var particlesAccessor = accessorFn(state.linkDirectionalParticles);\n        var particleWidthAccessor = accessorFn(state.linkDirectionalParticleWidth);\n        var particleColorAccessor = accessorFn(state.linkDirectionalParticleColor);\n        var particleMaterials = {}; // indexed by link color\n\n        var particleGeometries = {}; // indexed by particle width\n\n        threeDigest(visibleLinks.filter(particlesAccessor), state.graphScene, {\n          objBindAttr: '__photonsObj',\n          objFilter: function objFilter(obj) {\n            return obj.__linkThreeObjType === 'photons';\n          },\n          createObj: function createObj() {\n            var obj = new three.Group();\n            obj.__linkThreeObjType = 'photons'; // Add object type\n\n            return obj;\n          },\n          updateObj: function updateObj(obj, link) {\n            var numPhotons = Math.round(Math.abs(particlesAccessor(link)));\n            var curPhoton = !!obj.children.length && obj.children[0];\n            var photonR = Math.ceil(particleWidthAccessor(link) * 10) / 10 / 2;\n            var numSegments = state.linkDirectionalParticleResolution;\n            var particleGeometry;\n\n            if (curPhoton && curPhoton.geometry.parameters.radius === photonR && curPhoton.geometry.parameters.widthSegments === numSegments) {\n              particleGeometry = curPhoton.geometry;\n            } else {\n              if (!particleGeometries.hasOwnProperty(photonR)) {\n                particleGeometries[photonR] = new three.SphereBufferGeometry(photonR, numSegments, numSegments);\n              }\n\n              particleGeometry = particleGeometries[photonR];\n              curPhoton && curPhoton.geometry.dispose();\n            }\n\n            var photonColor = particleColorAccessor(link) || _colorAccessor(link) || '#f0f0f0';\n            var materialColor = new three.Color(colorStr2Hex(photonColor));\n            var opacity = state.linkOpacity * 3;\n            var particleMaterial;\n\n            if (curPhoton && curPhoton.material.color.equals(materialColor) && curPhoton.material.opacity === opacity) {\n              particleMaterial = curPhoton.material;\n            } else {\n              if (!particleMaterials.hasOwnProperty(photonColor)) {\n                particleMaterials[photonColor] = new three.MeshLambertMaterial({\n                  color: materialColor,\n                  transparent: true,\n                  opacity: opacity\n                });\n              }\n\n              particleMaterial = particleMaterials[photonColor];\n              curPhoton && curPhoton.material.dispose();\n            } // digest cycle for each photon\n\n\n            threeDigest(_toConsumableArray(new Array(numPhotons)).map(function (_, idx) {\n              return {\n                idx: idx\n              };\n            }), obj, {\n              idAccessor: function idAccessor(d) {\n                return d.idx;\n              },\n              createObj: function createObj() {\n                return new three.Mesh(particleGeometry, particleMaterial);\n              },\n              updateObj: function updateObj(obj) {\n                obj.geometry = particleGeometry;\n                obj.material = particleMaterial;\n              }\n            });\n          }\n        });\n      }\n    }\n\n    state._flushObjects = false; // reset objects refresh flag\n    // simulation engine\n\n    if (hasAnyPropChanged(['graphData', 'nodeId', 'linkSource', 'linkTarget', 'numDimensions', 'forceEngine', 'dagMode', 'dagLevelDistance'])) {\n      state.engineRunning = false; // Pause simulation\n      // parse links\n\n      state.graphData.links.forEach(function (link) {\n        link.source = link[state.linkSource];\n        link.target = link[state.linkTarget];\n      }); // Feed data to force-directed layout\n\n      var isD3Sim = state.forceEngine !== 'ngraph';\n      var layout;\n\n      if (isD3Sim) {\n        // D3-force\n        (layout = state.d3ForceLayout).stop().alpha(1) // re-heat the simulation\n        .numDimensions(state.numDimensions).nodes(state.graphData.nodes); // add links (if link force is still active)\n\n        var linkForce = state.d3ForceLayout.force('link');\n\n        if (linkForce) {\n          linkForce.id(function (d) {\n            return d[state.nodeId];\n          }).links(state.graphData.links);\n        } // setup dag force constraints\n\n\n        var nodeDepths = state.dagMode && getDagDepths(state.graphData, function (node) {\n          return node[state.nodeId];\n        });\n        var maxDepth = Math.max.apply(Math, _toConsumableArray(Object.values(nodeDepths || [])));\n        var dagLevelDistance = state.dagLevelDistance || state.graphData.nodes.length / (maxDepth || 1) * DAG_LEVEL_NODE_RATIO * (['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? 0.7 : 1); // Fix nodes to x,y,z for dag mode\n\n        if (state.dagMode) {\n          var getFFn = function getFFn(fix, invert) {\n            return function (node) {\n              return !fix ? undefined : (nodeDepths[node[state.nodeId]] - maxDepth / 2) * dagLevelDistance * (invert ? -1 : 1);\n            };\n          };\n\n          var fxFn = getFFn(['lr', 'rl'].indexOf(state.dagMode) !== -1, state.dagMode === 'rl');\n          var fyFn = getFFn(['td', 'bu'].indexOf(state.dagMode) !== -1, state.dagMode === 'td');\n          var fzFn = getFFn(['zin', 'zout'].indexOf(state.dagMode) !== -1, state.dagMode === 'zout');\n          state.graphData.nodes.forEach(function (node) {\n            node.fx = fxFn(node);\n            node.fy = fyFn(node);\n            node.fz = fzFn(node);\n          });\n        } // Use radial force for radial dags\n\n\n        state.d3ForceLayout.force('dagRadial', ['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? forceRadial(function (node) {\n          var nodeDepth = nodeDepths[node[state.nodeId]];\n          return (state.dagMode === 'radialin' ? maxDepth - nodeDepth : nodeDepth) * dagLevelDistance;\n        }).strength(1) : null);\n      } else {\n        // ngraph\n        var _graph = ngraph.graph();\n\n        state.graphData.nodes.forEach(function (node) {\n          _graph.addNode(node[state.nodeId]);\n        });\n        state.graphData.links.forEach(function (link) {\n          _graph.addLink(link.source, link.target);\n        });\n        layout = ngraph['forcelayout' + (state.numDimensions === 2 ? '' : '3d')](_graph);\n        layout.graph = _graph; // Attach graph reference to layout\n      }\n\n      for (var i = 0; i < state.warmupTicks && !(isD3Sim && state.d3AlphaMin > 0 && state.d3ForceLayout.alpha() < state.d3AlphaMin); i++) {\n        layout[isD3Sim ? \"tick\" : \"step\"]();\n      } // Initial ticks before starting to render\n\n\n      state.layout = layout;\n      this.resetCountdown();\n    }\n\n    state.engineRunning = true; // resume simulation\n\n    state.onFinishUpdate();\n  }\n});\n\nfunction fromKapsule (kapsule) {\n  var baseClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object;\n  var initKapsuleWithSelf = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var FromKapsule = /*#__PURE__*/function (_baseClass) {\n    _inherits(FromKapsule, _baseClass);\n\n    var _super = _createSuper(FromKapsule);\n\n    function FromKapsule() {\n      var _this;\n\n      _classCallCheck(this, FromKapsule);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.__kapsuleInstance = kapsule().apply(void 0, [].concat(_toConsumableArray(initKapsuleWithSelf ? [_assertThisInitialized(_this)] : []), args));\n      return _this;\n    }\n\n    return FromKapsule;\n  }(baseClass); // attach kapsule props/methods to class prototype\n\n\n  Object.keys(kapsule()).forEach(function (m) {\n    return FromKapsule.prototype[m] = function () {\n      var _this$__kapsuleInstan;\n\n      var returnVal = (_this$__kapsuleInstan = this.__kapsuleInstance)[m].apply(_this$__kapsuleInstan, arguments);\n\n      return returnVal === this.__kapsuleInstance ? this // chain based on this class, not the kapsule obj\n      : returnVal;\n    };\n  });\n  return FromKapsule;\n}\n\nvar three$1 = window.THREE ? window.THREE : {\n  Group: Group\n}; // Prefer consumption from global THREE, if exists\nvar threeForcegraph = fromKapsule(ForceGraph, three$1.Group, true);\n\nexport default threeForcegraph;\n","/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n */\n\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar TrackballControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tvar _this = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.ZOOM, RIGHT: MOUSE.PAN };\n\n\t// internals\n\n\tthis.target = new Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new Vector3();\n\tvar lastZoom = 1;\n\n\tvar _state = STATE.NONE,\n\t\t_keyState = STATE.NONE,\n\n\t\t_eye = new Vector3(),\n\n\t\t_movePrev = new Vector2(),\n\t\t_moveCurr = new Vector2(),\n\n\t\t_lastAxis = new Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new Vector2(),\n\t\t_zoomEnd = new Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new Vector2(),\n\t\t_panEnd = new Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new Vector3(),\n\t\t\tquaternion = new Quaternion(),\n\t\t\teyeDirection = new Vector3(),\n\t\t\tobjectUpDirection = new Vector3(),\n\t\t\tobjectSidewaysDirection = new Vector3(),\n\t\t\tmoveDirection = new Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t_this.object.zoom *= factor;\n\t\t\t\t_this.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t\t_this.object.zoom /= factor;\n\t\t\t\t\t_this.object.updateProjectionMatrix();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new Vector2(),\n\t\t\tobjectUp = new Vector3(),\n\t\t\tpan = new Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tif ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tvar scale_x = ( _this.object.right - _this.object.left ) / _this.object.zoom / _this.domElement.clientWidth;\n\t\t\t\t\tvar scale_y = ( _this.object.top - _this.object.bottom ) / _this.object.zoom / _this.domElement.clientWidth;\n\n\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t}\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( ! _this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t_this.checkDistances();\n\n\t\t\t_this.object.lookAt( _this.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t_this.object.lookAt( _this.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS || lastZoom !== _this.object.zoom ) {\n\n\t\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( _this.object.position );\n\t\t\t\tlastZoom = _this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_keyState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\t\t_this.object.zoom = _this.zoom0;\n\n\t\t_this.object.updateProjectionMatrix();\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\t\tlastZoom = _this.object.zoom;\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\n\n\t\t\t_keyState = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\n\n\t\t\t_keyState = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\n\n\t\t\t_keyState = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup() {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_keyState = STATE.NONE;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase _this.mouseButtons.LEFT:\n\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase _this.mouseButtons.MIDDLE:\n\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase _this.mouseButtons.RIGHT:\n\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t_state = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tif ( _this.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTrackballControls.prototype = Object.create( EventDispatcher.prototype );\nTrackballControls.prototype.constructor = TrackballControls;\n\nexport { TrackballControls };\n","/**\n * @author James Baicoianu / http://www.baicoianu.com/\n */\n\nimport {\n\tQuaternion,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar FlyControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.FlyControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document;\n\n\t}\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\tif ( domElement ) this.domElement.setAttribute( 'tabindex', - 1 );\n\n\t// API\n\n\tthis.movementSpeed = 1.0;\n\tthis.rollSpeed = 0.005;\n\n\tthis.dragToLook = false;\n\tthis.autoForward = false;\n\n\t// disable default target object behavior\n\n\t// internals\n\n\tthis.tmpQuaternion = new Quaternion();\n\n\tthis.mouseStatus = 0;\n\n\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\tthis.moveVector = new Vector3( 0, 0, 0 );\n\tthis.rotationVector = new Vector3( 0, 0, 0 );\n\n\tthis.keydown = function ( event ) {\n\n\t\tif ( event.altKey ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = .1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 1; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 1; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 1; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 1; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 1; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 1; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 1; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 1; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 1; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 1; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 1; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 1; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.keyup = function ( event ) {\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = 1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 0; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 0; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 0; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 0; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 0; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 0; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 0; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 0; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 0; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 0; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 0; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 0; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.mousedown = function ( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus ++;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 1; break;\n\t\t\t\tcase 2: this.moveState.back = 1; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t};\n\n\tthis.mousemove = function ( event ) {\n\n\t\tif ( ! this.dragToLook || this.mouseStatus > 0 ) {\n\n\t\t\tvar container = this.getContainerDimensions();\n\t\t\tvar halfWidth = container.size[ 0 ] / 2;\n\t\t\tvar halfHeight = container.size[ 1 ] / 2;\n\n\t\t\tthis.moveState.yawLeft = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth ) / halfWidth;\n\t\t\tthis.moveState.pitchDown = ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\t\tthis.updateRotationVector();\n\n\t\t}\n\n\t};\n\n\tthis.mouseup = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus --;\n\n\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 0; break;\n\t\t\t\tcase 2: this.moveState.back = 0; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.update = function ( delta ) {\n\n\t\tvar moveMult = delta * this.movementSpeed;\n\t\tvar rotMult = delta * this.rollSpeed;\n\n\t\tthis.object.translateX( this.moveVector.x * moveMult );\n\t\tthis.object.translateY( this.moveVector.y * moveMult );\n\t\tthis.object.translateZ( this.moveVector.z * moveMult );\n\n\t\tthis.tmpQuaternion.set( this.rotationVector.x * rotMult, this.rotationVector.y * rotMult, this.rotationVector.z * rotMult, 1 ).normalize();\n\t\tthis.object.quaternion.multiply( this.tmpQuaternion );\n\n\t\t// expose the rotation vector for convenience\n\t\tthis.object.rotation.setFromQuaternion( this.object.quaternion, this.object.rotation.order );\n\n\n\t};\n\n\tthis.updateMovementVector = function () {\n\n\t\tvar forward = ( this.moveState.forward || ( this.autoForward && ! this.moveState.back ) ) ? 1 : 0;\n\n\t\tthis.moveVector.x = ( - this.moveState.left + this.moveState.right );\n\t\tthis.moveVector.y = ( - this.moveState.down + this.moveState.up );\n\t\tthis.moveVector.z = ( - forward + this.moveState.back );\n\n\t\t//console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n\n\t};\n\n\tthis.updateRotationVector = function () {\n\n\t\tthis.rotationVector.x = ( - this.moveState.pitchDown + this.moveState.pitchUp );\n\t\tthis.rotationVector.y = ( - this.moveState.yawRight + this.moveState.yawLeft );\n\t\tthis.rotationVector.z = ( - this.moveState.rollRight + this.moveState.rollLeft );\n\n\t\t//console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n\n\t};\n\n\tthis.getContainerDimensions = function () {\n\n\t\tif ( this.domElement != document ) {\n\n\t\t\treturn {\n\t\t\t\tsize: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\toffset: [ this.domElement.offsetLeft, this.domElement.offsetTop ]\n\t\t\t};\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\tsize: [ window.innerWidth, window.innerHeight ],\n\t\t\t\toffset: [ 0, 0 ]\n\t\t\t};\n\n\t\t}\n\n\t};\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', _mousedown, false );\n\t\tthis.domElement.removeEventListener( 'mousemove', _mousemove, false );\n\t\tthis.domElement.removeEventListener( 'mouseup', _mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', _keydown, false );\n\t\twindow.removeEventListener( 'keyup', _keyup, false );\n\n\t};\n\n\tvar _mousemove = bind( this, this.mousemove );\n\tvar _mousedown = bind( this, this.mousedown );\n\tvar _mouseup = bind( this, this.mouseup );\n\tvar _keydown = bind( this, this.keydown );\n\tvar _keyup = bind( this, this.keyup );\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\tthis.domElement.addEventListener( 'mousemove', _mousemove, false );\n\tthis.domElement.addEventListener( 'mousedown', _mousedown, false );\n\tthis.domElement.addEventListener( 'mouseup', _mouseup, false );\n\n\twindow.addEventListener( 'keydown', _keydown, false );\n\twindow.addEventListener( 'keyup', _keyup, false );\n\n\tthis.updateMovementVector();\n\tthis.updateRotationVector();\n\n};\n\nexport { FlyControls };\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _wrapNativeSuper from '@babel/runtime/helpers/esm/wrapNativeSuper';\nimport _taggedTemplateLiteralLoose from '@babel/runtime/helpers/esm/taggedTemplateLiteralLoose';\n\nfunction last() {\n  var _ref;\n\n  return _ref = arguments.length - 1, _ref < 0 || arguments.length <= _ref ? undefined : arguments[_ref];\n}\n\nfunction negation(a) {\n  return -a;\n}\n\nfunction addition(a, b) {\n  return a + b;\n}\n\nfunction subtraction(a, b) {\n  return a - b;\n}\n\nfunction multiplication(a, b) {\n  return a * b;\n}\n\nfunction division(a, b) {\n  return a / b;\n}\n\nfunction factorial(a) {\n  if (a % 1 || !(+a >= 0)) return NaN;\n  if (a > 170) return Infinity;else if (a === 0) return 1;else {\n    return a * factorial(a - 1);\n  }\n}\n\nfunction power(a, b) {\n  return Math.pow(a, b);\n}\n\nfunction sqrt(a) {\n  return Math.sqrt(a);\n}\n\nfunction max() {\n  return Math.max.apply(Math, arguments);\n}\n\nfunction min() {\n  return Math.min.apply(Math, arguments);\n}\n\nfunction comma() {\n  return Array.of.apply(Array, arguments);\n}\n\nvar defaultMathSymbols = {\n  symbols: {\n    '!': {\n      postfix: {\n        symbol: '!',\n        f: factorial,\n        notation: 'postfix',\n        precedence: 6,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '!',\n      regSymbol: '!'\n    },\n    '^': {\n      infix: {\n        symbol: '^',\n        f: power,\n        notation: 'infix',\n        precedence: 5,\n        rightToLeft: 1,\n        argCount: 2\n      },\n      symbol: '^',\n      regSymbol: '\\\\^'\n    },\n    '*': {\n      infix: {\n        symbol: '*',\n        f: multiplication,\n        notation: 'infix',\n        precedence: 4,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: '*',\n      regSymbol: '\\\\*'\n    },\n    '/': {\n      infix: {\n        symbol: '/',\n        f: division,\n        notation: 'infix',\n        precedence: 4,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: '/',\n      regSymbol: '/'\n    },\n    '+': {\n      infix: {\n        symbol: '+',\n        f: addition,\n        notation: 'infix',\n        precedence: 2,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      prefix: {\n        symbol: '+',\n        f: last,\n        notation: 'prefix',\n        precedence: 3,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '+',\n      regSymbol: '\\\\+'\n    },\n    '-': {\n      infix: {\n        symbol: '-',\n        f: subtraction,\n        notation: 'infix',\n        precedence: 2,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      prefix: {\n        symbol: '-',\n        f: negation,\n        notation: 'prefix',\n        precedence: 3,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '-',\n      regSymbol: '-'\n    },\n    ',': {\n      infix: {\n        symbol: ',',\n        f: comma,\n        notation: 'infix',\n        precedence: 1,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: ',',\n      regSymbol: ','\n    },\n    '(': {\n      prefix: {\n        symbol: '(',\n        f: last,\n        notation: 'prefix',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '(',\n      regSymbol: '\\\\('\n    },\n    ')': {\n      postfix: {\n        symbol: ')',\n        f: undefined,\n        notation: 'postfix',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: ')',\n      regSymbol: '\\\\)'\n    },\n    min: {\n      func: {\n        symbol: 'min',\n        f: min,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'min',\n      regSymbol: 'min\\\\b'\n    },\n    max: {\n      func: {\n        symbol: 'max',\n        f: max,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'max',\n      regSymbol: 'max\\\\b'\n    },\n    sqrt: {\n      func: {\n        symbol: 'sqrt',\n        f: sqrt,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'sqrt',\n      regSymbol: 'sqrt\\\\b'\n    }\n  }\n};\n\n// based on https://github.com/styled-components/styled-components/blob/fcf6f3804c57a14dd7984dfab7bc06ee2edca044/src/utils/error.js\n\n/**\n * Parse errors.md and turn it into a simple hash of code: message\n * @private\n */\nvar ERRORS = {\n  \"1\": \"Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).\\n\\n\",\n  \"2\": \"Passed invalid arguments to hsla, please pass multiple numbers e.g. hsla(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).\\n\\n\",\n  \"3\": \"Passed an incorrect argument to a color function, please pass a string representation of a color.\\n\\n\",\n  \"4\": \"Couldn't generate valid rgb string from %s, it returned %s.\\n\\n\",\n  \"5\": \"Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.\\n\\n\",\n  \"6\": \"Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).\\n\\n\",\n  \"7\": \"Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).\\n\\n\",\n  \"8\": \"Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.\\n\\n\",\n  \"9\": \"Please provide a number of steps to the modularScale helper.\\n\\n\",\n  \"10\": \"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\\n\\n\",\n  \"11\": \"Invalid value passed as base to modularScale, expected number or em string but got \\\"%s\\\"\\n\\n\",\n  \"12\": \"Expected a string ending in \\\"px\\\" or a number passed as the first argument to %s(), got \\\"%s\\\" instead.\\n\\n\",\n  \"13\": \"Expected a string ending in \\\"px\\\" or a number passed as the second argument to %s(), got \\\"%s\\\" instead.\\n\\n\",\n  \"14\": \"Passed invalid pixel value (\\\"%s\\\") to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"15\": \"Passed invalid base value (\\\"%s\\\") to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"16\": \"You must provide a template to this method.\\n\\n\",\n  \"17\": \"You passed an unsupported selector state to this method.\\n\\n\",\n  \"18\": \"minScreen and maxScreen must be provided as stringified numbers with the same units.\\n\\n\",\n  \"19\": \"fromSize and toSize must be provided as stringified numbers with the same units.\\n\\n\",\n  \"20\": \"expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\\n\\n\",\n  \"21\": \"expects the objects in the first argument array to have the properties `prop`, `fromSize`, and `toSize`.\\n\\n\",\n  \"22\": \"expects the first argument object to have the properties `prop`, `fromSize`, and `toSize`.\\n\\n\",\n  \"23\": \"fontFace expects a name of a font-family.\\n\\n\",\n  \"24\": \"fontFace expects either the path to the font file(s) or a name of a local copy.\\n\\n\",\n  \"25\": \"fontFace expects localFonts to be an array.\\n\\n\",\n  \"26\": \"fontFace expects fileFormats to be an array.\\n\\n\",\n  \"27\": \"radialGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"28\": \"Please supply a filename to retinaImage() as the first argument.\\n\\n\",\n  \"29\": \"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\\n\\n\",\n  \"30\": \"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\\n\\n\",\n  \"31\": \"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation\\n\\n\",\n  \"32\": \"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s')\\n\\n\",\n  \"33\": \"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation\\n\\n\",\n  \"34\": \"borderRadius expects a radius value as a string or number as the second argument.\\n\\n\",\n  \"35\": \"borderRadius expects one of \\\"top\\\", \\\"bottom\\\", \\\"left\\\" or \\\"right\\\" as the first argument.\\n\\n\",\n  \"36\": \"Property must be a string value.\\n\\n\",\n  \"37\": \"Syntax Error at %s.\\n\\n\",\n  \"38\": \"Formula contains a function that needs parentheses at %s.\\n\\n\",\n  \"39\": \"Formula is missing closing parenthesis at %s.\\n\\n\",\n  \"40\": \"Formula has too many closing parentheses at %s.\\n\\n\",\n  \"41\": \"All values in a formula must have the same unit or be unitless.\\n\\n\",\n  \"42\": \"Please provide a number of steps to the modularScale helper.\\n\\n\",\n  \"43\": \"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\\n\\n\",\n  \"44\": \"Invalid value passed as base to modularScale, expected number or em/rem string but got %s.\\n\\n\",\n  \"45\": \"Passed invalid argument to hslToColorString, please pass a HslColor or HslaColor object.\\n\\n\",\n  \"46\": \"Passed invalid argument to rgbToColorString, please pass a RgbColor or RgbaColor object.\\n\\n\",\n  \"47\": \"minScreen and maxScreen must be provided as stringified numbers with the same units.\\n\\n\",\n  \"48\": \"fromSize and toSize must be provided as stringified numbers with the same units.\\n\\n\",\n  \"49\": \"Expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\\n\\n\",\n  \"50\": \"Expects the objects in the first argument array to have the properties prop, fromSize, and toSize.\\n\\n\",\n  \"51\": \"Expects the first argument object to have the properties prop, fromSize, and toSize.\\n\\n\",\n  \"52\": \"fontFace expects either the path to the font file(s) or a name of a local copy.\\n\\n\",\n  \"53\": \"fontFace expects localFonts to be an array.\\n\\n\",\n  \"54\": \"fontFace expects fileFormats to be an array.\\n\\n\",\n  \"55\": \"fontFace expects a name of a font-family.\\n\\n\",\n  \"56\": \"linearGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"57\": \"radialGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"58\": \"Please supply a filename to retinaImage() as the first argument.\\n\\n\",\n  \"59\": \"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\\n\\n\",\n  \"60\": \"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\\n\\n\",\n  \"61\": \"Property must be a string value.\\n\\n\",\n  \"62\": \"borderRadius expects a radius value as a string or number as the second argument.\\n\\n\",\n  \"63\": \"borderRadius expects one of \\\"top\\\", \\\"bottom\\\", \\\"left\\\" or \\\"right\\\" as the first argument.\\n\\n\",\n  \"64\": \"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation.\\n\\n\",\n  \"65\": \"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s').\\n\\n\",\n  \"66\": \"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation.\\n\\n\",\n  \"67\": \"You must provide a template to this method.\\n\\n\",\n  \"68\": \"You passed an unsupported selector state to this method.\\n\\n\",\n  \"69\": \"Expected a string ending in \\\"px\\\" or a number passed as the first argument to %s(), got %s instead.\\n\\n\",\n  \"70\": \"Expected a string ending in \\\"px\\\" or a number passed as the second argument to %s(), got %s instead.\\n\\n\",\n  \"71\": \"Passed invalid pixel value %s to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"72\": \"Passed invalid base value %s to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"73\": \"Please provide a valid CSS variable.\\n\\n\",\n  \"74\": \"CSS variable not found.\\n\"\n};\n/**\n * super basic version of sprintf\n * @private\n */\n\nfunction format() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var a = args[0];\n  var b = [];\n  var c;\n\n  for (c = 1; c < args.length; c += 1) {\n    b.push(args[c]);\n  }\n\n  b.forEach(function (d) {\n    a = a.replace(/%[a-z]/, d);\n  });\n  return a;\n}\n/**\n * Create an error file out of errors.md for development and a simple web link to the full errors\n * in production mode.\n * @private\n */\n\n\nvar PolishedError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(PolishedError, _Error);\n\n  function PolishedError(code) {\n    var _this;\n\n    if (process.env.NODE_ENV === 'production') {\n      _this = _Error.call(this, \"An error occurred. See https://github.com/styled-components/polished/blob/master/src/internalHelpers/errors.md#\" + code + \" for more information.\") || this;\n    } else {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      _this = _Error.call(this, format.apply(void 0, [ERRORS[code]].concat(args))) || this;\n    }\n\n    return _assertThisInitialized(_this);\n  }\n\n  return PolishedError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar unitRegExp = /((?!\\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\\D|$)|ged|darg?|nrut)/g; // Merges additional math functionality into the defaults.\n\nfunction mergeSymbolMaps(additionalSymbols) {\n  var symbolMap = {};\n  symbolMap.symbols = additionalSymbols ? _extends({}, defaultMathSymbols.symbols, {}, additionalSymbols.symbols) : _extends({}, defaultMathSymbols.symbols);\n  return symbolMap;\n}\n\nfunction exec(operators, values) {\n  var _ref;\n\n  var op = operators.pop();\n  values.push(op.f.apply(op, (_ref = []).concat.apply(_ref, values.splice(-op.argCount))));\n  return op.precedence;\n}\n\nfunction calculate(expression, additionalSymbols) {\n  var symbolMap = mergeSymbolMaps(additionalSymbols);\n  var match;\n  var operators = [symbolMap.symbols['('].prefix];\n  var values = [];\n  var pattern = new RegExp( // Pattern for numbers\n  \"\\\\d+(?:\\\\.\\\\d+)?|\" + // ...and patterns for individual operators/function names\n  Object.keys(symbolMap.symbols).map(function (key) {\n    return symbolMap.symbols[key];\n  }) // longer symbols should be listed first\n  // $FlowFixMe\n  .sort(function (a, b) {\n    return b.symbol.length - a.symbol.length;\n  }) // $FlowFixMe\n  .map(function (val) {\n    return val.regSymbol;\n  }).join('|') + \"|(\\\\S)\", 'g');\n  pattern.lastIndex = 0; // Reset regular expression object\n\n  var afterValue = false;\n\n  do {\n    match = pattern.exec(expression);\n\n    var _ref2 = match || [')', undefined],\n        token = _ref2[0],\n        bad = _ref2[1];\n\n    var notNumber = symbolMap.symbols[token];\n    var notNewValue = notNumber && !notNumber.prefix && !notNumber.func;\n    var notAfterValue = !notNumber || !notNumber.postfix && !notNumber.infix; // Check for syntax errors:\n\n    if (bad || (afterValue ? notAfterValue : notNewValue)) {\n      throw new PolishedError(37, match ? match.index : expression.length, expression);\n    }\n\n    if (afterValue) {\n      // We either have an infix or postfix operator (they should be mutually exclusive)\n      var curr = notNumber.postfix || notNumber.infix;\n\n      do {\n        var prev = operators[operators.length - 1];\n        if ((curr.precedence - prev.precedence || prev.rightToLeft) > 0) break; // Apply previous operator, since it has precedence over current one\n      } while (exec(operators, values)); // Exit loop after executing an opening parenthesis or function\n\n\n      afterValue = curr.notation === 'postfix';\n\n      if (curr.symbol !== ')') {\n        operators.push(curr); // Postfix always has precedence over any operator that follows after it\n\n        if (afterValue) exec(operators, values);\n      }\n    } else if (notNumber) {\n      // prefix operator or function\n      operators.push(notNumber.prefix || notNumber.func);\n\n      if (notNumber.func) {\n        // Require an opening parenthesis\n        match = pattern.exec(expression);\n\n        if (!match || match[0] !== '(') {\n          throw new PolishedError(38, match ? match.index : expression.length, expression);\n        }\n      }\n    } else {\n      // number\n      values.push(+token);\n      afterValue = true;\n    }\n  } while (match && operators.length);\n\n  if (operators.length) {\n    throw new PolishedError(39, match ? match.index : expression.length, expression);\n  } else if (match) {\n    throw new PolishedError(40, match ? match.index : expression.length, expression);\n  } else {\n    return values.pop();\n  }\n}\n\nfunction reverseString(str) {\n  return str.split('').reverse().join('');\n}\n/**\n * Helper for doing math with CSS Units. Accepts a formula as a string. All values in the formula must have the same unit (or be unitless). Supports complex formulas utliziing addition, subtraction, multiplication, division, square root, powers, factorial, min, max, as well as parentheses for order of operation.\n *\n *In cases where you need to do calculations with mixed units where one unit is a [relative length unit](https://developer.mozilla.org/en-US/docs/Web/CSS/length#Relative_length_units), you will want to use [CSS Calc](https://developer.mozilla.org/en-US/docs/Web/CSS/calc).\n *\n * *warning* While we've done everything possible to ensure math safely evalutes formulas expressed as strings, you should always use extreme caution when passing `math` user provided values.\n * @example\n * // Styles as object usage\n * const styles = {\n *   fontSize: math('12rem + 8rem'),\n *   fontSize: math('(12px + 2px) * 3'),\n *   fontSize: math('3px^2 + sqrt(4)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   fontSize: ${math('12rem + 8rem')};\n *   fontSize: ${math('(12px + 2px) * 3')};\n *   fontSize: ${math('3px^2 + sqrt(4)')};\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   fontSize: '20rem',\n *   fontSize: '42px',\n *   fontSize: '11px',\n * }\n */\n\n\nfunction math(formula, additionalSymbols) {\n  var reversedFormula = reverseString(formula);\n  var formulaMatch = reversedFormula.match(unitRegExp); // Check that all units are the same\n\n  if (formulaMatch && !formulaMatch.every(function (unit) {\n    return unit === formulaMatch[0];\n  })) {\n    throw new PolishedError(41);\n  }\n\n  var cleanFormula = reverseString(reversedFormula.replace(unitRegExp, ''));\n  return \"\" + calculate(cleanFormula, additionalSymbols) + (formulaMatch ? reverseString(formulaMatch[0]) : '');\n}\n\nvar cssVariableRegex = /--[\\S]*/g;\n/**\n * Fetches the value of a passed CSS Variable.\n *\n * Passthrough can be enabled (off by default) for when you are unsure of the input and want non-variable values to be returned instead of an error.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'background': cssVar('--background-color'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${cssVar('--background-color')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'background': 'red'\n * }\n */\n\nfunction cssVar(cssVariable, passThrough) {\n  if (!cssVariable || !cssVariable.match(cssVariableRegex)) {\n    if (passThrough) return cssVariable;\n    throw new PolishedError(73);\n  }\n\n  var variableValue;\n  /* eslint-disable */\n\n  /* istanbul ignore next */\n\n  if (document.documentElement !== null) {\n    variableValue = getComputedStyle(document.documentElement).getPropertyValue(cssVariable);\n  }\n  /* eslint-enable */\n\n\n  if (variableValue) {\n    return variableValue.trim();\n  } else {\n    throw new PolishedError(74);\n  }\n}\n\n// @private\nfunction capitalizeString(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar positionMap = ['Top', 'Right', 'Bottom', 'Left'];\n\nfunction generateProperty(property, position) {\n  if (!property) return position.toLowerCase();\n  var splitProperty = property.split('-');\n\n  if (splitProperty.length > 1) {\n    splitProperty.splice(1, 0, position);\n    return splitProperty.reduce(function (acc, val) {\n      return \"\" + acc + capitalizeString(val);\n    });\n  }\n\n  var joinedProperty = property.replace(/([a-z])([A-Z])/g, \"$1\" + position + \"$2\");\n  return property === joinedProperty ? \"\" + property + position : joinedProperty;\n}\n\nfunction generateStyles(property, valuesWithDefaults) {\n  var styles = {};\n\n  for (var i = 0; i < valuesWithDefaults.length; i += 1) {\n    if (valuesWithDefaults[i] || valuesWithDefaults[i] === 0) {\n      styles[generateProperty(property, positionMap[i])] = valuesWithDefaults[i];\n    }\n  }\n\n  return styles;\n}\n/**\n * Enables shorthand for direction-based properties. It accepts a property (hyphenated or camelCased) and up to four values that map to top, right, bottom, and left, respectively. You can optionally pass an empty string to get only the directional values as properties. You can also optionally pass a null argument for a directional value to ignore it.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...directionalProperty('padding', '12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${directionalProperty('padding', '12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'paddingTop': '12px',\n *   'paddingRight': '24px',\n *   'paddingBottom': '36px',\n *   'paddingLeft': '48px'\n * }\n */\n\n\nfunction directionalProperty(property) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  //  prettier-ignore\n  var firstValue = values[0],\n      _values$ = values[1],\n      secondValue = _values$ === void 0 ? firstValue : _values$,\n      _values$2 = values[2],\n      thirdValue = _values$2 === void 0 ? firstValue : _values$2,\n      _values$3 = values[3],\n      fourthValue = _values$3 === void 0 ? secondValue : _values$3;\n  var valuesWithDefaults = [firstValue, secondValue, thirdValue, fourthValue];\n  return generateStyles(property, valuesWithDefaults);\n}\n\n/**\n * Check if a string ends with something\n * @private\n */\nfunction endsWith (string, suffix) {\n  return string.substr(-suffix.length) === suffix;\n}\n\nvar cssRegex = /^([+-]?(?:\\d+|\\d*\\.\\d+))([a-z]*|%)$/;\n/**\n * Returns a given CSS value minus its unit of measure.\n *\n * @deprecated - stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   '--dimension': stripUnit('100px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   --dimension: ${stripUnit('100px')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   '--dimension': 100\n * }\n */\n\nfunction stripUnit(value, unitReturn) {\n  if (typeof value !== 'string') return unitReturn ? [value, undefined] : value;\n  var matchedValue = value.match(cssRegex);\n\n  if (unitReturn) {\n    // eslint-disable-next-line no-console\n    console.warn(\"stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit.\");\n    if (matchedValue) return [parseFloat(value), matchedValue[2]];\n    return [value, undefined];\n  }\n\n  if (matchedValue) return parseFloat(value);\n  return value;\n}\n\n/**\n * Factory function that creates pixel-to-x converters\n * @private\n */\n\nvar pxtoFactory = function pxtoFactory(to) {\n  return function (pxval, base) {\n    if (base === void 0) {\n      base = '16px';\n    }\n\n    var newPxval = pxval;\n    var newBase = base;\n\n    if (typeof pxval === 'string') {\n      if (!endsWith(pxval, 'px')) {\n        throw new PolishedError(69, to, pxval);\n      }\n\n      newPxval = stripUnit(pxval);\n    }\n\n    if (typeof base === 'string') {\n      if (!endsWith(base, 'px')) {\n        throw new PolishedError(70, to, base);\n      }\n\n      newBase = stripUnit(base);\n    }\n\n    if (typeof newPxval === 'string') {\n      throw new PolishedError(71, pxval, to);\n    }\n\n    if (typeof newBase === 'string') {\n      throw new PolishedError(72, base, to);\n    }\n\n    return \"\" + newPxval / newBase + to;\n  };\n};\n\n/**\n * Convert pixel value to ems. The default base value is 16px, but can be changed by passing a\n * second argument to the function.\n * @function\n * @param {string|number} pxval\n * @param {string|number} [base='16px']\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': em('16px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${em('16px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '1em'\n * }\n */\n\nvar em = /*#__PURE__*/pxtoFactory('em');\n\nvar cssRegex$1 = /^([+-]?(?:\\d+|\\d*\\.\\d+))([a-z]*|%)$/;\n/**\n * Returns a given CSS value and its unit as elements of an array.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   '--dimension': getValueAndUnit('100px')[0],\n *   '--unit': getValueAndUnit('100px')[1],\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   --dimension: ${getValueAndUnit('100px')[0]};\n *   --unit: ${getValueAndUnit('100px')[1]};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   '--dimension': 100,\n *   '--unit': 'px',\n * }\n */\n\nfunction getValueAndUnit(value) {\n  if (typeof value !== 'string') return [value, ''];\n  var matchedValue = value.match(cssRegex$1);\n  if (matchedValue) return [parseFloat(value), matchedValue[2]];\n  return [value, undefined];\n}\n\nvar ratioNames = {\n  minorSecond: 1.067,\n  majorSecond: 1.125,\n  minorThird: 1.2,\n  majorThird: 1.25,\n  perfectFourth: 1.333,\n  augFourth: 1.414,\n  perfectFifth: 1.5,\n  minorSixth: 1.6,\n  goldenSection: 1.618,\n  majorSixth: 1.667,\n  minorSeventh: 1.778,\n  majorSeventh: 1.875,\n  octave: 2,\n  majorTenth: 2.5,\n  majorEleventh: 2.667,\n  majorTwelfth: 3,\n  doubleOctave: 4\n};\n\nfunction getRatio(ratioName) {\n  return ratioNames[ratioName];\n}\n/**\n * Establish consistent measurements and spacial relationships throughout your projects by incrementing an em or rem value up or down a defined scale. We provide a list of commonly used scales as pre-defined variables.\n * @example\n * // Styles as object usage\n * const styles = {\n *    // Increment two steps up the default scale\n *   'fontSize': modularScale(2)\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *    // Increment two steps up the default scale\n *   fontSize: ${modularScale(2)}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'fontSize': '1.77689em'\n * }\n */\n\n\nfunction modularScale(steps, base, ratio) {\n  if (base === void 0) {\n    base = '1em';\n  }\n\n  if (ratio === void 0) {\n    ratio = 1.333;\n  }\n\n  if (typeof steps !== 'number') {\n    throw new PolishedError(42);\n  }\n\n  if (typeof ratio === 'string' && !ratioNames[ratio]) {\n    throw new PolishedError(43);\n  }\n\n  var _ref = typeof base === 'string' ? getValueAndUnit(base) : [base, ''],\n      realBase = _ref[0],\n      unit = _ref[1];\n\n  var realRatio = typeof ratio === 'string' ? getRatio(ratio) : ratio;\n\n  if (typeof realBase === 'string') {\n    throw new PolishedError(44, base);\n  }\n\n  return \"\" + realBase * Math.pow(realRatio, steps) + (unit || '');\n}\n\n/**\n * Convert pixel value to rems. The default base value is 16px, but can be changed by passing a\n * second argument to the function.\n * @function\n * @param {string|number} pxval\n * @param {string|number} [base='16px']\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': rem('16px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${rem('16px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '1rem'\n * }\n */\n\nvar rem = /*#__PURE__*/pxtoFactory('rem');\n\n/**\n * Returns a CSS calc formula for linear interpolation of a property between two values. Accepts optional minScreen (defaults to '320px') and maxScreen (defaults to '1200px').\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   fontSize: between('20px', '100px', '400px', '1000px'),\n *   fontSize: between('20px', '100px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   fontSize: ${between('20px', '100px', '400px', '1000px')};\n *   fontSize: ${between('20px', '100px')}\n * `\n *\n * // CSS as JS Output\n *\n * h1: {\n *   'fontSize': 'calc(-33.33333333333334px + 13.333333333333334vw)',\n *   'fontSize': 'calc(-9.090909090909093px + 9.090909090909092vw)'\n * }\n */\n\nfunction between(fromSize, toSize, minScreen, maxScreen) {\n  if (minScreen === void 0) {\n    minScreen = '320px';\n  }\n\n  if (maxScreen === void 0) {\n    maxScreen = '1200px';\n  }\n\n  var _getValueAndUnit = getValueAndUnit(fromSize),\n      unitlessFromSize = _getValueAndUnit[0],\n      fromSizeUnit = _getValueAndUnit[1];\n\n  var _getValueAndUnit2 = getValueAndUnit(toSize),\n      unitlessToSize = _getValueAndUnit2[0],\n      toSizeUnit = _getValueAndUnit2[1];\n\n  var _getValueAndUnit3 = getValueAndUnit(minScreen),\n      unitlessMinScreen = _getValueAndUnit3[0],\n      minScreenUnit = _getValueAndUnit3[1];\n\n  var _getValueAndUnit4 = getValueAndUnit(maxScreen),\n      unitlessMaxScreen = _getValueAndUnit4[0],\n      maxScreenUnit = _getValueAndUnit4[1];\n\n  if (typeof unitlessMinScreen !== 'number' || typeof unitlessMaxScreen !== 'number' || !minScreenUnit || !maxScreenUnit || minScreenUnit !== maxScreenUnit) {\n    throw new PolishedError(47);\n  }\n\n  if (typeof unitlessFromSize !== 'number' || typeof unitlessToSize !== 'number' || fromSizeUnit !== toSizeUnit) {\n    throw new PolishedError(48);\n  }\n\n  var slope = (unitlessFromSize - unitlessToSize) / (unitlessMinScreen - unitlessMaxScreen);\n  var base = unitlessToSize - slope * unitlessMaxScreen;\n  return \"calc(\" + base.toFixed(2) + (fromSizeUnit || '') + \" + \" + (100 * slope).toFixed(2) + \"vw)\";\n}\n\n/**\n * CSS to contain a float (credit to CSSMojo).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *    ...clearFix(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${clearFix()}\n * `\n *\n * // CSS as JS Output\n *\n * '&::after': {\n *   'clear': 'both',\n *   'content': '\"\"',\n *   'display': 'table'\n * }\n */\nfunction clearFix(parent) {\n  var _ref;\n\n  if (parent === void 0) {\n    parent = '&';\n  }\n\n  var pseudoSelector = parent + \"::after\";\n  return _ref = {}, _ref[pseudoSelector] = {\n    clear: 'both',\n    content: '\"\"',\n    display: 'table'\n  }, _ref;\n}\n\n/**\n * CSS to fully cover an area. Can optionally be passed an offset to act as a \"padding\".\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...cover()\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${cover()}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'position': 'absolute',\n *   'top': '0',\n *   'right: '0',\n *   'bottom': '0',\n *   'left: '0'\n * }\n */\nfunction cover(offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  return {\n    position: 'absolute',\n    top: offset,\n    right: offset,\n    bottom: offset,\n    left: offset\n  };\n}\n\n/**\n * CSS to represent truncated text with an ellipsis.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...ellipsis('250px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${ellipsis('250px')}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'display': 'inline-block',\n *   'maxWidth': '250px',\n *   'overflow': 'hidden',\n *   'textOverflow': 'ellipsis',\n *   'whiteSpace': 'nowrap',\n *   'wordWrap': 'normal'\n * }\n */\nfunction ellipsis(width) {\n  if (width === void 0) {\n    width = '100%';\n  }\n\n  return {\n    display: 'inline-block',\n    maxWidth: width,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    wordWrap: 'normal'\n  };\n}\n\nfunction _createForOfIteratorHelperLoose(o) { var i = 0; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } i = o[Symbol.iterator](); return i.next.bind(i); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * Returns a set of media queries that resizes a property (or set of properties) between a provided fromSize and toSize. Accepts optional minScreen (defaults to '320px') and maxScreen (defaults to '1200px') to constrain the interpolation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...fluidRange(\n *    {\n *        prop: 'padding',\n *        fromSize: '20px',\n *        toSize: '100px',\n *      },\n *      '400px',\n *      '1000px',\n *    )\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${fluidRange(\n *      {\n *        prop: 'padding',\n *        fromSize: '20px',\n *        toSize: '100px',\n *      },\n *      '400px',\n *      '1000px',\n *    )}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   \"@media (min-width: 1000px)\": Object {\n *     \"padding\": \"100px\",\n *   },\n *   \"@media (min-width: 400px)\": Object {\n *     \"padding\": \"calc(-33.33333333333334px + 13.333333333333334vw)\",\n *   },\n *   \"padding\": \"20px\",\n * }\n */\nfunction fluidRange(cssProp, minScreen, maxScreen) {\n  if (minScreen === void 0) {\n    minScreen = '320px';\n  }\n\n  if (maxScreen === void 0) {\n    maxScreen = '1200px';\n  }\n\n  if (!Array.isArray(cssProp) && typeof cssProp !== 'object' || cssProp === null) {\n    throw new PolishedError(49);\n  }\n\n  if (Array.isArray(cssProp)) {\n    var mediaQueries = {};\n    var fallbacks = {};\n\n    for (var _iterator = _createForOfIteratorHelperLoose(cssProp), _step; !(_step = _iterator()).done;) {\n      var _extends2, _extends3;\n\n      var obj = _step.value;\n\n      if (!obj.prop || !obj.fromSize || !obj.toSize) {\n        throw new PolishedError(50);\n      }\n\n      fallbacks[obj.prop] = obj.fromSize;\n      mediaQueries[\"@media (min-width: \" + minScreen + \")\"] = _extends({}, mediaQueries[\"@media (min-width: \" + minScreen + \")\"], (_extends2 = {}, _extends2[obj.prop] = between(obj.fromSize, obj.toSize, minScreen, maxScreen), _extends2));\n      mediaQueries[\"@media (min-width: \" + maxScreen + \")\"] = _extends({}, mediaQueries[\"@media (min-width: \" + maxScreen + \")\"], (_extends3 = {}, _extends3[obj.prop] = obj.toSize, _extends3));\n    }\n\n    return _extends({}, fallbacks, {}, mediaQueries);\n  } else {\n    var _ref, _ref2, _ref3;\n\n    if (!cssProp.prop || !cssProp.fromSize || !cssProp.toSize) {\n      throw new PolishedError(51);\n    }\n\n    return _ref3 = {}, _ref3[cssProp.prop] = cssProp.fromSize, _ref3[\"@media (min-width: \" + minScreen + \")\"] = (_ref = {}, _ref[cssProp.prop] = between(cssProp.fromSize, cssProp.toSize, minScreen, maxScreen), _ref), _ref3[\"@media (min-width: \" + maxScreen + \")\"] = (_ref2 = {}, _ref2[cssProp.prop] = cssProp.toSize, _ref2), _ref3;\n  }\n}\n\nvar dataURIRegex = /^\\s*data:([a-z]+\\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\\-._~:@/?%\\s]*\\s*$/i;\nvar formatHintMap = {\n  woff: 'woff',\n  woff2: 'woff2',\n  ttf: 'truetype',\n  otf: 'opentype',\n  eot: 'embedded-opentype',\n  svg: 'svg',\n  svgz: 'svg'\n};\n\nfunction generateFormatHint(format, formatHint) {\n  if (!formatHint) return '';\n  return \" format(\\\"\" + formatHintMap[format] + \"\\\")\";\n}\n\nfunction isDataURI(fontFilePath) {\n  return !!fontFilePath.match(dataURIRegex);\n}\n\nfunction generateFileReferences(fontFilePath, fileFormats, formatHint) {\n  if (isDataURI(fontFilePath)) {\n    return \"url(\\\"\" + fontFilePath + \"\\\")\" + generateFormatHint(fileFormats[0], formatHint);\n  }\n\n  var fileFontReferences = fileFormats.map(function (format) {\n    return \"url(\\\"\" + fontFilePath + \".\" + format + \"\\\")\" + generateFormatHint(format, formatHint);\n  });\n  return fileFontReferences.join(', ');\n}\n\nfunction generateLocalReferences(localFonts) {\n  var localFontReferences = localFonts.map(function (font) {\n    return \"local(\\\"\" + font + \"\\\")\";\n  });\n  return localFontReferences.join(', ');\n}\n\nfunction generateSources(fontFilePath, localFonts, fileFormats, formatHint) {\n  var fontReferences = [];\n  if (localFonts) fontReferences.push(generateLocalReferences(localFonts));\n\n  if (fontFilePath) {\n    fontReferences.push(generateFileReferences(fontFilePath, fileFormats, formatHint));\n  }\n\n  return fontReferences.join(', ');\n}\n/**\n * CSS for a @font-face declaration.\n *\n * @example\n * // Styles as object basic usage\n * const styles = {\n *    ...fontFace({\n *      'fontFamily': 'Sans-Pro',\n *      'fontFilePath': 'path/to/file'\n *    })\n * }\n *\n * // styled-components basic usage\n * const GlobalStyle = createGlobalStyle`${\n *   fontFace({\n *     'fontFamily': 'Sans-Pro',\n *     'fontFilePath': 'path/to/file'\n *   }\n * )}`\n *\n * // CSS as JS Output\n *\n * '@font-face': {\n *   'fontFamily': 'Sans-Pro',\n *   'src': 'url(\"path/to/file.eot\"), url(\"path/to/file.woff2\"), url(\"path/to/file.woff\"), url(\"path/to/file.ttf\"), url(\"path/to/file.svg\")',\n * }\n */\n\n\nfunction fontFace(_ref) {\n  var fontFamily = _ref.fontFamily,\n      fontFilePath = _ref.fontFilePath,\n      fontStretch = _ref.fontStretch,\n      fontStyle = _ref.fontStyle,\n      fontVariant = _ref.fontVariant,\n      fontWeight = _ref.fontWeight,\n      _ref$fileFormats = _ref.fileFormats,\n      fileFormats = _ref$fileFormats === void 0 ? ['eot', 'woff2', 'woff', 'ttf', 'svg'] : _ref$fileFormats,\n      _ref$formatHint = _ref.formatHint,\n      formatHint = _ref$formatHint === void 0 ? false : _ref$formatHint,\n      localFonts = _ref.localFonts,\n      unicodeRange = _ref.unicodeRange,\n      fontDisplay = _ref.fontDisplay,\n      fontVariationSettings = _ref.fontVariationSettings,\n      fontFeatureSettings = _ref.fontFeatureSettings;\n  // Error Handling\n  if (!fontFamily) throw new PolishedError(55);\n\n  if (!fontFilePath && !localFonts) {\n    throw new PolishedError(52);\n  }\n\n  if (localFonts && !Array.isArray(localFonts)) {\n    throw new PolishedError(53);\n  }\n\n  if (!Array.isArray(fileFormats)) {\n    throw new PolishedError(54);\n  }\n\n  var fontFaceDeclaration = {\n    '@font-face': {\n      fontFamily: fontFamily,\n      src: generateSources(fontFilePath, localFonts, fileFormats, formatHint),\n      unicodeRange: unicodeRange,\n      fontStretch: fontStretch,\n      fontStyle: fontStyle,\n      fontVariant: fontVariant,\n      fontWeight: fontWeight,\n      fontDisplay: fontDisplay,\n      fontVariationSettings: fontVariationSettings,\n      fontFeatureSettings: fontFeatureSettings\n    }\n  }; // Removes undefined fields for cleaner css object.\n\n  return JSON.parse(JSON.stringify(fontFaceDeclaration));\n}\n\n/**\n * CSS to hide text to show a background image in a SEO-friendly way.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'backgroundImage': 'url(logo.png)',\n *   ...hideText(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   backgroundImage: url(logo.png);\n *   ${hideText()};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'backgroundImage': 'url(logo.png)',\n *   'textIndent': '101%',\n *   'overflow': 'hidden',\n *   'whiteSpace': 'nowrap',\n * }\n */\nfunction hideText() {\n  return {\n    textIndent: '101%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap'\n  };\n}\n\n/**\n * CSS to hide content visually but remain accessible to screen readers.\n * from [HTML5 Boilerplate](https://github.com/h5bp/html5-boilerplate/blob/9a176f57af1cfe8ec70300da4621fb9b07e5fa31/src/css/main.css#L121)\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...hideVisually(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${hideVisually()};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'border': '0',\n *   'clip': 'rect(0 0 0 0)',\n *   'height': '1px',\n *   'margin': '-1px',\n *   'overflow': 'hidden',\n *   'padding': '0',\n *   'position': 'absolute',\n *   'whiteSpace': 'nowrap',\n *   'width': '1px',\n * }\n */\nfunction hideVisually() {\n  return {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    width: '1px'\n  };\n}\n\n/**\n * Generates a media query to target HiDPI devices.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *  [hiDPI(1.5)]: {\n *    width: 200px;\n *  }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${hiDPI(1.5)} {\n *     width: 200px;\n *   }\n * `\n *\n * // CSS as JS Output\n *\n * '@media only screen and (-webkit-min-device-pixel-ratio: 1.5),\n *  only screen and (min--moz-device-pixel-ratio: 1.5),\n *  only screen and (-o-min-device-pixel-ratio: 1.5/1),\n *  only screen and (min-resolution: 144dpi),\n *  only screen and (min-resolution: 1.5dppx)': {\n *   'width': '200px',\n * }\n */\nfunction hiDPI(ratio) {\n  if (ratio === void 0) {\n    ratio = 1.3;\n  }\n\n  return \"\\n    @media only screen and (-webkit-min-device-pixel-ratio: \" + ratio + \"),\\n    only screen and (min--moz-device-pixel-ratio: \" + ratio + \"),\\n    only screen and (-o-min-device-pixel-ratio: \" + ratio + \"/1),\\n    only screen and (min-resolution: \" + Math.round(ratio * 96) + \"dpi),\\n    only screen and (min-resolution: \" + ratio + \"dppx)\\n  \";\n}\n\nfunction constructGradientValue(literals) {\n  var template = '';\n\n  for (var _len = arguments.length, substitutions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    substitutions[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < literals.length; i += 1) {\n    template += literals[i];\n\n    if (i === substitutions.length - 1 && substitutions[i]) {\n      var definedValues = substitutions.filter(function (substitute) {\n        return !!substitute;\n      }); // Adds leading coma if properties preceed color-stops\n\n      if (definedValues.length > 1) {\n        template = template.slice(0, -1);\n        template += \", \" + substitutions[i]; // No trailing space if color-stops is the only param provided\n      } else if (definedValues.length === 1) {\n        template += \"\" + substitutions[i];\n      }\n    } else if (substitutions[i]) {\n      template += substitutions[i] + \" \";\n    }\n  }\n\n  return template.trim();\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"linear-gradient(\", \"\", \")\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/**\n * CSS for declaring a linear gradient, including a fallback background-color. The fallback is either the first color-stop or an explicitly passed fallback color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...linearGradient({\n        colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n        toDirection: 'to top right',\n        fallback: '#FFF',\n      })\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${linearGradient({\n        colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n        toDirection: 'to top right',\n        fallback: '#FFF',\n      })}\n *`\n *\n * // CSS as JS Output\n *\n * div: {\n *   'backgroundColor': '#FFF',\n *   'backgroundImage': 'linear-gradient(to top right, #00FFFF 0%, rgba(0, 0, 255, 0) 50%, #0000FF 95%)',\n * }\n */\nfunction linearGradient(_ref) {\n  var colorStops = _ref.colorStops,\n      fallback = _ref.fallback,\n      _ref$toDirection = _ref.toDirection,\n      toDirection = _ref$toDirection === void 0 ? '' : _ref$toDirection;\n\n  if (!colorStops || colorStops.length < 2) {\n    throw new PolishedError(56);\n  }\n\n  return {\n    backgroundColor: fallback || colorStops[0].split(' ')[0],\n    backgroundImage: constructGradientValue(_templateObject(), toDirection, colorStops.join(', '))\n  };\n}\n\n/**\n * CSS to normalize abnormalities across browsers (normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css)\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *    ...normalize(),\n * }\n *\n * // styled-components usage\n * const GlobalStyle = createGlobalStyle`${normalize()}`\n *\n * // CSS as JS Output\n *\n * html {\n *   lineHeight: 1.15,\n *   textSizeAdjust: 100%,\n * } ...\n */\nfunction normalize() {\n  var _ref;\n\n  return [(_ref = {\n    html: {\n      lineHeight: '1.15',\n      textSizeAdjust: '100%'\n    },\n    body: {\n      margin: '0'\n    },\n    main: {\n      display: 'block'\n    },\n    h1: {\n      fontSize: '2em',\n      margin: '0.67em 0'\n    },\n    hr: {\n      boxSizing: 'content-box',\n      height: '0',\n      overflow: 'visible'\n    },\n    pre: {\n      fontFamily: 'monospace, monospace',\n      fontSize: '1em'\n    },\n    a: {\n      backgroundColor: 'transparent'\n    },\n    'abbr[title]': {\n      borderBottom: 'none',\n      textDecoration: 'underline'\n    }\n  }, _ref[\"b,\\n    strong\"] = {\n    fontWeight: 'bolder'\n  }, _ref[\"code,\\n    kbd,\\n    samp\"] = {\n    fontFamily: 'monospace, monospace',\n    fontSize: '1em'\n  }, _ref.small = {\n    fontSize: '80%'\n  }, _ref[\"sub,\\n    sup\"] = {\n    fontSize: '75%',\n    lineHeight: '0',\n    position: 'relative',\n    verticalAlign: 'baseline'\n  }, _ref.sub = {\n    bottom: '-0.25em'\n  }, _ref.sup = {\n    top: '-0.5em'\n  }, _ref.img = {\n    borderStyle: 'none'\n  }, _ref[\"button,\\n    input,\\n    optgroup,\\n    select,\\n    textarea\"] = {\n    fontFamily: 'inherit',\n    fontSize: '100%',\n    lineHeight: '1.15',\n    margin: '0'\n  }, _ref[\"button,\\n    input\"] = {\n    overflow: 'visible'\n  }, _ref[\"button,\\n    select\"] = {\n    textTransform: 'none'\n  }, _ref[\"button,\\n    html [type=\\\"button\\\"],\\n    [type=\\\"reset\\\"],\\n    [type=\\\"submit\\\"]\"] = {\n    WebkitAppearance: 'button'\n  }, _ref[\"button::-moz-focus-inner,\\n    [type=\\\"button\\\"]::-moz-focus-inner,\\n    [type=\\\"reset\\\"]::-moz-focus-inner,\\n    [type=\\\"submit\\\"]::-moz-focus-inner\"] = {\n    borderStyle: 'none',\n    padding: '0'\n  }, _ref[\"button:-moz-focusring,\\n    [type=\\\"button\\\"]:-moz-focusring,\\n    [type=\\\"reset\\\"]:-moz-focusring,\\n    [type=\\\"submit\\\"]:-moz-focusring\"] = {\n    outline: '1px dotted ButtonText'\n  }, _ref.fieldset = {\n    padding: '0.35em 0.625em 0.75em'\n  }, _ref.legend = {\n    boxSizing: 'border-box',\n    color: 'inherit',\n    display: 'table',\n    maxWidth: '100%',\n    padding: '0',\n    whiteSpace: 'normal'\n  }, _ref.progress = {\n    verticalAlign: 'baseline'\n  }, _ref.textarea = {\n    overflow: 'auto'\n  }, _ref[\"[type=\\\"checkbox\\\"],\\n    [type=\\\"radio\\\"]\"] = {\n    boxSizing: 'border-box',\n    padding: '0'\n  }, _ref[\"[type=\\\"number\\\"]::-webkit-inner-spin-button,\\n    [type=\\\"number\\\"]::-webkit-outer-spin-button\"] = {\n    height: 'auto'\n  }, _ref['[type=\"search\"]'] = {\n    WebkitAppearance: 'textfield',\n    outlineOffset: '-2px'\n  }, _ref['[type=\"search\"]::-webkit-search-decoration'] = {\n    WebkitAppearance: 'none'\n  }, _ref['::-webkit-file-upload-button'] = {\n    WebkitAppearance: 'button',\n    font: 'inherit'\n  }, _ref.details = {\n    display: 'block'\n  }, _ref.summary = {\n    display: 'list-item'\n  }, _ref.template = {\n    display: 'none'\n  }, _ref['[hidden]'] = {\n    display: 'none'\n  }, _ref), {\n    'abbr[title]': {\n      textDecoration: 'underline dotted'\n    }\n  }];\n}\n\nfunction _templateObject$1() {\n  var data = _taggedTemplateLiteralLoose([\"radial-gradient(\", \"\", \"\", \"\", \")\"]);\n\n  _templateObject$1 = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/**\n * CSS for declaring a radial gradient, including a fallback background-color. The fallback is either the first color-stop or an explicitly passed fallback color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...radialGradient({\n *     colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n *     extent: 'farthest-corner at 45px 45px',\n *     position: 'center',\n *     shape: 'ellipse',\n *   })\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${radialGradient({\n *     colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n *     extent: 'farthest-corner at 45px 45px',\n *     position: 'center',\n *     shape: 'ellipse',\n *   })}\n *`\n *\n * // CSS as JS Output\n *\n * div: {\n *   'backgroundColor': '#00FFFF',\n *   'backgroundImage': 'radial-gradient(center ellipse farthest-corner at 45px 45px, #00FFFF 0%, rgba(0, 0, 255, 0) 50%, #0000FF 95%)',\n * }\n */\nfunction radialGradient(_ref) {\n  var colorStops = _ref.colorStops,\n      _ref$extent = _ref.extent,\n      extent = _ref$extent === void 0 ? '' : _ref$extent,\n      fallback = _ref.fallback,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? '' : _ref$position,\n      _ref$shape = _ref.shape,\n      shape = _ref$shape === void 0 ? '' : _ref$shape;\n\n  if (!colorStops || colorStops.length < 2) {\n    throw new PolishedError(57);\n  }\n\n  return {\n    backgroundColor: fallback || colorStops[0].split(' ')[0],\n    backgroundImage: constructGradientValue(_templateObject$1(), position, shape, extent, colorStops.join(', '))\n  };\n}\n\n/**\n * A helper to generate a retina background image and non-retina\n * background image. The retina background image will output to a HiDPI media query. The mixin uses\n * a _2x.png filename suffix by default.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *  ...retinaImage('my-img')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${retinaImage('my-img')}\n * `\n *\n * // CSS as JS Output\n * div {\n *   backgroundImage: 'url(my-img.png)',\n *   '@media only screen and (-webkit-min-device-pixel-ratio: 1.3),\n *    only screen and (min--moz-device-pixel-ratio: 1.3),\n *    only screen and (-o-min-device-pixel-ratio: 1.3/1),\n *    only screen and (min-resolution: 144dpi),\n *    only screen and (min-resolution: 1.5dppx)': {\n *     backgroundImage: 'url(my-img_2x.png)',\n *   }\n * }\n */\nfunction retinaImage(filename, backgroundSize, extension, retinaFilename, retinaSuffix) {\n  var _ref;\n\n  if (extension === void 0) {\n    extension = 'png';\n  }\n\n  if (retinaSuffix === void 0) {\n    retinaSuffix = '_2x';\n  }\n\n  if (!filename) {\n    throw new PolishedError(58);\n  } // Replace the dot at the beginning of the passed extension if one exists\n\n\n  var ext = extension.replace(/^\\./, '');\n  var rFilename = retinaFilename ? retinaFilename + \".\" + ext : \"\" + filename + retinaSuffix + \".\" + ext;\n  return _ref = {\n    backgroundImage: \"url(\" + filename + \".\" + ext + \")\"\n  }, _ref[hiDPI()] = _extends({\n    backgroundImage: \"url(\" + rFilename + \")\"\n  }, backgroundSize ? {\n    backgroundSize: backgroundSize\n  } : {}), _ref;\n}\n\n/* eslint-disable key-spacing */\nvar functionsMap = {\n  easeInBack: 'cubic-bezier(0.600, -0.280, 0.735, 0.045)',\n  easeInCirc: 'cubic-bezier(0.600,  0.040, 0.980, 0.335)',\n  easeInCubic: 'cubic-bezier(0.550,  0.055, 0.675, 0.190)',\n  easeInExpo: 'cubic-bezier(0.950,  0.050, 0.795, 0.035)',\n  easeInQuad: 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n  easeInQuart: 'cubic-bezier(0.895,  0.030, 0.685, 0.220)',\n  easeInQuint: 'cubic-bezier(0.755,  0.050, 0.855, 0.060)',\n  easeInSine: 'cubic-bezier(0.470,  0.000, 0.745, 0.715)',\n  easeOutBack: 'cubic-bezier(0.175,  0.885, 0.320, 1.275)',\n  easeOutCubic: 'cubic-bezier(0.215,  0.610, 0.355, 1.000)',\n  easeOutCirc: 'cubic-bezier(0.075,  0.820, 0.165, 1.000)',\n  easeOutExpo: 'cubic-bezier(0.190,  1.000, 0.220, 1.000)',\n  easeOutQuad: 'cubic-bezier(0.250,  0.460, 0.450, 0.940)',\n  easeOutQuart: 'cubic-bezier(0.165,  0.840, 0.440, 1.000)',\n  easeOutQuint: 'cubic-bezier(0.230,  1.000, 0.320, 1.000)',\n  easeOutSine: 'cubic-bezier(0.390,  0.575, 0.565, 1.000)',\n  easeInOutBack: 'cubic-bezier(0.680, -0.550, 0.265, 1.550)',\n  easeInOutCirc: 'cubic-bezier(0.785,  0.135, 0.150, 0.860)',\n  easeInOutCubic: 'cubic-bezier(0.645,  0.045, 0.355, 1.000)',\n  easeInOutExpo: 'cubic-bezier(1.000,  0.000, 0.000, 1.000)',\n  easeInOutQuad: 'cubic-bezier(0.455,  0.030, 0.515, 0.955)',\n  easeInOutQuart: 'cubic-bezier(0.770,  0.000, 0.175, 1.000)',\n  easeInOutQuint: 'cubic-bezier(0.860,  0.000, 0.070, 1.000)',\n  easeInOutSine: 'cubic-bezier(0.445,  0.050, 0.550, 0.950)'\n};\n/* eslint-enable key-spacing */\n\nfunction getTimingFunction(functionName) {\n  return functionsMap[functionName];\n}\n/**\n * String to represent common easing functions as demonstrated here: (github.com/jaukia/easie).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'transitionTimingFunction': timingFunctions('easeInQuad')\n * }\n *\n * // styled-components usage\n *  const div = styled.div`\n *   transitionTimingFunction: ${timingFunctions('easeInQuad')};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'transitionTimingFunction': 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n * }\n */\n\n\nfunction timingFunctions(timingFunction) {\n  return getTimingFunction(timingFunction);\n}\n\nvar getBorderWidth = function getBorderWidth(pointingDirection, height, width) {\n  var fullWidth = \"\" + width[0] + (width[1] || '');\n  var halfWidth = \"\" + width[0] / 2 + (width[1] || '');\n  var fullHeight = \"\" + height[0] + (height[1] || '');\n  var halfHeight = \"\" + height[0] / 2 + (height[1] || '');\n\n  switch (pointingDirection) {\n    case 'top':\n      return \"0 \" + halfWidth + \" \" + fullHeight + \" \" + halfWidth;\n\n    case 'topLeft':\n      return fullWidth + \" \" + fullHeight + \" 0 0\";\n\n    case 'left':\n      return halfHeight + \" \" + fullWidth + \" \" + halfHeight + \" 0\";\n\n    case 'bottomLeft':\n      return fullWidth + \" 0 0 \" + fullHeight;\n\n    case 'bottom':\n      return fullHeight + \" \" + halfWidth + \" 0 \" + halfWidth;\n\n    case 'bottomRight':\n      return \"0 0 \" + fullWidth + \" \" + fullHeight;\n\n    case 'right':\n      return halfHeight + \" 0 \" + halfHeight + \" \" + fullWidth;\n\n    case 'topRight':\n    default:\n      return \"0 \" + fullWidth + \" \" + fullHeight + \" 0\";\n  }\n};\n\nvar getBorderColor = function getBorderColor(pointingDirection, foregroundColor, backgroundColor) {\n  switch (pointingDirection) {\n    case 'top':\n    case 'bottomRight':\n      return backgroundColor + \" \" + backgroundColor + \" \" + foregroundColor + \" \" + backgroundColor;\n\n    case 'right':\n    case 'bottomLeft':\n      return backgroundColor + \" \" + backgroundColor + \" \" + backgroundColor + \" \" + foregroundColor;\n\n    case 'bottom':\n    case 'topLeft':\n      return foregroundColor + \" \" + backgroundColor + \" \" + backgroundColor + \" \" + backgroundColor;\n\n    case 'left':\n    case 'topRight':\n      return backgroundColor + \" \" + foregroundColor + \" \" + backgroundColor + \" \" + backgroundColor;\n\n    default:\n      throw new PolishedError(59);\n  }\n};\n/**\n * CSS to represent triangle with any pointing direction with an optional background color.\n *\n * @example\n * // Styles as object usage\n *\n * const styles = {\n *   ...triangle({ pointingDirection: 'right', width: '100px', height: '100px', foregroundColor: 'red' })\n * }\n *\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${triangle({ pointingDirection: 'right', width: '100px', height: '100px', foregroundColor: 'red' })}\n *\n *\n * // CSS as JS Output\n *\n * div: {\n *  'borderColor': 'transparent transparent transparent red',\n *  'borderStyle': 'solid',\n *  'borderWidth': '50px 0 50px 100px',\n *  'height': '0',\n *  'width': '0',\n * }\n */\n\n\nfunction triangle(_ref) {\n  var pointingDirection = _ref.pointingDirection,\n      height = _ref.height,\n      width = _ref.width,\n      foregroundColor = _ref.foregroundColor,\n      _ref$backgroundColor = _ref.backgroundColor,\n      backgroundColor = _ref$backgroundColor === void 0 ? 'transparent' : _ref$backgroundColor;\n  var widthAndUnit = getValueAndUnit(width);\n  var heightAndUnit = getValueAndUnit(height);\n\n  if (isNaN(heightAndUnit[0]) || isNaN(widthAndUnit[0])) {\n    throw new PolishedError(60);\n  }\n\n  return {\n    width: '0',\n    height: '0',\n    borderColor: getBorderColor(pointingDirection, foregroundColor, backgroundColor),\n    borderStyle: 'solid',\n    borderWidth: getBorderWidth(pointingDirection, heightAndUnit, widthAndUnit)\n  };\n}\n\n/**\n * Provides an easy way to change the `wordWrap` property.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...wordWrap('break-word')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${wordWrap('break-word')}\n * `\n *\n * // CSS as JS Output\n *\n * const styles = {\n *   overflowWrap: 'break-word',\n *   wordWrap: 'break-word',\n *   wordBreak: 'break-all',\n * }\n */\nfunction wordWrap(wrap) {\n  if (wrap === void 0) {\n    wrap = 'break-word';\n  }\n\n  var wordBreak = wrap === 'break-word' ? 'break-all' : wrap;\n  return {\n    overflowWrap: wrap,\n    wordWrap: wrap,\n    wordBreak: wordBreak\n  };\n}\n\nfunction colorToInt(color) {\n  return Math.round(color * 255);\n}\n\nfunction convertToInt(red, green, blue) {\n  return colorToInt(red) + \",\" + colorToInt(green) + \",\" + colorToInt(blue);\n}\n\nfunction hslToRgb(hue, saturation, lightness, convert) {\n  if (convert === void 0) {\n    convert = convertToInt;\n  }\n\n  if (saturation === 0) {\n    // achromatic\n    return convert(lightness, lightness, lightness);\n  } // formulae from https://en.wikipedia.org/wiki/HSL_and_HSV\n\n\n  var huePrime = (hue % 360 + 360) % 360 / 60;\n  var chroma = (1 - Math.abs(2 * lightness - 1)) * saturation;\n  var secondComponent = chroma * (1 - Math.abs(huePrime % 2 - 1));\n  var red = 0;\n  var green = 0;\n  var blue = 0;\n\n  if (huePrime >= 0 && huePrime < 1) {\n    red = chroma;\n    green = secondComponent;\n  } else if (huePrime >= 1 && huePrime < 2) {\n    red = secondComponent;\n    green = chroma;\n  } else if (huePrime >= 2 && huePrime < 3) {\n    green = chroma;\n    blue = secondComponent;\n  } else if (huePrime >= 3 && huePrime < 4) {\n    green = secondComponent;\n    blue = chroma;\n  } else if (huePrime >= 4 && huePrime < 5) {\n    red = secondComponent;\n    blue = chroma;\n  } else if (huePrime >= 5 && huePrime < 6) {\n    red = chroma;\n    blue = secondComponent;\n  }\n\n  var lightnessModification = lightness - chroma / 2;\n  var finalRed = red + lightnessModification;\n  var finalGreen = green + lightnessModification;\n  var finalBlue = blue + lightnessModification;\n  return convert(finalRed, finalGreen, finalBlue);\n}\n\nvar namedColorMap = {\n  aliceblue: 'f0f8ff',\n  antiquewhite: 'faebd7',\n  aqua: '00ffff',\n  aquamarine: '7fffd4',\n  azure: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '000',\n  blanchedalmond: 'ffebcd',\n  blue: '0000ff',\n  blueviolet: '8a2be2',\n  brown: 'a52a2a',\n  burlywood: 'deb887',\n  cadetblue: '5f9ea0',\n  chartreuse: '7fff00',\n  chocolate: 'd2691e',\n  coral: 'ff7f50',\n  cornflowerblue: '6495ed',\n  cornsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: '00ffff',\n  darkblue: '00008b',\n  darkcyan: '008b8b',\n  darkgoldenrod: 'b8860b',\n  darkgray: 'a9a9a9',\n  darkgreen: '006400',\n  darkgrey: 'a9a9a9',\n  darkkhaki: 'bdb76b',\n  darkmagenta: '8b008b',\n  darkolivegreen: '556b2f',\n  darkorange: 'ff8c00',\n  darkorchid: '9932cc',\n  darkred: '8b0000',\n  darksalmon: 'e9967a',\n  darkseagreen: '8fbc8f',\n  darkslateblue: '483d8b',\n  darkslategray: '2f4f4f',\n  darkslategrey: '2f4f4f',\n  darkturquoise: '00ced1',\n  darkviolet: '9400d3',\n  deeppink: 'ff1493',\n  deepskyblue: '00bfff',\n  dimgray: '696969',\n  dimgrey: '696969',\n  dodgerblue: '1e90ff',\n  firebrick: 'b22222',\n  floralwhite: 'fffaf0',\n  forestgreen: '228b22',\n  fuchsia: 'ff00ff',\n  gainsboro: 'dcdcdc',\n  ghostwhite: 'f8f8ff',\n  gold: 'ffd700',\n  goldenrod: 'daa520',\n  gray: '808080',\n  green: '008000',\n  greenyellow: 'adff2f',\n  grey: '808080',\n  honeydew: 'f0fff0',\n  hotpink: 'ff69b4',\n  indianred: 'cd5c5c',\n  indigo: '4b0082',\n  ivory: 'fffff0',\n  khaki: 'f0e68c',\n  lavender: 'e6e6fa',\n  lavenderblush: 'fff0f5',\n  lawngreen: '7cfc00',\n  lemonchiffon: 'fffacd',\n  lightblue: 'add8e6',\n  lightcoral: 'f08080',\n  lightcyan: 'e0ffff',\n  lightgoldenrodyellow: 'fafad2',\n  lightgray: 'd3d3d3',\n  lightgreen: '90ee90',\n  lightgrey: 'd3d3d3',\n  lightpink: 'ffb6c1',\n  lightsalmon: 'ffa07a',\n  lightseagreen: '20b2aa',\n  lightskyblue: '87cefa',\n  lightslategray: '789',\n  lightslategrey: '789',\n  lightsteelblue: 'b0c4de',\n  lightyellow: 'ffffe0',\n  lime: '0f0',\n  limegreen: '32cd32',\n  linen: 'faf0e6',\n  magenta: 'f0f',\n  maroon: '800000',\n  mediumaquamarine: '66cdaa',\n  mediumblue: '0000cd',\n  mediumorchid: 'ba55d3',\n  mediumpurple: '9370db',\n  mediumseagreen: '3cb371',\n  mediumslateblue: '7b68ee',\n  mediumspringgreen: '00fa9a',\n  mediumturquoise: '48d1cc',\n  mediumvioletred: 'c71585',\n  midnightblue: '191970',\n  mintcream: 'f5fffa',\n  mistyrose: 'ffe4e1',\n  moccasin: 'ffe4b5',\n  navajowhite: 'ffdead',\n  navy: '000080',\n  oldlace: 'fdf5e6',\n  olive: '808000',\n  olivedrab: '6b8e23',\n  orange: 'ffa500',\n  orangered: 'ff4500',\n  orchid: 'da70d6',\n  palegoldenrod: 'eee8aa',\n  palegreen: '98fb98',\n  paleturquoise: 'afeeee',\n  palevioletred: 'db7093',\n  papayawhip: 'ffefd5',\n  peachpuff: 'ffdab9',\n  peru: 'cd853f',\n  pink: 'ffc0cb',\n  plum: 'dda0dd',\n  powderblue: 'b0e0e6',\n  purple: '800080',\n  rebeccapurple: '639',\n  red: 'f00',\n  rosybrown: 'bc8f8f',\n  royalblue: '4169e1',\n  saddlebrown: '8b4513',\n  salmon: 'fa8072',\n  sandybrown: 'f4a460',\n  seagreen: '2e8b57',\n  seashell: 'fff5ee',\n  sienna: 'a0522d',\n  silver: 'c0c0c0',\n  skyblue: '87ceeb',\n  slateblue: '6a5acd',\n  slategray: '708090',\n  slategrey: '708090',\n  snow: 'fffafa',\n  springgreen: '00ff7f',\n  steelblue: '4682b4',\n  tan: 'd2b48c',\n  teal: '008080',\n  thistle: 'd8bfd8',\n  tomato: 'ff6347',\n  turquoise: '40e0d0',\n  violet: 'ee82ee',\n  wheat: 'f5deb3',\n  white: 'fff',\n  whitesmoke: 'f5f5f5',\n  yellow: 'ff0',\n  yellowgreen: '9acd32'\n};\n/**\n * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.\n * @private\n */\n\nfunction nameToHex(color) {\n  if (typeof color !== 'string') return color;\n  var normalizedColorName = color.toLowerCase();\n  return namedColorMap[normalizedColorName] ? \"#\" + namedColorMap[normalizedColorName] : color;\n}\n\nvar hexRegex = /^#[a-fA-F0-9]{6}$/;\nvar hexRgbaRegex = /^#[a-fA-F0-9]{8}$/;\nvar reducedHexRegex = /^#[a-fA-F0-9]{3}$/;\nvar reducedRgbaHexRegex = /^#[a-fA-F0-9]{4}$/;\nvar rgbRegex = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i;\nvar rgbaRegex = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*([-+]?[0-9]*[.]?[0-9]+)\\s*\\)$/i;\nvar hslRegex = /^hsl\\(\\s*(\\d{0,3}[.]?[0-9]+)\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*\\)$/i;\nvar hslaRegex = /^hsla\\(\\s*(\\d{0,3}[.]?[0-9]+)\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*,\\s*([-+]?[0-9]*[.]?[0-9]+)\\s*\\)$/i;\n/**\n * Returns an RgbColor or RgbaColor object. This utility function is only useful\n * if want to extract a color component. With the color util `toColorString` you\n * can convert a RgbColor or RgbaColor object back to a string.\n *\n * @example\n * // Assigns `{ red: 255, green: 0, blue: 0 }` to color1\n * const color1 = parseToRgb('rgb(255, 0, 0)');\n * // Assigns `{ red: 92, green: 102, blue: 112, alpha: 0.75 }` to color2\n * const color2 = parseToRgb('hsla(210, 10%, 40%, 0.75)');\n */\n\nfunction parseToRgb(color) {\n  if (typeof color !== 'string') {\n    throw new PolishedError(3);\n  }\n\n  var normalizedColor = nameToHex(color);\n\n  if (normalizedColor.match(hexRegex)) {\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[2], 16),\n      green: parseInt(\"\" + normalizedColor[3] + normalizedColor[4], 16),\n      blue: parseInt(\"\" + normalizedColor[5] + normalizedColor[6], 16)\n    };\n  }\n\n  if (normalizedColor.match(hexRgbaRegex)) {\n    var alpha = parseFloat((parseInt(\"\" + normalizedColor[7] + normalizedColor[8], 16) / 255).toFixed(2));\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[2], 16),\n      green: parseInt(\"\" + normalizedColor[3] + normalizedColor[4], 16),\n      blue: parseInt(\"\" + normalizedColor[5] + normalizedColor[6], 16),\n      alpha: alpha\n    };\n  }\n\n  if (normalizedColor.match(reducedHexRegex)) {\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[1], 16),\n      green: parseInt(\"\" + normalizedColor[2] + normalizedColor[2], 16),\n      blue: parseInt(\"\" + normalizedColor[3] + normalizedColor[3], 16)\n    };\n  }\n\n  if (normalizedColor.match(reducedRgbaHexRegex)) {\n    var _alpha = parseFloat((parseInt(\"\" + normalizedColor[4] + normalizedColor[4], 16) / 255).toFixed(2));\n\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[1], 16),\n      green: parseInt(\"\" + normalizedColor[2] + normalizedColor[2], 16),\n      blue: parseInt(\"\" + normalizedColor[3] + normalizedColor[3], 16),\n      alpha: _alpha\n    };\n  }\n\n  var rgbMatched = rgbRegex.exec(normalizedColor);\n\n  if (rgbMatched) {\n    return {\n      red: parseInt(\"\" + rgbMatched[1], 10),\n      green: parseInt(\"\" + rgbMatched[2], 10),\n      blue: parseInt(\"\" + rgbMatched[3], 10)\n    };\n  }\n\n  var rgbaMatched = rgbaRegex.exec(normalizedColor);\n\n  if (rgbaMatched) {\n    return {\n      red: parseInt(\"\" + rgbaMatched[1], 10),\n      green: parseInt(\"\" + rgbaMatched[2], 10),\n      blue: parseInt(\"\" + rgbaMatched[3], 10),\n      alpha: parseFloat(\"\" + rgbaMatched[4])\n    };\n  }\n\n  var hslMatched = hslRegex.exec(normalizedColor);\n\n  if (hslMatched) {\n    var hue = parseInt(\"\" + hslMatched[1], 10);\n    var saturation = parseInt(\"\" + hslMatched[2], 10) / 100;\n    var lightness = parseInt(\"\" + hslMatched[3], 10) / 100;\n    var rgbColorString = \"rgb(\" + hslToRgb(hue, saturation, lightness) + \")\";\n    var hslRgbMatched = rgbRegex.exec(rgbColorString);\n\n    if (!hslRgbMatched) {\n      throw new PolishedError(4, normalizedColor, rgbColorString);\n    }\n\n    return {\n      red: parseInt(\"\" + hslRgbMatched[1], 10),\n      green: parseInt(\"\" + hslRgbMatched[2], 10),\n      blue: parseInt(\"\" + hslRgbMatched[3], 10)\n    };\n  }\n\n  var hslaMatched = hslaRegex.exec(normalizedColor);\n\n  if (hslaMatched) {\n    var _hue = parseInt(\"\" + hslaMatched[1], 10);\n\n    var _saturation = parseInt(\"\" + hslaMatched[2], 10) / 100;\n\n    var _lightness = parseInt(\"\" + hslaMatched[3], 10) / 100;\n\n    var _rgbColorString = \"rgb(\" + hslToRgb(_hue, _saturation, _lightness) + \")\";\n\n    var _hslRgbMatched = rgbRegex.exec(_rgbColorString);\n\n    if (!_hslRgbMatched) {\n      throw new PolishedError(4, normalizedColor, _rgbColorString);\n    }\n\n    return {\n      red: parseInt(\"\" + _hslRgbMatched[1], 10),\n      green: parseInt(\"\" + _hslRgbMatched[2], 10),\n      blue: parseInt(\"\" + _hslRgbMatched[3], 10),\n      alpha: parseFloat(\"\" + hslaMatched[4])\n    };\n  }\n\n  throw new PolishedError(5);\n}\n\nfunction rgbToHsl(color) {\n  // make sure rgb are contained in a set of [0, 255]\n  var red = color.red / 255;\n  var green = color.green / 255;\n  var blue = color.blue / 255;\n  var max = Math.max(red, green, blue);\n  var min = Math.min(red, green, blue);\n  var lightness = (max + min) / 2;\n\n  if (max === min) {\n    // achromatic\n    if (color.alpha !== undefined) {\n      return {\n        hue: 0,\n        saturation: 0,\n        lightness: lightness,\n        alpha: color.alpha\n      };\n    } else {\n      return {\n        hue: 0,\n        saturation: 0,\n        lightness: lightness\n      };\n    }\n  }\n\n  var hue;\n  var delta = max - min;\n  var saturation = lightness > 0.5 ? delta / (2 - max - min) : delta / (max + min);\n\n  switch (max) {\n    case red:\n      hue = (green - blue) / delta + (green < blue ? 6 : 0);\n      break;\n\n    case green:\n      hue = (blue - red) / delta + 2;\n      break;\n\n    default:\n      // blue case\n      hue = (red - green) / delta + 4;\n      break;\n  }\n\n  hue *= 60;\n\n  if (color.alpha !== undefined) {\n    return {\n      hue: hue,\n      saturation: saturation,\n      lightness: lightness,\n      alpha: color.alpha\n    };\n  }\n\n  return {\n    hue: hue,\n    saturation: saturation,\n    lightness: lightness\n  };\n}\n\n/**\n * Returns an HslColor or HslaColor object. This utility function is only useful\n * if want to extract a color component. With the color util `toColorString` you\n * can convert a HslColor or HslaColor object back to a string.\n *\n * @example\n * // Assigns `{ hue: 0, saturation: 1, lightness: 0.5 }` to color1\n * const color1 = parseToHsl('rgb(255, 0, 0)');\n * // Assigns `{ hue: 128, saturation: 1, lightness: 0.5, alpha: 0.75 }` to color2\n * const color2 = parseToHsl('hsla(128, 100%, 50%, 0.75)');\n */\nfunction parseToHsl(color) {\n  // Note: At a later stage we can optimize this function as right now a hsl\n  // color would be parsed converted to rgb values and converted back to hsl.\n  return rgbToHsl(parseToRgb(color));\n}\n\n/**\n * Reduces hex values if possible e.g. #ff8866 to #f86\n * @private\n */\nvar reduceHexValue = function reduceHexValue(value) {\n  if (value.length === 7 && value[1] === value[2] && value[3] === value[4] && value[5] === value[6]) {\n    return \"#\" + value[1] + value[3] + value[5];\n  }\n\n  return value;\n};\n\nfunction numberToHex(value) {\n  var hex = value.toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nfunction colorToHex(color) {\n  return numberToHex(Math.round(color * 255));\n}\n\nfunction convertToHex(red, green, blue) {\n  return reduceHexValue(\"#\" + colorToHex(red) + colorToHex(green) + colorToHex(blue));\n}\n\nfunction hslToHex(hue, saturation, lightness) {\n  return hslToRgb(hue, saturation, lightness, convertToHex);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hsl(359, 0.75, 0.4),\n *   background: hsl({ hue: 360, saturation: 0.75, lightness: 0.4 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hsl(359, 0.75, 0.4)};\n *   background: ${hsl({ hue: 360, saturation: 0.75, lightness: 0.4 })};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#b3191c\";\n *   background: \"#b3191c\";\n * }\n */\nfunction hsl(value, saturation, lightness) {\n  if (typeof value === 'number' && typeof saturation === 'number' && typeof lightness === 'number') {\n    return hslToHex(value, saturation, lightness);\n  } else if (typeof value === 'object' && saturation === undefined && lightness === undefined) {\n    return hslToHex(value.hue, value.saturation, value.lightness);\n  }\n\n  throw new PolishedError(1);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hsla(359, 0.75, 0.4, 0.7),\n *   background: hsla({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0,7 }),\n *   background: hsla(359, 0.75, 0.4, 1),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hsla(359, 0.75, 0.4, 0.7)};\n *   background: ${hsla({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0,7 })};\n *   background: ${hsla(359, 0.75, 0.4, 1)};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(179,25,28,0.7)\";\n *   background: \"rgba(179,25,28,0.7)\";\n *   background: \"#b3191c\";\n * }\n */\nfunction hsla(value, saturation, lightness, alpha) {\n  if (typeof value === 'number' && typeof saturation === 'number' && typeof lightness === 'number' && typeof alpha === 'number') {\n    return alpha >= 1 ? hslToHex(value, saturation, lightness) : \"rgba(\" + hslToRgb(value, saturation, lightness) + \",\" + alpha + \")\";\n  } else if (typeof value === 'object' && saturation === undefined && lightness === undefined && alpha === undefined) {\n    return value.alpha >= 1 ? hslToHex(value.hue, value.saturation, value.lightness) : \"rgba(\" + hslToRgb(value.hue, value.saturation, value.lightness) + \",\" + value.alpha + \")\";\n  }\n\n  throw new PolishedError(2);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgb(255, 205, 100),\n *   background: rgb({ red: 255, green: 205, blue: 100 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgb(255, 205, 100)};\n *   background: ${rgb({ red: 255, green: 205, blue: 100 })};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#ffcd64\";\n *   background: \"#ffcd64\";\n * }\n */\nfunction rgb(value, green, blue) {\n  if (typeof value === 'number' && typeof green === 'number' && typeof blue === 'number') {\n    return reduceHexValue(\"#\" + numberToHex(value) + numberToHex(green) + numberToHex(blue));\n  } else if (typeof value === 'object' && green === undefined && blue === undefined) {\n    return reduceHexValue(\"#\" + numberToHex(value.red) + numberToHex(value.green) + numberToHex(value.blue));\n  }\n\n  throw new PolishedError(6);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.\n *\n * Can also be used to fade a color by passing a hex value or named CSS color along with an alpha value.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgba(255, 205, 100, 0.7),\n *   background: rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 }),\n *   background: rgba(255, 205, 100, 1),\n *   background: rgba('#ffffff', 0.4),\n *   background: rgba('black', 0.7),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgba(255, 205, 100, 0.7)};\n *   background: ${rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 })};\n *   background: ${rgba(255, 205, 100, 1)};\n *   background: ${rgba('#ffffff', 0.4)};\n *   background: ${rgba('black', 0.7)};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(255,205,100,0.7)\";\n *   background: \"rgba(255,205,100,0.7)\";\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,255,255,0.4)\";\n *   background: \"rgba(0,0,0,0.7)\";\n * }\n */\nfunction rgba(firstValue, secondValue, thirdValue, fourthValue) {\n  if (typeof firstValue === 'string' && typeof secondValue === 'number') {\n    var rgbValue = parseToRgb(firstValue);\n    return \"rgba(\" + rgbValue.red + \",\" + rgbValue.green + \",\" + rgbValue.blue + \",\" + secondValue + \")\";\n  } else if (typeof firstValue === 'number' && typeof secondValue === 'number' && typeof thirdValue === 'number' && typeof fourthValue === 'number') {\n    return fourthValue >= 1 ? rgb(firstValue, secondValue, thirdValue) : \"rgba(\" + firstValue + \",\" + secondValue + \",\" + thirdValue + \",\" + fourthValue + \")\";\n  } else if (typeof firstValue === 'object' && secondValue === undefined && thirdValue === undefined && fourthValue === undefined) {\n    return firstValue.alpha >= 1 ? rgb(firstValue.red, firstValue.green, firstValue.blue) : \"rgba(\" + firstValue.red + \",\" + firstValue.green + \",\" + firstValue.blue + \",\" + firstValue.alpha + \")\";\n  }\n\n  throw new PolishedError(7);\n}\n\nvar isRgb = function isRgb(color) {\n  return typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number' && (typeof color.alpha !== 'number' || typeof color.alpha === 'undefined');\n};\n\nvar isRgba = function isRgba(color) {\n  return typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number' && typeof color.alpha === 'number';\n};\n\nvar isHsl = function isHsl(color) {\n  return typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number' && (typeof color.alpha !== 'number' || typeof color.alpha === 'undefined');\n};\n\nvar isHsla = function isHsla(color) {\n  return typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number' && typeof color.alpha === 'number';\n};\n/**\n * Converts a RgbColor, RgbaColor, HslColor or HslaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `rgb`, `rgba`, `hsl` or `hsla`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: toColorString({ red: 255, green: 205, blue: 100 }),\n *   background: toColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 }),\n *   background: toColorString({ hue: 240, saturation: 1, lightness: 0.5 }),\n *   background: toColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${toColorString({ red: 255, green: 205, blue: 100 })};\n *   background: ${toColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 })};\n *   background: ${toColorString({ hue: 240, saturation: 1, lightness: 0.5 })};\n *   background: ${toColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,205,100,0.72)\";\n *   background: \"#00f\";\n *   background: \"rgba(179,25,25,0.72)\";\n * }\n */\n\n\nfunction toColorString(color) {\n  if (typeof color !== 'object') throw new PolishedError(8);\n  if (isRgba(color)) return rgba(color);\n  if (isRgb(color)) return rgb(color);\n  if (isHsla(color)) return hsla(color);\n  if (isHsl(color)) return hsl(color);\n  throw new PolishedError(8);\n}\n\n// Type definitions taken from https://github.com/gcanti/flow-static-land/blob/master/src/Fun.js\n// eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line no-redeclare\nfunction curried(f, length, acc) {\n  return function fn() {\n    // eslint-disable-next-line prefer-rest-params\n    var combined = acc.concat(Array.prototype.slice.call(arguments));\n    return combined.length >= length ? f.apply(this, combined) : curried(f, length, combined);\n  };\n} // eslint-disable-next-line no-redeclare\n\n\nfunction curry(f) {\n  // eslint-disable-line no-redeclare\n  return curried(f, f.length, []);\n}\n\n/**\n * Changes the hue of the color. Hue is a number between 0 to 360. The first\n * argument for adjustHue is the amount of degrees the color is rotated around\n * the color wheel, always producing a positive hue value.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: adjustHue(180, '#448'),\n *   background: adjustHue('180', 'rgba(101,100,205,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${adjustHue(180, '#448')};\n *   background: ${adjustHue('180', 'rgba(101,100,205,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#888844\";\n *   background: \"rgba(136,136,68,0.7)\";\n * }\n */\n\nfunction adjustHue(degree, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    hue: hslColor.hue + parseFloat(degree)\n  }));\n} // prettier-ignore\n\n\nvar curriedAdjustHue = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(adjustHue);\n\n/**\n * Returns the complement of the provided color. This is identical to adjustHue(180, <color>).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: complement('#448'),\n *   background: complement('rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${complement('#448')};\n *   background: ${complement('rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#884\";\n *   background: \"rgba(153,153,153,0.7)\";\n * }\n */\n\nfunction complement(color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    hue: (hslColor.hue + 180) % 360\n  }));\n}\n\nfunction guard(lowerBoundary, upperBoundary, value) {\n  return Math.max(lowerBoundary, Math.min(upperBoundary, value));\n}\n\n/**\n * Returns a string value for the darkened color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: darken(0.2, '#FFCD64'),\n *   background: darken('0.2', 'rgba(255,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${darken(0.2, '#FFCD64')};\n *   background: ${darken('0.2', 'rgba(255,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#ffbd31\";\n *   background: \"rgba(255,189,49,0.7)\";\n * }\n */\n\nfunction darken(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    lightness: guard(0, 1, hslColor.lightness - parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedDarken = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(darken);\n\n/**\n * Decreases the intensity of a color. Its range is between 0 to 1. The first\n * argument of the desaturate function is the amount by how much the color\n * intensity should be decreased.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: desaturate(0.2, '#CCCD64'),\n *   background: desaturate('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${desaturate(0.2, '#CCCD64')};\n *   background: ${desaturate('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#b8b979\";\n *   background: \"rgba(184,185,121,0.7)\";\n * }\n */\n\nfunction desaturate(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    saturation: guard(0, 1, hslColor.saturation - parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedDesaturate = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(desaturate);\n\n/**\n * Returns a number (float) representing the luminance of a color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: getLuminance('#CCCD64') >= getLuminance('#0000ff') ? '#CCCD64' : '#0000ff',\n *   background: getLuminance('rgba(58, 133, 255, 1)') >= getLuminance('rgba(255, 57, 149, 1)') ?\n *                             'rgba(58, 133, 255, 1)' :\n *                             'rgba(255, 57, 149, 1)',\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${getLuminance('#CCCD64') >= getLuminance('#0000ff') ? '#CCCD64' : '#0000ff'};\n *   background: ${getLuminance('rgba(58, 133, 255, 1)') >= getLuminance('rgba(255, 57, 149, 1)') ?\n *                             'rgba(58, 133, 255, 1)' :\n *                             'rgba(255, 57, 149, 1)'};\n *\n * // CSS in JS Output\n *\n * div {\n *   background: \"#CCCD64\";\n *   background: \"rgba(58, 133, 255, 1)\";\n * }\n */\n\nfunction getLuminance(color) {\n  if (color === 'transparent') return 0;\n  var rgbColor = parseToRgb(color);\n\n  var _Object$keys$map = Object.keys(rgbColor).map(function (key) {\n    var channel = rgbColor[key] / 255;\n    return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\n  }),\n      r = _Object$keys$map[0],\n      g = _Object$keys$map[1],\n      b = _Object$keys$map[2];\n\n  return parseFloat((0.2126 * r + 0.7152 * g + 0.0722 * b).toFixed(3));\n}\n\n/**\n * Returns the contrast ratio between two colors based on\n * [W3's recommended equation for calculating contrast](http://www.w3.org/TR/WCAG20/#contrast-ratiodef).\n *\n * @example\n * const contrastRatio = getContrast('#444', '#fff');\n */\n\nfunction getContrast(color1, color2) {\n  var luminance1 = getLuminance(color1);\n  var luminance2 = getLuminance(color2);\n  return parseFloat((luminance1 > luminance2 ? (luminance1 + 0.05) / (luminance2 + 0.05) : (luminance2 + 0.05) / (luminance1 + 0.05)).toFixed(2));\n}\n\n/**\n * Converts the color to a grayscale, by reducing its saturation to 0.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: grayscale('#CCCD64'),\n *   background: grayscale('rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${grayscale('#CCCD64')};\n *   background: ${grayscale('rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#999\";\n *   background: \"rgba(153,153,153,0.7)\";\n * }\n */\n\nfunction grayscale(color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    saturation: 0\n  }));\n}\n\n/**\n * Converts a HslColor or HslaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `hsl` or `hsla`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hslToColorString({ hue: 240, saturation: 1, lightness: 0.5 }),\n *   background: hslToColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hslToColorString({ hue: 240, saturation: 1, lightness: 0.5 })};\n *   background: ${hslToColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#00f\";\n *   background: \"rgba(179,25,25,0.72)\";\n * }\n */\nfunction hslToColorString(color) {\n  if (typeof color === 'object' && typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number') {\n    if (color.alpha && typeof color.alpha === 'number') {\n      return hsla({\n        hue: color.hue,\n        saturation: color.saturation,\n        lightness: color.lightness,\n        alpha: color.alpha\n      });\n    }\n\n    return hsl({\n      hue: color.hue,\n      saturation: color.saturation,\n      lightness: color.lightness\n    });\n  }\n\n  throw new PolishedError(45);\n}\n\n/**\n * Inverts the red, green and blue values of a color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: invert('#CCCD64'),\n *   background: invert('rgba(101,100,205,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${invert('#CCCD64')};\n *   background: ${invert('rgba(101,100,205,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#33329b\";\n *   background: \"rgba(154,155,50,0.7)\";\n * }\n */\n\nfunction invert(color) {\n  if (color === 'transparent') return color; // parse color string to rgb\n\n  var value = parseToRgb(color);\n  return toColorString(_extends({}, value, {\n    red: 255 - value.red,\n    green: 255 - value.green,\n    blue: 255 - value.blue\n  }));\n}\n\n/**\n * Returns a string value for the lightened color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: lighten(0.2, '#CCCD64'),\n *   background: lighten('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${lighten(0.2, '#FFCD64')};\n *   background: ${lighten('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#e5e6b1\";\n *   background: \"rgba(229,230,177,0.7)\";\n * }\n */\n\nfunction lighten(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    lightness: guard(0, 1, hslColor.lightness + parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedLighten = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(lighten);\n\n/**\n * Determines which contrast guidelines have been met for two colors.\n * Based on the [contrast calculations recommended by W3](https://www.w3.org/WAI/WCAG21/Understanding/contrast-enhanced.html).\n *\n * @example\n * const scores = meetsContrastGuidelines('#444', '#fff');\n */\nfunction meetsContrastGuidelines(color1, color2) {\n  var contrastRatio = getContrast(color1, color2);\n  return {\n    AA: contrastRatio >= 4.5,\n    AALarge: contrastRatio >= 3,\n    AAA: contrastRatio >= 7,\n    AAALarge: contrastRatio >= 4.5\n  };\n}\n\n/**\n * Mixes the two provided colors together by calculating the average of each of the RGB components weighted to the first color by the provided weight.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: mix(0.5, '#f00', '#00f')\n *   background: mix(0.25, '#f00', '#00f')\n *   background: mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${mix(0.5, '#f00', '#00f')};\n *   background: ${mix(0.25, '#f00', '#00f')};\n *   background: ${mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#7f007f\";\n *   background: \"#3f00bf\";\n *   background: \"rgba(63, 0, 191, 0.75)\";\n * }\n */\n\nfunction mix(weight, color, otherColor) {\n  if (color === 'transparent') return otherColor;\n  if (otherColor === 'transparent') return color;\n  if (weight === 0) return otherColor;\n  var parsedColor1 = parseToRgb(color);\n\n  var color1 = _extends({}, parsedColor1, {\n    alpha: typeof parsedColor1.alpha === 'number' ? parsedColor1.alpha : 1\n  });\n\n  var parsedColor2 = parseToRgb(otherColor);\n\n  var color2 = _extends({}, parsedColor2, {\n    alpha: typeof parsedColor2.alpha === 'number' ? parsedColor2.alpha : 1\n  }); // The formula is copied from the original Sass implementation:\n  // http://sass-lang.com/documentation/Sass/Script/Functions.html#mix-instance_method\n\n\n  var alphaDelta = color1.alpha - color2.alpha;\n  var x = parseFloat(weight) * 2 - 1;\n  var y = x * alphaDelta === -1 ? x : x + alphaDelta;\n  var z = 1 + x * alphaDelta;\n  var weight1 = (y / z + 1) / 2.0;\n  var weight2 = 1 - weight1;\n  var mixedColor = {\n    red: Math.floor(color1.red * weight1 + color2.red * weight2),\n    green: Math.floor(color1.green * weight1 + color2.green * weight2),\n    blue: Math.floor(color1.blue * weight1 + color2.blue * weight2),\n    alpha: color1.alpha * (parseFloat(weight) / 1.0) + color2.alpha * (1 - parseFloat(weight) / 1.0)\n  };\n  return rgba(mixedColor);\n} // prettier-ignore\n\n\nvar curriedMix = /*#__PURE__*/curry\n/* ::<number | string, string, string, string> */\n(mix);\n\n/**\n * Increases the opacity of a color. Its range for the amount is between 0 to 1.\n *\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: opacify(0.1, 'rgba(255, 255, 255, 0.9)');\n *   background: opacify(0.2, 'hsla(0, 0%, 100%, 0.5)'),\n *   background: opacify('0.5', 'rgba(255, 0, 0, 0.2)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${opacify(0.1, 'rgba(255, 255, 255, 0.9)')};\n *   background: ${opacify(0.2, 'hsla(0, 0%, 100%, 0.5)')},\n *   background: ${opacify('0.5', 'rgba(255, 0, 0, 0.2)')},\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#fff\";\n *   background: \"rgba(255,255,255,0.7)\";\n *   background: \"rgba(255,0,0,0.7)\";\n * }\n */\n\nfunction opacify(amount, color) {\n  if (color === 'transparent') return color;\n  var parsedColor = parseToRgb(color);\n  var alpha = typeof parsedColor.alpha === 'number' ? parsedColor.alpha : 1;\n\n  var colorWithAlpha = _extends({}, parsedColor, {\n    alpha: guard(0, 1, (alpha * 100 + parseFloat(amount) * 100) / 100)\n  });\n\n  return rgba(colorWithAlpha);\n} // prettier-ignore\n\n\nvar curriedOpacify = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(opacify);\n\nvar defaultLightReturnColor = '#000';\nvar defaultDarkReturnColor = '#fff';\n/**\n * Returns black or white (or optional light and dark return colors) for best\n * contrast depending on the luminosity of the given color.\n * When passing custom return colors, set `strict` to `true` to ensure that the\n * return color always meets or exceeds WCAG level AA or greater. If this test\n * fails, the default return color (black or white) is returned in place of the\n * custom return color.\n *\n * Follows [W3C specs for readability](https://www.w3.org/TR/WCAG20-TECHS/G18.html).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   color: readableColor('#000'),\n *   color: readableColor('black', '#001', '#ff8'),\n *   color: readableColor('white', '#001', '#ff8'),\n *   color: readableColor('red', '#333', '#ddd', true)\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   color: ${readableColor('#000')};\n *   color: ${readableColor('black', '#001', '#ff8')};\n *   color: ${readableColor('white', '#001', '#ff8')};\n *   color: ${readableColor('red', '#333', '#ddd', true)};\n * `\n *\n * // CSS in JS Output\n * element {\n *   color: \"#fff\";\n *   color: \"#ff8\";\n *   color: \"#001\";\n *   color: \"#000\";\n * }\n */\n\nfunction readableColor(color, lightReturnColor, darkReturnColor, strict) {\n  if (lightReturnColor === void 0) {\n    lightReturnColor = defaultLightReturnColor;\n  }\n\n  if (darkReturnColor === void 0) {\n    darkReturnColor = defaultDarkReturnColor;\n  }\n\n  if (strict === void 0) {\n    strict = false;\n  }\n\n  var isLightColor = getLuminance(color) > 0.179;\n  var preferredReturnColor = isLightColor ? lightReturnColor : darkReturnColor; // TODO: Make `strict` the default behaviour in the next major release.\n  // Without `strict`, this may return a color that does not meet WCAG AA.\n\n  if (!strict || getContrast(color, preferredReturnColor) >= 4.5) {\n    return preferredReturnColor;\n  }\n\n  return isLightColor ? defaultLightReturnColor : defaultDarkReturnColor;\n}\n\n/**\n * Converts a RgbColor or RgbaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `rgb` or `rgba`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgbToColorString({ red: 255, green: 205, blue: 100 }),\n *   background: rgbToColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgbToColorString({ red: 255, green: 205, blue: 100 })};\n *   background: ${rgbToColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,205,100,0.72)\";\n * }\n */\nfunction rgbToColorString(color) {\n  if (typeof color === 'object' && typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number') {\n    if (color.alpha && typeof color.alpha === 'number') {\n      return rgba({\n        red: color.red,\n        green: color.green,\n        blue: color.blue,\n        alpha: color.alpha\n      });\n    }\n\n    return rgb({\n      red: color.red,\n      green: color.green,\n      blue: color.blue\n    });\n  }\n\n  throw new PolishedError(46);\n}\n\n/**\n * Increases the intensity of a color. Its range is between 0 to 1. The first\n * argument of the saturate function is the amount by how much the color\n * intensity should be increased.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: saturate(0.2, '#CCCD64'),\n *   background: saturate('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${saturate(0.2, '#FFCD64')};\n *   background: ${saturate('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#e0e250\";\n *   background: \"rgba(224,226,80,0.7)\";\n * }\n */\n\nfunction saturate(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    saturation: guard(0, 1, hslColor.saturation + parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedSaturate = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(saturate);\n\n/**\n * Sets the hue of a color to the provided value. The hue range can be\n * from 0 and 359.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setHue(42, '#CCCD64'),\n *   background: setHue('244', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setHue(42, '#CCCD64')};\n *   background: ${setHue('244', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#cdae64\";\n *   background: \"rgba(107,100,205,0.7)\";\n * }\n */\n\nfunction setHue(hue, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    hue: parseFloat(hue)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetHue = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setHue);\n\n/**\n * Sets the lightness of a color to the provided value. The lightness range can be\n * from 0 and 1.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setLightness(0.2, '#CCCD64'),\n *   background: setLightness('0.75', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setLightness(0.2, '#CCCD64')};\n *   background: ${setLightness('0.75', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#4d4d19\";\n *   background: \"rgba(223,224,159,0.7)\";\n * }\n */\n\nfunction setLightness(lightness, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    lightness: parseFloat(lightness)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetLightness = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setLightness);\n\n/**\n * Sets the saturation of a color to the provided value. The saturation range can be\n * from 0 and 1.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setSaturation(0.2, '#CCCD64'),\n *   background: setSaturation('0.75', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setSaturation(0.2, '#CCCD64')};\n *   background: ${setSaturation('0.75', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#adad84\";\n *   background: \"rgba(228,229,76,0.7)\";\n * }\n */\n\nfunction setSaturation(saturation, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    saturation: parseFloat(saturation)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetSaturation = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setSaturation);\n\n/**\n * Shades a color by mixing it with black. `shade` can produce\n * hue shifts, where as `darken` manipulates the luminance channel and therefore\n * doesn't produce hue shifts.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: shade(0.25, '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${shade(0.25, '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#00003f\";\n * }\n */\n\nfunction shade(percentage, color) {\n  if (color === 'transparent') return color;\n  return curriedMix(parseFloat(percentage), 'rgb(0, 0, 0)', color);\n} // prettier-ignore\n\n\nvar curriedShade = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(shade);\n\n/**\n * Tints a color by mixing it with white. `tint` can produce\n * hue shifts, where as `lighten` manipulates the luminance channel and therefore\n * doesn't produce hue shifts.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: tint(0.25, '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${tint(0.25, '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#bfbfff\";\n * }\n */\n\nfunction tint(percentage, color) {\n  if (color === 'transparent') return color;\n  return curriedMix(parseFloat(percentage), 'rgb(255, 255, 255)', color);\n} // prettier-ignore\n\n\nvar curriedTint = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(tint);\n\n/**\n * Decreases the opacity of a color. Its range for the amount is between 0 to 1.\n *\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: transparentize(0.1, '#fff');\n *   background: transparentize(0.2, 'hsl(0, 0%, 100%)'),\n *   background: transparentize('0.5', 'rgba(255, 0, 0, 0.8)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${transparentize(0.1, '#fff')};\n *   background: ${transparentize(0.2, 'hsl(0, 0%, 100%)')},\n *   background: ${transparentize('0.5', 'rgba(255, 0, 0, 0.8)')},\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(255,255,255,0.9)\";\n *   background: \"rgba(255,255,255,0.8)\";\n *   background: \"rgba(255,0,0,0.3)\";\n * }\n */\n\nfunction transparentize(amount, color) {\n  if (color === 'transparent') return color;\n  var parsedColor = parseToRgb(color);\n  var alpha = typeof parsedColor.alpha === 'number' ? parsedColor.alpha : 1;\n\n  var colorWithAlpha = _extends({}, parsedColor, {\n    alpha: guard(0, 1, (alpha * 100 - parseFloat(amount) * 100) / 100)\n  });\n\n  return rgba(colorWithAlpha);\n} // prettier-ignore\n\n\nvar curriedTransparentize = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(transparentize);\n\n/**\n * Shorthand for easily setting the animation property. Allows either multiple arrays with animations\n * or a single animation spread over the arguments.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...animation(['rotate', '1s', 'ease-in-out'], ['colorchange', '2s'])\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${animation(['rotate', '1s', 'ease-in-out'], ['colorchange', '2s'])}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'animation': 'rotate 1s ease-in-out, colorchange 2s'\n * }\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...animation('rotate', '1s', 'ease-in-out')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${animation('rotate', '1s', 'ease-in-out')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'animation': 'rotate 1s ease-in-out'\n * }\n */\nfunction animation() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  // Allow single or multiple animations passed\n  var multiMode = Array.isArray(args[0]);\n\n  if (!multiMode && args.length > 8) {\n    throw new PolishedError(64);\n  }\n\n  var code = args.map(function (arg) {\n    if (multiMode && !Array.isArray(arg) || !multiMode && Array.isArray(arg)) {\n      throw new PolishedError(65);\n    }\n\n    if (Array.isArray(arg) && arg.length > 8) {\n      throw new PolishedError(66);\n    }\n\n    return Array.isArray(arg) ? arg.join(' ') : arg;\n  }).join(', ');\n  return {\n    animation: code\n  };\n}\n\n/**\n * Shorthand that accepts any number of backgroundImage values as parameters for creating a single background statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...backgroundImages('url(\"/image/background.jpg\")', 'linear-gradient(red, green)')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${backgroundImages('url(\"/image/background.jpg\")', 'linear-gradient(red, green)')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'backgroundImage': 'url(\"/image/background.jpg\"), linear-gradient(red, green)'\n * }\n */\nfunction backgroundImages() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  return {\n    backgroundImage: properties.join(', ')\n  };\n}\n\n/**\n * Shorthand that accepts any number of background values as parameters for creating a single background statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...backgrounds('url(\"/image/background.jpg\")', 'linear-gradient(red, green)', 'center no-repeat')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${backgrounds('url(\"/image/background.jpg\")', 'linear-gradient(red, green)', 'center no-repeat')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'background': 'url(\"/image/background.jpg\"), linear-gradient(red, green), center no-repeat'\n * }\n */\nfunction backgrounds() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  return {\n    background: properties.join(', ')\n  };\n}\n\nvar sideMap = ['top', 'right', 'bottom', 'left'];\n/**\n * Shorthand for the border property that splits out individual properties for use with tools like Fela and Styletron. A side keyword can optionally be passed to target only one side's border properties.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...border('1px', 'solid', 'red')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${border('1px', 'solid', 'red')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderColor': 'red',\n *   'borderStyle': 'solid',\n *   'borderWidth': `1px`,\n * }\n *\n * // Styles as object usage\n * const styles = {\n *   ...border('top', '1px', 'solid', 'red')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${border('top', '1px', 'solid', 'red')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopColor': 'red',\n *   'borderTopStyle': 'solid',\n *   'borderTopWidth': `1px`,\n * }\n */\n\nfunction border(sideKeyword) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  if (typeof sideKeyword === 'string' && sideMap.indexOf(sideKeyword) >= 0) {\n    var _ref;\n\n    return _ref = {}, _ref[\"border\" + capitalizeString(sideKeyword) + \"Width\"] = values[0], _ref[\"border\" + capitalizeString(sideKeyword) + \"Style\"] = values[1], _ref[\"border\" + capitalizeString(sideKeyword) + \"Color\"] = values[2], _ref;\n  } else {\n    values.unshift(sideKeyword);\n    return {\n      borderWidth: values[0],\n      borderStyle: values[1],\n      borderColor: values[2]\n    };\n  }\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderColor('red', 'green', 'blue', 'yellow')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderColor('red', 'green', 'blue', 'yellow')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopColor': 'red',\n *   'borderRightColor': 'green',\n *   'borderBottomColor': 'blue',\n *   'borderLeftColor': 'yellow'\n * }\n */\nfunction borderColor() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderColor'].concat(values));\n}\n\n/**\n * Shorthand that accepts a value for side and a value for radius and applies the radius value to both corners of the side.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderRadius('top', '5px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderRadius('top', '5px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopRightRadius': '5px',\n *   'borderTopLeftRadius': '5px',\n * }\n */\nfunction borderRadius(side, radius) {\n  var uppercaseSide = capitalizeString(side);\n\n  if (!radius && radius !== 0) {\n    throw new PolishedError(62);\n  }\n\n  if (uppercaseSide === 'Top' || uppercaseSide === 'Bottom') {\n    var _ref;\n\n    return _ref = {}, _ref[\"border\" + uppercaseSide + \"RightRadius\"] = radius, _ref[\"border\" + uppercaseSide + \"LeftRadius\"] = radius, _ref;\n  }\n\n  if (uppercaseSide === 'Left' || uppercaseSide === 'Right') {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[\"borderTop\" + uppercaseSide + \"Radius\"] = radius, _ref2[\"borderBottom\" + uppercaseSide + \"Radius\"] = radius, _ref2;\n  }\n\n  throw new PolishedError(63);\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderStyle('solid', 'dashed', 'dotted', 'double')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderStyle('solid', 'dashed', 'dotted', 'double')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopStyle': 'solid',\n *   'borderRightStyle': 'dashed',\n *   'borderBottomStyle': 'dotted',\n *   'borderLeftStyle': 'double'\n * }\n */\nfunction borderStyle() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderStyle'].concat(values));\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderWidth('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderWidth('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopWidth': '12px',\n *   'borderRightWidth': '24px',\n *   'borderBottomWidth': '36px',\n *   'borderLeftWidth': '48px'\n * }\n */\nfunction borderWidth() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderWidth'].concat(values));\n}\n\nfunction generateSelectors(template, state) {\n  var stateSuffix = state ? \":\" + state : '';\n  return template(stateSuffix);\n}\n/**\n * Function helper that adds an array of states to a template of selectors. Used in textInputs and buttons.\n * @private\n */\n\n\nfunction statefulSelectors(states, template, stateMap) {\n  if (!template) throw new PolishedError(67);\n  if (states.length === 0) return generateSelectors(template, null);\n  var selectors = [];\n\n  for (var i = 0; i < states.length; i += 1) {\n    if (stateMap && stateMap.indexOf(states[i]) < 0) {\n      throw new PolishedError(68);\n    }\n\n    selectors.push(generateSelectors(template, states[i]));\n  }\n\n  selectors = selectors.join(',');\n  return selectors;\n}\n\nvar stateMap = [undefined, null, 'active', 'focus', 'hover'];\n\nfunction template(state) {\n  return \"button\" + state + \",\\n  input[type=\\\"button\\\"]\" + state + \",\\n  input[type=\\\"reset\\\"]\" + state + \",\\n  input[type=\\\"submit\\\"]\" + state;\n}\n/**\n * Populates selectors that target all buttons. You can pass optional states to append to the selectors.\n * @example\n * // Styles as object usage\n * const styles = {\n *   [buttons('active')]: {\n *     'border': 'none'\n *   }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   > ${buttons('active')} {\n *     border: none;\n *   }\n * `\n *\n * // CSS in JS Output\n *\n *  'button:active,\n *  'input[type=\"button\"]:active,\n *  'input[type=\\\"reset\\\"]:active,\n *  'input[type=\\\"submit\\\"]:active: {\n *   'border': 'none'\n * }\n */\n\n\nfunction buttons() {\n  for (var _len = arguments.length, states = new Array(_len), _key = 0; _key < _len; _key++) {\n    states[_key] = arguments[_key];\n  }\n\n  return statefulSelectors(states, template, stateMap);\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...margin('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${margin('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'marginTop': '12px',\n *   'marginRight': '24px',\n *   'marginBottom': '36px',\n *   'marginLeft': '48px'\n * }\n */\nfunction margin() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['margin'].concat(values));\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...padding('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${padding('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'paddingTop': '12px',\n *   'paddingRight': '24px',\n *   'paddingBottom': '36px',\n *   'paddingLeft': '48px'\n * }\n */\nfunction padding() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['padding'].concat(values));\n}\n\nvar positionMap$1 = ['absolute', 'fixed', 'relative', 'static', 'sticky'];\n/**\n * Shorthand accepts up to five values, including null to skip a value, and maps them to their respective directions. The first value can optionally be a position keyword.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...position('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${position('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'top': '12px',\n *   'right': '24px',\n *   'bottom': '36px',\n *   'left': '48px'\n * }\n *\n * // Styles as object usage\n * const styles = {\n *   ...position('absolute', '12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${position('absolute', '12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'position': 'absolute',\n *   'top': '12px',\n *   'right': '24px',\n *   'bottom': '36px',\n *   'left': '48px'\n * }\n */\n\nfunction position(firstValue) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  if (positionMap$1.indexOf(firstValue) >= 0 && firstValue) {\n    return _extends({}, directionalProperty.apply(void 0, [''].concat(values)), {\n      position: firstValue\n    });\n  } else {\n    return directionalProperty.apply(void 0, ['', firstValue].concat(values));\n  }\n}\n\n/**\n * Shorthand to set the height and width properties in a single statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...size('300px', '250px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${size('300px', '250px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'height': '300px',\n *   'width': '250px',\n * }\n */\nfunction size(height, width) {\n  if (width === void 0) {\n    width = height;\n  }\n\n  return {\n    height: height,\n    width: width\n  };\n}\n\nvar stateMap$1 = [undefined, null, 'active', 'focus', 'hover'];\n\nfunction template$1(state) {\n  return \"input[type=\\\"color\\\"]\" + state + \",\\n    input[type=\\\"date\\\"]\" + state + \",\\n    input[type=\\\"datetime\\\"]\" + state + \",\\n    input[type=\\\"datetime-local\\\"]\" + state + \",\\n    input[type=\\\"email\\\"]\" + state + \",\\n    input[type=\\\"month\\\"]\" + state + \",\\n    input[type=\\\"number\\\"]\" + state + \",\\n    input[type=\\\"password\\\"]\" + state + \",\\n    input[type=\\\"search\\\"]\" + state + \",\\n    input[type=\\\"tel\\\"]\" + state + \",\\n    input[type=\\\"text\\\"]\" + state + \",\\n    input[type=\\\"time\\\"]\" + state + \",\\n    input[type=\\\"url\\\"]\" + state + \",\\n    input[type=\\\"week\\\"]\" + state + \",\\n    input:not([type])\" + state + \",\\n    textarea\" + state;\n}\n/**\n * Populates selectors that target all text inputs. You can pass optional states to append to the selectors.\n * @example\n * // Styles as object usage\n * const styles = {\n *   [textInputs('active')]: {\n *     'border': 'none'\n *   }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   > ${textInputs('active')} {\n *     border: none;\n *   }\n * `\n *\n * // CSS in JS Output\n *\n *  'input[type=\"color\"]:active,\n *  input[type=\"date\"]:active,\n *  input[type=\"datetime\"]:active,\n *  input[type=\"datetime-local\"]:active,\n *  input[type=\"email\"]:active,\n *  input[type=\"month\"]:active,\n *  input[type=\"number\"]:active,\n *  input[type=\"password\"]:active,\n *  input[type=\"search\"]:active,\n *  input[type=\"tel\"]:active,\n *  input[type=\"text\"]:active,\n *  input[type=\"time\"]:active,\n *  input[type=\"url\"]:active,\n *  input[type=\"week\"]:active,\n *  input:not([type]):active,\n *  textarea:active': {\n *   'border': 'none'\n * }\n */\n\n\nfunction textInputs() {\n  for (var _len = arguments.length, states = new Array(_len), _key = 0; _key < _len; _key++) {\n    states[_key] = arguments[_key];\n  }\n\n  return statefulSelectors(states, template$1, stateMap$1);\n}\n\n/**\n * Accepts any number of transition values as parameters for creating a single transition statement. You may also pass an array of properties as the first parameter that you would like to apply the same transition values to (second parameter).\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...transitions('opacity 1.0s ease-in 0s', 'width 2.0s ease-in 2s'),\n *   ...transitions(['color', 'background-color'], '2.0s ease-in 2s')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${transitions('opacity 1.0s ease-in 0s', 'width 2.0s ease-in 2s')};\n *   ${transitions(['color', 'background-color'], '2.0s ease-in 2s'),};\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'transition': 'opacity 1.0s ease-in 0s, width 2.0s ease-in 2s'\n *   'transition': 'color 2.0s ease-in 2s, background-color 2.0s ease-in 2s',\n * }\n */\n\nfunction transitions() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  if (Array.isArray(properties[0]) && properties.length === 2) {\n    var value = properties[1];\n\n    if (typeof value !== 'string') {\n      throw new PolishedError(61);\n    }\n\n    var transitionsString = properties[0].map(function (property) {\n      return property + \" \" + value;\n    }).join(', ');\n    return {\n      transition: transitionsString\n    };\n  } else {\n    return {\n      transition: properties.join(', ')\n    };\n  }\n}\n\nexport { curriedAdjustHue as adjustHue, animation, backgroundImages, backgrounds, between, border, borderColor, borderRadius, borderStyle, borderWidth, buttons, clearFix, complement, cover, cssVar, curriedDarken as darken, curriedDesaturate as desaturate, directionalProperty, ellipsis, em, fluidRange, fontFace, getContrast, getLuminance, getValueAndUnit, grayscale, hiDPI, hideText, hideVisually, hsl, hslToColorString, hsla, invert, curriedLighten as lighten, linearGradient, margin, math, meetsContrastGuidelines, curriedMix as mix, modularScale, normalize, curriedOpacify as opacify, padding, parseToHsl, parseToRgb, position, radialGradient, readableColor, rem, retinaImage, rgb, rgbToColorString, rgba, curriedSaturate as saturate, curriedSetHue as setHue, curriedSetLightness as setLightness, curriedSetSaturation as setSaturation, curriedShade as shade, size, stripUnit, textInputs, timingFunctions, curriedTint as tint, toColorString, transitions, curriedTransparentize as transparentize, triangle, wordWrap };\n","import { WebGLRenderer, Scene, PerspectiveCamera, Raycaster, TextureLoader, Vector2, Vector3, Color, Mesh, SphereGeometry, MeshBasicMaterial, BackSide, EventDispatcher, MOUSE, Quaternion, Spherical, Clock } from 'three';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FlyControls } from 'three/examples/jsm/controls/FlyControls.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { parseToRgb, opacify } from 'polished';\nimport TWEEN from '@tweenjs/tween.js';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".scene-nav-info {\\n  bottom: 5px;\\n  width: 100%;\\n  text-align: center;\\n  color: slategrey;\\n  opacity: 0.7;\\n  font-size: 10px;\\n}\\n\\n.scene-tooltip {\\n  color: lavender;\\n  font-size: 15px;\\n}\\n\\n.scene-nav-info, .scene-tooltip {\\n  position: absolute;\\n  font-family: sans-serif;\\n  pointer-events: none;\\n}\";\nstyleInject(css_248z);\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  WebGLRenderer: WebGLRenderer,\n  Scene: Scene,\n  PerspectiveCamera: PerspectiveCamera,\n  Raycaster: Raycaster,\n  TextureLoader: TextureLoader,\n  Vector2: Vector2,\n  Vector3: Vector3,\n  Color: Color,\n  Mesh: Mesh,\n  SphereGeometry: SphereGeometry,\n  MeshBasicMaterial: MeshBasicMaterial,\n  BackSide: BackSide,\n  EventDispatcher: EventDispatcher,\n  MOUSE: MOUSE,\n  Quaternion: Quaternion,\n  Spherical: Spherical,\n  Clock: Clock\n};\nvar threeRenderObjects = Kapsule({\n  props: {\n    width: {\n      \"default\": window.innerWidth,\n      onChange: function onChange(width, state, prevWidth) {\n        isNaN(width) && (state.width = prevWidth);\n      }\n    },\n    height: {\n      \"default\": window.innerHeight,\n      onChange: function onChange(height, state, prevHeight) {\n        isNaN(height) && (state.height = prevHeight);\n      }\n    },\n    backgroundColor: {\n      \"default\": '#000011'\n    },\n    backgroundImageUrl: {},\n    onBackgroundImageLoaded: {},\n    showNavInfo: {\n      \"default\": true\n    },\n    skyRadius: {\n      \"default\": 50000\n    },\n    objects: {\n      \"default\": []\n    },\n    enablePointerInteraction: {\n      \"default\": true,\n      onChange: function onChange(_, state) {\n        // Reset hover state\n        state.hoverObj = null;\n        if (state.toolTipElem) state.toolTipElem.innerHTML = '';\n      },\n      triggerUpdate: false\n    },\n    lineHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    hoverOrderComparator: {\n      \"default\": function _default() {\n        return -1;\n      },\n      triggerUpdate: false\n    },\n    // keep existing order by default\n    tooltipContent: {\n      triggerUpdate: false\n    },\n    hoverDuringDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    onHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onRightClick: {\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    tick: function tick(state) {\n      if (state.initialised) {\n        state.controls.update && state.controls.update(state.clock.getDelta()); // timedelta is required for fly controls\n\n        state.postProcessingComposer ? state.postProcessingComposer.render() // if using postprocessing, switch the output to it\n        : state.renderer.render(state.scene, state.camera);\n\n        if (state.enablePointerInteraction) {\n          // Update tooltip and trigger onHover events\n          var topObject = null;\n\n          if (state.hoverDuringDrag || !state.controlsDragging) {\n            var raycaster = new three.Raycaster();\n            raycaster.params.Line.threshold = state.lineHoverPrecision; // set linePrecision\n\n            raycaster.setFromCamera(state.mousePos, state.camera);\n            var intersects = raycaster.intersectObjects(state.objects, true).map(function (_ref) {\n              var object = _ref.object;\n              return object;\n            }).sort(state.hoverOrderComparator);\n            topObject = intersects.length ? intersects[0] : null;\n          }\n\n          if (topObject !== state.hoverObj) {\n            state.onHover(topObject, state.hoverObj);\n            state.toolTipElem.innerHTML = topObject ? accessorFn(state.tooltipContent)(topObject) || '' : '';\n            state.hoverObj = topObject;\n          }\n        }\n\n        TWEEN.update(); // update camera animation tweens\n      }\n\n      return this;\n    },\n    cameraPosition: function cameraPosition(state, position, lookAt, transitionDuration) {\n      var camera = state.camera; // Setter\n\n      if (position && state.initialised) {\n        var finalPos = position;\n        var finalLookAt = lookAt || {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalPos);\n          setLookAt(finalLookAt);\n        } else {\n          var camPos = Object.assign({}, camera.position);\n          var camLookAt = getLookAt();\n          new TWEEN.Tween(camPos).to(finalPos, transitionDuration).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setCameraPos).start(); // Face direction in 1/3rd of time\n\n          new TWEEN.Tween(camLookAt).to(finalLookAt, transitionDuration / 3).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setLookAt).start();\n        }\n\n        return this;\n      } // Getter\n\n\n      return Object.assign({}, camera.position, {\n        lookAt: getLookAt()\n      }); //\n\n      function setCameraPos(pos) {\n        var x = pos.x,\n            y = pos.y,\n            z = pos.z;\n        if (x !== undefined) camera.position.x = x;\n        if (y !== undefined) camera.position.y = y;\n        if (z !== undefined) camera.position.z = z;\n      }\n\n      function setLookAt(lookAt) {\n        state.controls.target = new three.Vector3(lookAt.x, lookAt.y, lookAt.z);\n      }\n\n      function getLookAt() {\n        return Object.assign(new three.Vector3(0, 0, -1000).applyQuaternion(camera.quaternion).add(camera.position));\n      }\n    },\n    renderer: function renderer(state) {\n      return state.renderer;\n    },\n    scene: function scene(state) {\n      return state.scene;\n    },\n    camera: function camera(state) {\n      return state.camera;\n    },\n    postProcessingComposer: function postProcessingComposer(state) {\n      return state.postProcessingComposer;\n    },\n    controls: function controls(state) {\n      return state.controls;\n    },\n    tbControls: function tbControls(state) {\n      return state.controls;\n    } // to be deprecated\n\n  },\n  stateInit: function stateInit() {\n    return {\n      scene: new three.Scene(),\n      camera: new three.PerspectiveCamera(),\n      clock: new three.Clock()\n    };\n  },\n  init: function init(domNode, state, _ref2) {\n    var _ref2$controlType = _ref2.controlType,\n        controlType = _ref2$controlType === void 0 ? 'trackball' : _ref2$controlType,\n        _ref2$rendererConfig = _ref2.rendererConfig,\n        rendererConfig = _ref2$rendererConfig === void 0 ? {} : _ref2$rendererConfig,\n        _ref2$waitForLoadComp = _ref2.waitForLoadComplete,\n        waitForLoadComplete = _ref2$waitForLoadComp === void 0 ? true : _ref2$waitForLoadComp;\n    // Wipe DOM\n    domNode.innerHTML = ''; // Add relative container\n\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative'; // Add nav info section\n\n    state.container.appendChild(state.navInfo = document.createElement('div'));\n    state.navInfo.className = 'scene-nav-info';\n    state.navInfo.textContent = {\n      orbit: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      trackball: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      fly: 'WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw'\n    }[controlType] || '';\n    state.navInfo.style.display = state.showNavInfo ? null : 'none'; // Setup tooltip\n\n    state.toolTipElem = document.createElement('div');\n    state.toolTipElem.classList.add('scene-tooltip');\n    state.container.appendChild(state.toolTipElem); // Capture mouse coords on move\n\n    state.mousePos = new three.Vector2();\n    state.mousePos.x = -2; // Initialize off canvas\n\n    state.mousePos.y = -2;\n    state.container.addEventListener(\"mousemove\", function (ev) {\n      if (state.enablePointerInteraction) {\n        // update the mouse pos\n        var offset = getOffset(state.container),\n            relPos = {\n          x: ev.pageX - offset.left,\n          y: ev.pageY - offset.top\n        };\n        state.mousePos.x = relPos.x / state.width * 2 - 1;\n        state.mousePos.y = -(relPos.y / state.height) * 2 + 1; // Move tooltip\n\n        state.toolTipElem.style.top = \"\".concat(relPos.y, \"px\");\n        state.toolTipElem.style.left = \"\".concat(relPos.x, \"px\");\n        state.toolTipElem.style.transform = \"translate(-\".concat(relPos.x / state.width * 100, \"%, 21px)\"); // adjust horizontal position to not exceed canvas boundaries\n      }\n\n      function getOffset(el) {\n        var rect = el.getBoundingClientRect(),\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        return {\n          top: rect.top + scrollTop,\n          left: rect.left + scrollLeft\n        };\n      }\n    }, false); // Handle click events on objs\n\n    state.container.addEventListener('mouseup', function (ev) {\n      if (state.ignoreOneClick) {\n        state.ignoreOneClick = false; // because of controls end event\n\n        return;\n      }\n\n      if (ev.button === 0) {\n        // left-click\n        state.onClick(state.hoverObj || null, ev); // trigger background clicks with null\n      }\n\n      if (ev.button === 2 && state.onRightClick) {\n        // right-click\n        state.onRightClick(state.hoverObj || null, ev);\n      }\n    }, true); // use capture phase to prevent propagation blocking from controls (specifically for fly)\n\n    state.container.addEventListener('contextmenu', function (ev) {\n      if (state.onRightClick) ev.preventDefault(); // prevent default contextmenu behavior and allow mouseup to fire instead\n    }, false); // Setup renderer, camera and controls\n\n    state.renderer = new three.WebGLRenderer(Object.assign({\n      antialias: true,\n      alpha: true\n    }, rendererConfig));\n    state.renderer.setPixelRatio(window.devicePixelRatio);\n    state.container.appendChild(state.renderer.domElement); // configure post-processing composer\n\n    state.postProcessingComposer = new EffectComposer(state.renderer);\n    state.postProcessingComposer.addPass(new RenderPass(state.scene, state.camera)); // render scene as first pass\n    // configure controls\n\n    state.controls = new {\n      trackball: TrackballControls,\n      orbit: OrbitControls,\n      fly: FlyControls\n    }[controlType](state.camera, state.renderer.domElement);\n\n    if (controlType === 'fly') {\n      state.controls.movementSpeed = 300;\n      state.controls.rollSpeed = Math.PI / 6;\n      state.controls.dragToLook = true;\n    }\n\n    if (controlType === 'trackball' || controlType === 'orbit') {\n      state.controls.minDistance = 0.1;\n      state.controls.maxDistance = state.skyRadius;\n      state.controls.addEventListener('start', function () {\n        return state.controlsEngaged = true;\n      });\n      state.controls.addEventListener('change', function () {\n        if (state.controlsEngaged) {\n          state.controlsDragging = true;\n          state.ignoreOneClick = true;\n        }\n      });\n      state.controls.addEventListener('end', function () {\n        state.controlsEngaged = false;\n        state.controlsDragging = false;\n      });\n    }\n\n    state.renderer.setSize(state.width, state.height);\n    state.postProcessingComposer.setSize(state.width, state.height);\n    state.camera.aspect = state.width / state.height;\n    state.camera.updateProjectionMatrix();\n    state.camera.position.z = 1000; // add sky\n\n    state.scene.add(state.skysphere = new three.Mesh());\n    state.skysphere.visible = false;\n    state.loadComplete = state.scene.visible = !waitForLoadComplete;\n    window.scene = state.scene;\n  },\n  update: function update(state, changedProps) {\n    // resize canvas\n    if (state.width && state.height && (changedProps.hasOwnProperty('width') || changedProps.hasOwnProperty('height'))) {\n      state.container.style.width = state.width;\n      state.container.style.height = state.height;\n      state.renderer.setSize(state.width, state.height);\n      state.postProcessingComposer.setSize(state.width, state.height);\n      state.camera.aspect = state.width / state.height;\n      state.camera.updateProjectionMatrix();\n    }\n\n    if (changedProps.hasOwnProperty('skyRadius') && state.skyRadius) {\n      state.controls.hasOwnProperty('maxDistance') && changedProps.skyRadius && (state.controls.maxDistance = state.skyRadius);\n      state.camera.far = state.skyRadius * 2.5;\n      state.camera.updateProjectionMatrix();\n      state.skysphere.geometry = new three.SphereGeometry(state.skyRadius);\n    }\n\n    if (changedProps.hasOwnProperty('backgroundColor')) {\n      var alpha = parseToRgb(state.backgroundColor).alpha;\n      if (alpha === undefined) alpha = 1;\n      state.renderer.setClearColor(new three.Color(opacify(1, state.backgroundColor)), alpha);\n    }\n\n    if (changedProps.hasOwnProperty('backgroundImageUrl')) {\n      if (!state.backgroundImageUrl) {\n        state.skysphere.visible = false;\n        state.skysphere.material.map = null;\n        !state.loadComplete && finishLoad();\n      } else {\n        new three.TextureLoader().load(state.backgroundImageUrl, function (texture) {\n          state.skysphere.material = new three.MeshBasicMaterial({\n            map: texture,\n            side: three.BackSide\n          });\n          state.skysphere.visible = true; // triggered when background image finishes loading (asynchronously to allow 1 frame to load texture)\n\n          state.onBackgroundImageLoaded && setTimeout(state.onBackgroundImageLoaded);\n          !state.loadComplete && finishLoad();\n        });\n      }\n    }\n\n    changedProps.hasOwnProperty('showNavInfo') && (state.navInfo.style.display = state.showNavInfo ? null : 'none');\n\n    if (changedProps.hasOwnProperty('objects')) {\n      (changedProps.objects || []).forEach(function (obj) {\n        return state.scene.remove(obj);\n      }); // Clear the place\n\n      state.objects.forEach(function (obj) {\n        return state.scene.add(obj);\n      }); // Add to scene\n    } //\n\n\n    function finishLoad() {\n      state.loadComplete = state.scene.visible = true;\n    }\n  }\n});\n\nexport default threeRenderObjects;\n","import { AmbientLight, DirectionalLight, Vector3 } from 'three';\nimport ThreeDragControls from 'three-dragcontrols';\nimport ThreeForceGraph from 'three-forcegraph';\nimport ThreeRenderObjects from 'three-render-objects';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".graph-info-msg {\\n  top: 50%;\\n  width: 100%;\\n  text-align: center;\\n  color: lavender;\\n  opacity: 0.7;\\n  font-size: 22px;\\n  position: absolute;\\n  font-family: Sans-serif;\\n}\\n\\n.grabbable {\\n  cursor: move;\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\n.grabbable:active {\\n  cursor: grabbing;\\n  cursor: -moz-grabbing;\\n  cursor: -webkit-grabbing;\\n}\";\nstyleInject(css_248z);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction linkKapsule (kapsulePropName, kapsuleType) {\n  var dummyK = new kapsuleType(); // To extract defaults\n\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          state[kapsulePropName][prop](v);\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        var kapsuleInstance = state[kapsulePropName];\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n        return returnVal === kapsuleInstance ? this // chain based on the parent object, not the inner kapsule\n        : returnVal;\n      };\n    }\n  };\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  AmbientLight: AmbientLight,\n  DirectionalLight: DirectionalLight,\n  Vector3: Vector3\n};\n\nvar CAMERA_DISTANCE2NODES_FACTOR = 170; //\n// Expose config from forceGraph\n\nvar bindFG = linkKapsule('forceGraph', ThreeForceGraph);\nvar linkedFGProps = Object.assign.apply(Object, _toConsumableArray(['jsonUrl', 'graphData', 'numDimensions', 'dagMode', 'dagLevelDistance', 'nodeRelSize', 'nodeId', 'nodeVal', 'nodeResolution', 'nodeColor', 'nodeAutoColorBy', 'nodeOpacity', 'nodeVisibility', 'nodeThreeObject', 'nodeThreeObjectExtend', 'linkSource', 'linkTarget', 'linkVisibility', 'linkColor', 'linkAutoColorBy', 'linkOpacity', 'linkWidth', 'linkResolution', 'linkCurvature', 'linkCurveRotation', 'linkMaterial', 'linkThreeObject', 'linkThreeObjectExtend', 'linkPositionUpdate', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution', 'forceEngine', 'd3AlphaDecay', 'd3VelocityDecay', 'd3AlphaMin', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkProp(p));\n})));\nvar linkedFGMethods = Object.assign.apply(Object, _toConsumableArray(['refresh', 'd3Force', 'd3ReheatSimulation', 'emitParticle'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkMethod(p));\n}))); // Expose config from renderObjs\n\nvar bindRenderObjs = linkKapsule('renderObjs', ThreeRenderObjects);\nvar linkedRenderObjsProps = Object.assign.apply(Object, _toConsumableArray(['width', 'height', 'backgroundColor', 'showNavInfo', 'enablePointerInteraction'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkProp(p));\n})));\nvar linkedRenderObjsMethods = Object.assign.apply(Object, _toConsumableArray(['cameraPosition', 'postProcessingComposer'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkMethod(p));\n}))); //\n\nvar _3dForceGraph = Kapsule({\n  props: _objectSpread2(_objectSpread2({\n    nodeLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkHoverPrecision: {\n      \"default\": 1,\n      onChange: function onChange(p, state) {\n        return state.renderObjs.lineHoverPrecision(p);\n      },\n      triggerUpdate: false\n    },\n    enableNavigationControls: {\n      \"default\": true,\n      onChange: function onChange(enable, state) {\n        var controls = state.renderObjs.controls();\n\n        if (controls) {\n          controls.enabled = enable;\n        }\n      },\n      triggerUpdate: false\n    },\n    enableNodeDrag: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    onNodeDrag: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeDragEnd: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onBackgroundClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onBackgroundRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    }\n  }, linkedFGProps), linkedRenderObjsProps),\n  methods: _objectSpread2(_objectSpread2({\n    graph2ScreenCoords: function graph2ScreenCoords(state, x, y, z) {\n      var vec = new three.Vector3(x, y, z);\n      vec.project(this.camera()); // project to the camera plane\n\n      return {\n        // align relative pos to canvas dimensions\n        x: (vec.x + 1) * state.width / 2,\n        y: -(vec.y - 1) * state.height / 2\n      };\n    },\n    pauseAnimation: function pauseAnimation(state) {\n      if (state.animationFrameRequestId !== null) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      if (state.animationFrameRequestId === null) {\n        this._animationCycle();\n      }\n\n      return this;\n    },\n    _animationCycle: function _animationCycle(state) {\n      if (state.enablePointerInteraction) {\n        // reset canvas cursor (override dragControls cursor)\n        this.renderer().domElement.style.cursor = null;\n      } // Frame cycle\n\n\n      state.forceGraph.tickFrame();\n      state.renderObjs.tick();\n      state.animationFrameRequestId = requestAnimationFrame(this._animationCycle);\n    },\n    scene: function scene(state) {\n      return state.renderObjs.scene();\n    },\n    // Expose scene\n    camera: function camera(state) {\n      return state.renderObjs.camera();\n    },\n    // Expose camera\n    renderer: function renderer(state) {\n      return state.renderObjs.renderer();\n    },\n    // Expose renderer\n    controls: function controls(state) {\n      return state.renderObjs.controls();\n    },\n    // Expose controls\n    tbControls: function tbControls(state) {\n      return state.renderObjs.tbControls();\n    },\n    // To be deprecated\n    _destructor: function _destructor() {\n      this.pauseAnimation();\n      this.graphData({\n        nodes: [],\n        links: []\n      });\n    }\n  }, linkedFGMethods), linkedRenderObjsMethods),\n  stateInit: function stateInit(_ref5) {\n    var controlType = _ref5.controlType,\n        rendererConfig = _ref5.rendererConfig;\n    return {\n      forceGraph: new ThreeForceGraph(),\n      renderObjs: ThreeRenderObjects({\n        controlType: controlType,\n        rendererConfig: rendererConfig\n      })\n    };\n  },\n  init: function init(domNode, state) {\n    // Wipe DOM\n    domNode.innerHTML = ''; // Add relative container\n\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative'; // Add renderObjs\n\n    var roDomNode = document.createElement('div');\n    state.container.appendChild(roDomNode);\n    state.renderObjs(roDomNode);\n    var camera = state.renderObjs.camera();\n    var renderer = state.renderObjs.renderer();\n    var controls = state.renderObjs.controls();\n    controls.enabled = !!state.enableNavigationControls;\n    state.lastSetCameraZ = camera.position.z; // Add info space\n\n    var infoElem;\n    state.container.appendChild(infoElem = document.createElement('div'));\n    infoElem.className = 'graph-info-msg';\n    infoElem.textContent = ''; // config forcegraph\n\n    state.forceGraph.onLoading(function () {\n      infoElem.textContent = 'Loading...';\n    }).onFinishLoading(function () {\n      infoElem.textContent = '';\n    }).onUpdate(function () {\n      // sync graph data structures\n      state.graphData = state.forceGraph.graphData(); // re-aim camera, if still in default position (not user modified)\n\n      if (camera.position.x === 0 && camera.position.y === 0 && camera.position.z === state.lastSetCameraZ && state.graphData.nodes.length) {\n        camera.lookAt(state.forceGraph.position);\n        state.lastSetCameraZ = camera.position.z = Math.cbrt(state.graphData.nodes.length) * CAMERA_DISTANCE2NODES_FACTOR;\n      }\n    }).onFinishUpdate(function () {\n      // Setup node drag interaction\n      if (state._dragControls) {\n        var curNodeDrag = state.graphData.nodes.find(function (node) {\n          return node.__initialFixedPos && !node.__disposeControlsAfterDrag;\n        }); // detect if there's a node being dragged using the existing drag controls\n\n        if (curNodeDrag) {\n          curNodeDrag.__disposeControlsAfterDrag = true; // postpone previous controls disposal until drag ends\n        } else {\n          state._dragControls.dispose(); // cancel previous drag controls\n\n        }\n\n        state._dragControls = undefined;\n      }\n\n      if (state.enableNodeDrag && state.enablePointerInteraction && state.forceEngine === 'd3') {\n        // Can't access node positions programatically in ngraph\n        var dragControls = state._dragControls = new ThreeDragControls(state.graphData.nodes.map(function (node) {\n          return node.__threeObj;\n        }).filter(function (obj) {\n          return obj;\n        }), camera, renderer.domElement);\n        dragControls.addEventListener('dragstart', function (event) {\n          controls.enabled = false; // Disable controls while dragging\n\n          var node = event.object.__data;\n          !node.__initialFixedPos && (node.__initialFixedPos = {\n            fx: node.fx,\n            fy: node.fy,\n            fz: node.fz\n          });\n          !node.__initialPos && (node.__initialPos = {\n            x: node.x,\n            y: node.y,\n            z: node.z\n          }); // lock node\n\n          ['x', 'y', 'z'].forEach(function (c) {\n            return node[\"f\".concat(c)] = node[c];\n          }); // drag cursor\n\n          renderer.domElement.classList.add('grabbable');\n        });\n        dragControls.addEventListener('drag', function (event) {\n          state.ignoreOneClick = true; // Don't click the node if it's being dragged\n\n          var node = event.object.__data;\n          var newPos = event.object.position;\n          var translate = {\n            x: newPos.x - node.x,\n            y: newPos.y - node.y,\n            z: newPos.z - node.z\n          }; // Move fx/fy/fz (and x/y/z) of nodes based on object new position\n\n          ['x', 'y', 'z'].forEach(function (c) {\n            return node[\"f\".concat(c)] = node[c] = newPos[c];\n          });\n          state.forceGraph.d3AlphaTarget(0.3) // keep engine running at low intensity throughout drag\n          .resetCountdown(); // prevent freeze while dragging\n\n          node.__dragged = true;\n          state.onNodeDrag(node, translate);\n        });\n        dragControls.addEventListener('dragend', function (event) {\n          var node = event.object.__data; // dispose previous controls if needed\n\n          if (node.__disposeControlsAfterDrag) {\n            dragControls.dispose();\n            delete node.__disposeControlsAfterDrag;\n          }\n\n          var initFixedPos = node.__initialFixedPos;\n          var initPos = node.__initialPos;\n          var translate = {\n            x: initPos.x - node.x,\n            y: initPos.y - node.y,\n            z: initPos.z - node.z\n          };\n\n          if (initFixedPos) {\n            ['x', 'y', 'z'].forEach(function (c) {\n              var fc = \"f\".concat(c);\n\n              if (initFixedPos[fc] === undefined) {\n                delete node[fc];\n              }\n            });\n            delete node.__initialFixedPos;\n            delete node.__initialPos;\n\n            if (node.__dragged) {\n              delete node.__dragged;\n              state.onNodeDragEnd(node, translate);\n            }\n          }\n\n          state.forceGraph.d3AlphaTarget(0) // release engine low intensity\n          .resetCountdown(); // let the engine readjust after releasing fixed nodes\n\n          if (state.enableNavigationControls) {\n            controls.enabled = true; // Re-enable controls\n          } // clear cursor\n\n\n          renderer.domElement.classList.remove('grabbable');\n        });\n      }\n    }); // config renderObjs\n\n    var getGraphObj = function getGraphObj(object) {\n      var obj = object; // recurse up object chain until finding the graph object\n\n      while (obj && !obj.hasOwnProperty('__graphObjType')) {\n        obj = obj.parent;\n      }\n\n      return obj;\n    };\n\n    state.renderObjs.objects([// Populate scene\n    new three.AmbientLight(0xbbbbbb), new three.DirectionalLight(0xffffff, 0.6), state.forceGraph]).hoverOrderComparator(function (a, b) {\n      // Prioritize graph objects\n      var aObj = getGraphObj(a);\n      if (!aObj) return 1;\n      var bObj = getGraphObj(b);\n      if (!bObj) return -1; // Prioritize nodes over links\n\n      var isNode = function isNode(o) {\n        return o.__graphObjType === 'node';\n      };\n\n      return isNode(bObj) - isNode(aObj);\n    }).tooltipContent(function (obj) {\n      var graphObj = getGraphObj(obj);\n      return graphObj ? accessorFn(state[\"\".concat(graphObj.__graphObjType, \"Label\")])(graphObj.__data) || '' : '';\n    }).onHover(function (obj) {\n      // Update tooltip and trigger onHover events\n      var hoverObj = getGraphObj(obj);\n\n      if (hoverObj !== state.hoverObj) {\n        var prevObjType = state.hoverObj ? state.hoverObj.__graphObjType : null;\n        var prevObjData = state.hoverObj ? state.hoverObj.__data : null;\n        var objType = hoverObj ? hoverObj.__graphObjType : null;\n        var objData = hoverObj ? hoverObj.__data : null;\n\n        if (prevObjType && prevObjType !== objType) {\n          // Hover out\n          state[\"on\".concat(prevObjType === 'node' ? 'Node' : 'Link', \"Hover\")](null, prevObjData);\n        }\n\n        if (objType) {\n          // Hover in\n          state[\"on\".concat(objType === 'node' ? 'Node' : 'Link', \"Hover\")](objData, prevObjType === objType ? prevObjData : null);\n        }\n\n        state.hoverObj = hoverObj;\n      }\n    }).onClick(function (obj, ev) {\n      // Handle click events on objects\n      if (state.ignoreOneClick) {\n        // f.e. because of dragend event\n        state.ignoreOneClick = false;\n        return;\n      }\n\n      var graphObj = getGraphObj(obj);\n\n      if (graphObj) {\n        state[\"on\".concat(graphObj.__graphObjType === 'node' ? 'Node' : 'Link', \"Click\")](graphObj.__data, ev);\n      } else {\n        state.onBackgroundClick(ev);\n      }\n    }).onRightClick(function (obj, ev) {\n      // Handle right-click events\n      var graphObj = getGraphObj(obj);\n\n      if (graphObj) {\n        state[\"on\".concat(graphObj.__graphObjType === 'node' ? 'Node' : 'Link', \"RightClick\")](graphObj.__data, ev);\n      } else {\n        state.onBackgroundRightClick(ev);\n      }\n    }); //\n    // Kick-off renderer\n\n    this._animationCycle();\n  }\n});\n\nexport default _3dForceGraph;\n","module.exports = function isSamePosition(point1, point2) {\n    var dx = Math.abs(point1.x - point2.x);\n    var dy = Math.abs(point1.y - point2.y);\n    var dz = Math.abs(point1.z - point2.z);\n\n    return (dx < 1e-8 && dy < 1e-8 && dz < 1e-8);\n};\n","/**\n * Performs 3d forces integration, using given timestep. Uses Euler method to solve\n * differential equation (http://en.wikipedia.org/wiki/Euler_method ).\n *\n * @returns {Number} squared distance of total position updates.\n */\n\nmodule.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var dx = 0, tx = 0,\n      dy = 0, ty = 0,\n      dz = 0, tz = 0,\n      i,\n      max = bodies.length;\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n        coeff = timeStep / body.mass;\n\n    body.velocity.x += coeff * body.force.x;\n    body.velocity.y += coeff * body.force.y;\n    body.velocity.z += coeff * body.force.z;\n\n    var vx = body.velocity.x,\n        vy = body.velocity.y,\n        vz = body.velocity.z,\n        v = Math.sqrt(vx * vx + vy * vy + vz * vz);\n\n    if (v > 1) {\n      body.velocity.x = vx / v;\n      body.velocity.y = vy / v;\n      body.velocity.z = vz / v;\n    }\n\n    dx = timeStep * body.velocity.x;\n    dy = timeStep * body.velocity.y;\n    dz = timeStep * body.velocity.z;\n\n    body.pos.x += dx;\n    body.pos.y += dy;\n    body.pos.z += dz;\n\n    tx += Math.abs(dx); ty += Math.abs(dy); tz += Math.abs(dz);\n  }\n\n  return (tx * tx + ty * ty + tz * tz)/bodies.length;\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","/**\n * Performs forces integration, using given timestep. Uses Euler method to solve\n * differential equation (http://en.wikipedia.org/wiki/Euler_method ).\n *\n * @returns {Number} squared distance of total position updates.\n */\n\nmodule.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var dx = 0, tx = 0,\n      dy = 0, ty = 0,\n      i,\n      max = bodies.length;\n\n  if (max === 0) {\n    return 0;\n  }\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n        coeff = timeStep / body.mass;\n\n    body.velocity.x += coeff * body.force.x;\n    body.velocity.y += coeff * body.force.y;\n    var vx = body.velocity.x,\n        vy = body.velocity.y,\n        v = Math.sqrt(vx * vx + vy * vy);\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      body.velocity.x = vx / v;\n      body.velocity.y = vy / v;\n    }\n\n    dx = timeStep * body.velocity.x;\n    dy = timeStep * body.velocity.y;\n\n    body.pos.x += dx;\n    body.pos.y += dy;\n\n    tx += Math.abs(dx); ty += Math.abs(dy);\n  }\n\n  return (tx * tx + ty * ty)/max;\n}\n","/**\n * Manages a simulation of physical forces acting on bodies and springs.\n */\nmodule.exports = physicsSimulator;\n\nfunction physicsSimulator(settings) {\n  var Spring = require('./lib/spring');\n  var expose = require('ngraph.expose');\n  var merge = require('ngraph.merge');\n  var eventify = require('ngraph.events');\n\n  settings = merge(settings, {\n      /**\n       * Ideal length for links (springs in physical model).\n       */\n      springLength: 30,\n\n      /**\n       * Hook's law coefficient. 1 - solid spring.\n       */\n      springCoeff: 0.0008,\n\n      /**\n       * Coulomb's law coefficient. It's used to repel nodes thus should be negative\n       * if you make it positive nodes start attract each other :).\n       */\n      gravity: -1.2,\n\n      /**\n       * Theta coefficient from Barnes Hut simulation. Ranged between (0, 1).\n       * The closer it's to 1 the more nodes algorithm will have to go through.\n       * Setting it to one makes Barnes Hut simulation no different from\n       * brute-force forces calculation (each node is considered).\n       */\n      theta: 0.8,\n\n      /**\n       * Drag force coefficient. Used to slow down system, thus should be less than 1.\n       * The closer it is to 0 the less tight system will be.\n       */\n      dragCoeff: 0.02,\n\n      /**\n       * Default time step (dt) for forces integration\n       */\n      timeStep : 20,\n  });\n\n  // We allow clients to override basic factory methods:\n  var createQuadTree = settings.createQuadTree || require('ngraph.quadtreebh');\n  var createBounds = settings.createBounds || require('./lib/bounds');\n  var createDragForce = settings.createDragForce || require('./lib/dragForce');\n  var createSpringForce = settings.createSpringForce || require('./lib/springForce');\n  var integrate = settings.integrator || require('./lib/eulerIntegrator');\n  var createBody = settings.createBody || require('./lib/createBody');\n\n  var bodies = [], // Bodies in this simulation.\n      springs = [], // Springs in this simulation.\n      quadTree =  createQuadTree(settings),\n      bounds = createBounds(bodies, settings),\n      springForce = createSpringForce(settings),\n      dragForce = createDragForce(settings);\n\n  var bboxNeedsUpdate = true;\n  var totalMovement = 0; // how much movement we made on last step\n\n  var publicApi = {\n    /**\n     * Array of bodies, registered with current simulator\n     *\n     * Note: To add new body, use addBody() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    bodies: bodies,\n\n    quadTree: quadTree,\n\n    /**\n     * Array of springs, registered with current simulator\n     *\n     * Note: To add new spring, use addSpring() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    springs: springs,\n\n    /**\n     * Returns settings with which current simulator was initialized\n     */\n    settings: settings,\n\n    /**\n     * Performs one step of force simulation.\n     *\n     * @returns {boolean} true if system is considered stable; False otherwise.\n     */\n    step: function () {\n      accumulateForces();\n\n      var movement = integrate(bodies, settings.timeStep);\n      bounds.update();\n\n      return movement;\n    },\n\n    /**\n     * Adds body to the system\n     *\n     * @param {ngraph.physics.primitives.Body} body physical body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBody: function (body) {\n      if (!body) {\n        throw new Error('Body is required');\n      }\n      bodies.push(body);\n\n      return body;\n    },\n\n    /**\n     * Adds body to the system at given position\n     *\n     * @param {Object} pos position of a body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBodyAt: function (pos) {\n      if (!pos) {\n        throw new Error('Body position is required');\n      }\n      var body = createBody(pos);\n      bodies.push(body);\n\n      return body;\n    },\n\n    /**\n     * Removes body from the system\n     *\n     * @param {ngraph.physics.primitives.Body} body to remove\n     *\n     * @returns {Boolean} true if body found and removed. falsy otherwise;\n     */\n    removeBody: function (body) {\n      if (!body) { return; }\n\n      var idx = bodies.indexOf(body);\n      if (idx < 0) { return; }\n\n      bodies.splice(idx, 1);\n      if (bodies.length === 0) {\n        bounds.reset();\n      }\n      return true;\n    },\n\n    /**\n     * Adds a spring to this simulation.\n     *\n     * @returns {Object} - a handle for a spring. If you want to later remove\n     * spring pass it to removeSpring() method.\n     */\n    addSpring: function (body1, body2, springLength, springWeight, springCoefficient) {\n      if (!body1 || !body2) {\n        throw new Error('Cannot add null spring to force simulator');\n      }\n\n      if (typeof springLength !== 'number') {\n        springLength = -1; // assume global configuration\n      }\n\n      var spring = new Spring(body1, body2, springLength, springCoefficient >= 0 ? springCoefficient : -1, springWeight);\n      springs.push(spring);\n\n      // TODO: could mark simulator as dirty.\n      return spring;\n    },\n\n    /**\n     * Returns amount of movement performed on last step() call\n     */\n    getTotalMovement: function () {\n      return totalMovement;\n    },\n\n    /**\n     * Removes spring from the system\n     *\n     * @param {Object} spring to remove. Spring is an object returned by addSpring\n     *\n     * @returns {Boolean} true if spring found and removed. falsy otherwise;\n     */\n    removeSpring: function (spring) {\n      if (!spring) { return; }\n      var idx = springs.indexOf(spring);\n      if (idx > -1) {\n        springs.splice(idx, 1);\n        return true;\n      }\n    },\n\n    getBestNewBodyPosition: function (neighbors) {\n      return bounds.getBestNewPosition(neighbors);\n    },\n\n    /**\n     * Returns bounding box which covers all bodies\n     */\n    getBBox: function () {\n      if (bboxNeedsUpdate) {\n        bounds.update();\n        bboxNeedsUpdate = false;\n      }\n      return bounds.box;\n    },\n\n    invalidateBBox: function () {\n      bboxNeedsUpdate = true;\n    },\n\n    gravity: function (value) {\n      if (value !== undefined) {\n        settings.gravity = value;\n        quadTree.options({gravity: value});\n        return this;\n      } else {\n        return settings.gravity;\n      }\n    },\n\n    theta: function (value) {\n      if (value !== undefined) {\n        settings.theta = value;\n        quadTree.options({theta: value});\n        return this;\n      } else {\n        return settings.theta;\n      }\n    }\n  };\n\n  // allow settings modification via public API:\n  expose(settings, publicApi);\n\n  eventify(publicApi);\n\n  return publicApi;\n\n  function accumulateForces() {\n    // Accumulate forces acting on bodies.\n    var body,\n        i = bodies.length;\n\n    if (i) {\n      // only add bodies if there the array is not empty:\n      quadTree.insertBodies(bodies); // performance: O(n * log n)\n      while (i--) {\n        body = bodies[i];\n        // If body is pinned there is no point updating its forces - it should\n        // never move:\n        if (!body.isPinned) {\n          body.force.reset();\n\n          quadTree.updateBodyForce(body);\n          dragForce.update(body);\n        }\n      }\n    }\n\n    i = springs.length;\n    while(i--) {\n      springForce.update(springs[i]);\n    }\n  }\n};\n","module.exports = function isSamePosition(point1, point2) {\n    var dx = Math.abs(point1.x - point2.x);\n    var dy = Math.abs(point1.y - point2.y);\n\n    return (dx < 1e-8 && dy < 1e-8);\n};\n","/**\n * Represents drag force, which reduces force value on each step by given\n * coefficient.\n *\n * @param {Object} options for the drag force\n * @param {Number=} options.dragCoeff drag force coefficient. 0.1 by default\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge'),\n      expose = require('ngraph.expose');\n\n  options = merge(options, {\n    dragCoeff: 0.02\n  });\n\n  var api = {\n    update : function (body) {\n      body.force.x -= options.dragCoeff * body.velocity.x;\n      body.force.y -= options.dragCoeff * body.velocity.y;\n    }\n  };\n\n  // let easy access to dragCoeff:\n  expose(options, api, ['dragCoeff']);\n\n  return api;\n};\n","module.exports = random;\n\n// TODO: Deprecate?\nmodule.exports.random = random,\nmodule.exports.randomIterator = randomIterator\n\n/**\n * Creates seeded PRNG with two methods:\n *   next() and nextDouble()\n */\nfunction random(inputSeed) {\n  var seed = typeof inputSeed === 'number' ? inputSeed : (+new Date());\n  return new Generator(seed)\n}\n\nfunction Generator(seed) {\n  this.seed = seed;\n}\n\n/**\n  * Generates random integer number in the range from 0 (inclusive) to maxValue (exclusive)\n  *\n  * @param maxValue Number REQUIRED. Omitting this number will result in NaN values from PRNG.\n  */\nGenerator.prototype.next = next;\n\n/**\n  * Generates random double number in the range from 0 (inclusive) to 1 (exclusive)\n  * This function is the same as Math.random() (except that it could be seeded)\n  */\nGenerator.prototype.nextDouble = nextDouble;\n\n/**\n * Returns a random real number uniformly in [0, 1)\n */\nGenerator.prototype.uniform = nextDouble;\n\nGenerator.prototype.gaussian = gaussian;\n\nfunction gaussian() {\n  // use the polar form of the Box-Muller transform\n  // based on https://introcs.cs.princeton.edu/java/23recursion/StdRandom.java\n  var r, x, y;\n  do {\n    x = this.nextDouble() * 2 - 1;\n    y = this.nextDouble() * 2 - 1;\n    r = x * x + y * y;\n  } while (r >= 1 || r === 0);\n\n  return x * Math.sqrt(-2 * Math.log(r)/r);\n}\n\nfunction nextDouble() {\n  var seed = this.seed;\n  // Robert Jenkins' 32 bit integer hash function.\n  seed = ((seed + 0x7ed55d16) + (seed << 12)) & 0xffffffff;\n  seed = ((seed ^ 0xc761c23c) ^ (seed >>> 19)) & 0xffffffff;\n  seed = ((seed + 0x165667b1) + (seed << 5)) & 0xffffffff;\n  seed = ((seed + 0xd3a2646c) ^ (seed << 9)) & 0xffffffff;\n  seed = ((seed + 0xfd7046c5) + (seed << 3)) & 0xffffffff;\n  seed = ((seed ^ 0xb55a4f09) ^ (seed >>> 16)) & 0xffffffff;\n  this.seed = seed;\n  return (seed & 0xfffffff) / 0x10000000;\n}\n\nfunction next(maxValue) {\n  return Math.floor(this.nextDouble() * maxValue);\n}\n\n/*\n * Creates iterator over array, which returns items of array in random order\n * Time complexity is guaranteed to be O(n);\n */\nfunction randomIterator(array, customRandom) {\n  var localRandom = customRandom || random();\n  if (typeof localRandom.next !== 'function') {\n    throw new Error('customRandom does not match expected API: next() function is missing');\n  }\n\n  return {\n    forEach: forEach,\n\n    /**\n     * Shuffles array randomly, in place.\n     */\n    shuffle: shuffle\n  };\n\n  function shuffle() {\n    var i, j, t;\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n    }\n\n    return array;\n  }\n\n  function forEach(callback) {\n    var i, j, t;\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n\n      callback(t);\n    }\n\n    if (array.length) {\n      callback(array[0]);\n    }\n  }\n}","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","module.exports = exposeProperties;\n\n/**\n * Augments `target` object with getter/setter functions, which modify settings\n *\n * @example\n *  var target = {};\n *  exposeProperties({ age: 42}, target);\n *  target.age(); // returns 42\n *  target.age(24); // make age 24;\n *\n *  var filteredTarget = {};\n *  exposeProperties({ age: 42, name: 'John'}, filteredTarget, ['name']);\n *  filteredTarget.name(); // returns 'John'\n *  filteredTarget.age === undefined; // true\n */\nfunction exposeProperties(settings, target, filter) {\n  var needsFilter = Object.prototype.toString.call(filter) === '[object Array]';\n  if (needsFilter) {\n    for (var i = 0; i < filter.length; ++i) {\n      augment(settings, target, filter[i]);\n    }\n  } else {\n    for (var key in settings) {\n      augment(settings, target, key);\n    }\n  }\n}\n\nfunction augment(source, target, key) {\n  if (source.hasOwnProperty(key)) {\n    if (typeof target[key] === 'function') {\n      // this accessor is already defined. Ignore it\n      return;\n    }\n    target[key] = function (value) {\n      if (value !== undefined) {\n        source[key] = value;\n        return target;\n      }\n      return source[key];\n    }\n  }\n}\n","module.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var tx = 0, ty = 0, tz = 0,\n      i, max = bodies.length;\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n      coeff = timeStep * timeStep / body.mass;\n\n    body.pos.x = 2 * body.pos.x - body.prevPos.x + body.force.x * coeff;\n    body.pos.y = 2 * body.pos.y - body.prevPos.y + body.force.y * coeff;\n    body.pos.z = 2 * body.pos.z - body.prevPos.z + body.force.z * coeff;\n\n    tx += Math.abs(body.pos.x - body.prevPos.x)\n    ty += Math.abs(body.pos.y - body.prevPos.y)\n    tz += Math.abs(body.pos.z - body.prevPos.z)\n  }\n\n  return (tx * tx + ty * ty + tz * tz)/bodies.length;\n}\n","module.exports = InsertStack;\n\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"],"sourceRoot":""}